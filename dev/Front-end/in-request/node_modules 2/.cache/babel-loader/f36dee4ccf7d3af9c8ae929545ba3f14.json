{"ast":null,"code":"var _jsxFileName = \"/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Home/ActiveTransaction.js\";\nimport React, { Component } from 'react';\nimport { fdb } from \"../../firebase\";\nimport { withStyles, makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\n\nconst styles = theme => ({\n  root: {\n    minWidth: 275,\n    margin: 10\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n});\n\nclass ActiveTransaction extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active_br_post: [],\n      active_ld_post: []\n    };\n  }\n\n  componentDidMount() {\n    let request_collection = fdb.collection('requests');\n    let query = request_collection.where('borrower', '==', this.props.curUser).where('msnone', '==', true).where('msfinished', '==', false).get().then(snapshot => {\n      snapshot.forEach(doc => {\n        const item = doc.data();\n        const new_item = item;\n        new_item['id'] = doc.id;\n        this.setState({\n          active_br_post: [...this.state.active_br_post, new_item]\n        });\n      });\n    }).catch(err => {\n      console.log('Error getting borrowing documents', err);\n    });\n    let len_query = request_collection.where('lender', '==', this.props.curUser).where('msaccepted', '==', true).where('msfinished', '==', false).get().then(snapshot => {\n      snapshot.forEach(doc => {\n        const item = doc.data();\n        const new_item = item;\n        new_item['id'] = doc.id;\n        this.setState({\n          active_ld_post: [...this.state.active_ld_post, new_item]\n        });\n      });\n    }).catch(err => {\n      console.log('Error getting lending documents', err);\n    });\n  }\n\n  handleStart(post) {\n    alert(\"start button is pushed, the post id is \" + post.id);\n    var upd = fdb.collection(\"requests\").doc(post.id);\n    upd.update({\n      msstarted: true,\n      status: \"pending\"\n    });\n  }\n\n  handleFinish(post) {\n    alert(\"Finish button is pushed, the post id is \" + post.id);\n    var upd = fdb.collection(\"requests\").doc(post.id);\n    upd.update({\n      msfinished: true,\n      status: \"archived\"\n    });\n  }\n\n  handleCancel(post) {\n    alert(\"you have cancelled your post : \" + post.title);\n    var upd = fdb.collection(\"requests\").doc(post.id);\n    upd.update({\n      msfinished: true,\n      status: \"archived\"\n    });\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    const {\n      active_br_post,\n      active_ld_post\n    } = this.state;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      color: \"textPrimary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Active Borrow Record\"), React.createElement(Grid, {\n      container: true,\n      xs: 12,\n      spacing: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, active_br_post.map(post => React.createElement(Grid, {\n      item: true,\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, post.title), React.createElement(Typography, {\n      variant: \"subtitle1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, post.content), React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"p\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Estimated Return Date: \", post.estReturn.toDate().toString(), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), post.msaccepted == false ? React.createElement(CardActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Start\"), React.createElement(Button, {\n      size: \"small\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Finish\"), React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: () => this.handleCancel(post),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Cancel\")) : [post.msstarted == false ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"p\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Lender: \", post.lender, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), React.createElement(CardActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: () => this.handleStart(post),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Start\"), React.createElement(Button, {\n      size: \"small\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Finish\"), React.createElement(Button, {\n      size: \"small\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Cancel\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"p\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Lender: \", post.lender, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    })), React.createElement(CardActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Start\"), React.createElement(Button, {\n      size: \"small\",\n      onClick: () => this.handleFinish(post),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Finish\"), React.createElement(Button, {\n      size: \"small\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Cancel\")))]))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      color: \"textPrimary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Active Lend Record\"), active_ld_post.map(post => React.createElement(Grid, {\n      item: true,\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, post.title), React.createElement(Typography, {\n      variant: \"subtitle1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, post.content), React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"p\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Borrower: \", post.borrower, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"p\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Estimated Return Date: \", post.estReturn.toDate().toString(), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default withStyles(styles, {\n  withTheme: true\n})(ActiveTransaction);","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Home/ActiveTransaction.js"],"names":["React","Component","fdb","withStyles","makeStyles","ThemeProvider","Button","IconButton","Container","Grid","Card","CardActions","CardContent","Typography","Divider","styles","theme","root","minWidth","margin","bullet","display","transform","title","fontSize","pos","marginBottom","ActiveTransaction","constructor","props","state","active_br_post","active_ld_post","componentDidMount","request_collection","collection","query","where","curUser","get","then","snapshot","forEach","doc","item","data","new_item","id","setState","catch","err","console","log","len_query","handleStart","post","alert","upd","update","msstarted","status","handleFinish","msfinished","handleCancel","render","classes","map","content","estReturn","toDate","toString","msaccepted","lender","borrower","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {fdb} from \"../../firebase\";\nimport { withStyles, makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\n\n\nconst styles = theme => ({\n  root: {\n    minWidth: 275,\n    margin: 10,\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n})\n\nclass ActiveTransaction extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      active_br_post: [],\n      active_ld_post: [],\n    };\n  }\n  componentDidMount() {\n    let request_collection = fdb.collection('requests')\n    let query = request_collection.where('borrower', '==', this.props.curUser).where('msnone', '==', true).where('msfinished', '==', false).get()\n      .then(snapshot => {\n        snapshot.forEach(doc => {\n          const item = doc.data();\n          const new_item = item;\n          new_item['id'] = doc.id;\n          this.setState({\n              active_br_post: [...this.state.active_br_post, new_item],\n          });\n        });\n      }).catch(err => {\n        console.log('Error getting borrowing documents', err);\n      });\n    let len_query = request_collection.where('lender', '==', this.props.curUser).where('msaccepted','==',true).where('msfinished', '==', false).get()\n      .then(snapshot => {\n        snapshot.forEach(doc => {\n          const item = doc.data();\n          const new_item = item;\n          new_item['id'] = doc.id;\n          this.setState({\n              active_ld_post: [...this.state.active_ld_post, new_item],\n          });\n        });\n      }).catch(err => {\n        console.log('Error getting lending documents', err);\n      });\n\n  }\n\n    handleStart(post){\n        alert(\"start button is pushed, the post id is \" + post.id);\n        var upd = fdb.collection(\"requests\").doc(post.id);\n        upd.update({\n            msstarted:true,\n            status:\"pending\"\n        })\n    }\n\n    handleFinish(post){\n        alert(\"Finish button is pushed, the post id is \" + post.id);\n        var upd = fdb.collection(\"requests\").doc(post.id);\n        upd.update({\n            msfinished:true,\n            status:\"archived\"\n        })\n    }\n\n    handleCancel(post){\n        alert(\"you have cancelled your post : \" + post.title);\n        var upd = fdb.collection(\"requests\").doc(post.id);\n        upd.update({\n            msfinished:true,\n            status:\"archived\"\n        })\n    }\n\n  render() {\n    const{classes} = this.props\n    const{active_br_post, active_ld_post} = this.state\n\n    return (\n      <div>\n        <Typography variant=\"h4\" gutterBottom color=\"textPrimary\">\n          Active Borrow Record\n        </Typography>\n        <Grid container xs={12} spacing={3}>\n        {active_br_post.map(post=>\n          <Grid item xs={4}>\n            <Card>\n                <CardContent>\n                  <Typography variant=\"h5\" component=\"h2\">\n                    {post.title}\n                  </Typography>\n                  <Typography variant= \"subtitle1\" >\n                    {post.content}\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"p\" color=\"textSecondary\">\n                    Estimated Return Date: {post.estReturn.toDate().toString()}\n                    <br />\n                  </Typography>\n                  {post.msaccepted == false\n                    ?\n                      <CardActions>\n                        <Button size=\"small\" disabled>Start</Button>\n                        <Button size=\"small\" disabled>Finish</Button>\n                        <Button size=\"small\" color=\"primary\" onClick={()=>this.handleCancel(post)}>Cancel</Button>\n                      </CardActions>\n                    :\n                    [\n                      (post.msstarted == false\n                        ?\n                        <div>\n                          <Typography variant=\"body2\" component=\"p\" color=\"textSecondary\">\n                            Lender: {post.lender}\n                          <br />\n                          </Typography>\n                          <CardActions>\n                            <Button size=\"small\" color=\"primary\" onClick={()=>this.handleStart(post)}>Start</Button>\n                            <Button size=\"small\" disabled>Finish</Button>\n                            <Button size=\"small\" disabled>Cancel</Button>\n                          </CardActions>\n                        </div>\n                        :\n                        <div>\n                          <Typography variant=\"body2\" component=\"p\" color=\"textSecondary\">\n                            Lender: {post.lender}\n                          <br />\n                          </Typography>\n                          <CardActions>\n                            <Button size=\"small\" color=\"primary\" disabled>Start</Button>\n                            <Button size=\"small\" onClick={()=>this.handleFinish(post)}>Finish</Button>\n                            <Button size=\"small\" disabled>Cancel</Button>\n                          </CardActions>\n                        </div>\n                      ),\n                    ]\n                  }\n                </CardContent>\n            </Card>\n          </Grid>\n        )}\n        </Grid>\n        <br />\n        <Divider />\n        <br />\n        <Typography variant=\"h4\" gutterBottom color=\"textPrimary\">\n          Active Lend Record\n        </Typography>\n        {active_ld_post.map(post=>\n          <Grid item xs={4}>\n            <Card>\n                <CardContent>\n                  <Typography variant=\"h5\" component=\"h2\">\n                    {post.title}\n                  </Typography>\n                  <Typography variant= \"subtitle1\" >\n                    {post.content}\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"p\" color=\"textSecondary\">\n                    Borrower: {post.borrower}\n                    <br />\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"p\" color=\"textSecondary\">\n                    Estimated Return Date: {post.estReturn.toDate().toString()}\n                    <br />\n                  </Typography>\n                </CardContent>\n            </Card>\n          </Grid>\n        )}\n      </div>\n    );\n  }\n}\nexport default withStyles(styles,{withTheme: true})(ActiveTransaction);\n"]},"metadata":{},"sourceType":"module"}