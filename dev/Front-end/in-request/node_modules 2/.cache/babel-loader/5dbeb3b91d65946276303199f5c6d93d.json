{"ast":null,"code":"var _jsxFileName = \"/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Home/uploadimg.js\";\nimport React, { Component } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport { storage } from '../../firebase';\nimport PersonIcon from '@material-ui/icons/Person';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nconst largeAvatar = withStyles(theme => ({\n  root: {\n    width: 80,\n    height: 80,\n    border: `2px solid ${theme.palette.background.paper}`\n  }\n}))(Avatar);\n\nclass Upload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        })); //image = this.state.image;\n\n        const name = 'images/' + this.props.Email;\n        console.log(name);\n        const uploadtask = storage.ref(name).put(image);\n        uploadtask.on('state_changed', snapshot => {\n          console.log(\"intheresomewhere\"); //progress\n        }, error => {\n          console.log();\n        }, () => {\n          //complete\n          storage.ref('images').child(this.props.Email).getDownloadURL().then(url => {\n            console.log(url);\n            this.setState({\n              url\n            });\n          });\n        });\n      }\n    };\n\n    this.handleUpdate = e => {// const {image} = this.state;\n      // const uploadtask = storage.ref(`images/${image.name}`).put(image);\n      // uploadtask.on('state_changed', (snapshot) => {\n      //     console.log(\"intheresomewhere\")//progress\n      // }, (error) => {console.log()}, () => {\n      //     //complete\n      //     storage.ref('images').child(image.name).getDownloadURL().then(url => {\n      //         console.log(url);\n      //         this.setState({url});\n      //     })\n      // });\n    };\n\n    this.state = {\n      image: \"\",\n      url: this.props.url,\n      imgName: this.props.email\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n  }\n\n  componentWillMount() {\n    console.log(this.props.url);\n    this.setState({\n      url: this.props.url\n    });\n  }\n\n  render() {\n    const style = {\n      height: '100vh,',\n      display: 'flex ',\n      flexDirection: 'column',\n      alignItems: 'center'\n    };\n    return React.createElement(\"div\", {\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"myInput\",\n      type: \"file\",\n      ref: ref => this.myInput = ref,\n      style: {\n        display: 'none'\n      },\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(IconButton, {\n      onClick: e => this.myInput.click(),\n      width: \"100px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      src: this.state.url,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Home/uploadimg.js"],"names":["React","Component","IconButton","Button","storage","PersonIcon","PublishIcon","Avatar","makeStyles","withStyles","largeAvatar","theme","root","width","height","border","palette","background","paper","Upload","constructor","props","handleChange","e","target","files","image","setState","name","Email","console","log","uploadtask","ref","put","on","snapshot","error","child","getDownloadURL","then","url","handleUpdate","state","imgName","email","bind","componentWillMount","render","style","display","flexDirection","alignItems","myInput","click"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from  \"@material-ui/core/Button\";\nimport {storage} from '../../firebase';\nimport PersonIcon from '@material-ui/icons/Person';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { makeStyles,withStyles } from '@material-ui/core/styles';\n\nconst largeAvatar = withStyles(theme => ({\n  root: {\n    width: 80,\n    height: 80,\n    border: `2px solid ${theme.palette.background.paper}`,\n  },\n}))(Avatar);\n\n\nclass Upload extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: \"\",\n            url: this.props.url,\n            imgName:this.props.email\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n    }\n\n\n    handleChange = e => {\n        if(e.target.files[0]){\n            const image = e.target.files[0];\n            this.setState(()=>({image}));\n            //image = this.state.image;\n            const name = 'images/'+ this.props.Email\n            console.log(name)\n            const uploadtask = storage.ref(name).put(image);\n            uploadtask.on('state_changed', (snapshot) => {\n                console.log(\"intheresomewhere\")//progress\n            }, (error) => {console.log()}, () => {\n                //complete\n                storage.ref('images').child(this.props.Email).getDownloadURL().then(url => {\n                    console.log(url);\n                    this.setState({url});\n                })\n            });\n        }\n\n    }\n    handleUpdate = e => {\n        // const {image} = this.state;\n        // const uploadtask = storage.ref(`images/${image.name}`).put(image);\n        // uploadtask.on('state_changed', (snapshot) => {\n        //     console.log(\"intheresomewhere\")//progress\n        // }, (error) => {console.log()}, () => {\n        //     //complete\n        //     storage.ref('images').child(image.name).getDownloadURL().then(url => {\n        //         console.log(url);\n        //         this.setState({url});\n        //     })\n        // });\n    }\n\ncomponentWillMount() {\n  console.log(this.props.url)\n  this.setState({\n    url:this.props.url\n  })\n}\n\n    render(){\n        const style = {\n            height: '100vh,',\n            display: 'flex ',\n            flexDirection: 'column',\n            alignItems: 'center'\n        };\n        return (\n            <div style={style}>\n                <input id=\"myInput\" type=\"file\" ref={(ref) => this.myInput = ref} style = {{display : 'none'}}  onChange={this.handleChange}/>\n                <IconButton onClick={(e) => this.myInput.click() } width=\"100px\" >\n                    <Avatar src={this.state.url} size=\"small\" />\n                </IconButton>\n\n            </div>\n        )\n    }\n}\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}