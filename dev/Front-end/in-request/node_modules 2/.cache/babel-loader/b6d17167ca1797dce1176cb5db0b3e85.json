{"ast":null,"code":"\"use strict\";\n/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass FilterStack {\n  constructor(filters) {\n    this.filters = filters;\n  }\n\n  sendMetadata(metadata) {\n    let result = metadata;\n\n    for (let i = 0; i < this.filters.length; i++) {\n      result = this.filters[i].sendMetadata(result);\n    }\n\n    return result;\n  }\n\n  receiveMetadata(metadata) {\n    let result = metadata;\n\n    for (let i = this.filters.length - 1; i >= 0; i--) {\n      result = this.filters[i].receiveMetadata(result);\n    }\n\n    return result;\n  }\n\n  sendMessage(message) {\n    let result = message;\n\n    for (let i = 0; i < this.filters.length; i++) {\n      result = this.filters[i].sendMessage(result);\n    }\n\n    return result;\n  }\n\n  receiveMessage(message) {\n    let result = message;\n\n    for (let i = this.filters.length - 1; i >= 0; i--) {\n      result = this.filters[i].receiveMessage(result);\n    }\n\n    return result;\n  }\n\n  receiveTrailers(status) {\n    let result = status;\n\n    for (let i = this.filters.length - 1; i >= 0; i--) {\n      result = this.filters[i].receiveTrailers(result);\n    }\n\n    return result;\n  }\n\n}\n\nexports.FilterStack = FilterStack;\n\nclass FilterStackFactory {\n  constructor(factories) {\n    this.factories = factories;\n  }\n\n  createFilter(callStream) {\n    return new FilterStack(this.factories.map(factory => factory.createFilter(callStream)));\n  }\n\n}\n\nexports.FilterStackFactory = FilterStackFactory;","map":{"version":3,"sources":["../../src/filter-stack.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;AAqBA,MAAa,WAAb,CAAwB;AACtB,EAAA,WAAA,CAA6B,OAA7B,EAA8C;AAAjB,SAAA,OAAA,GAAA,OAAA;AAAqB;;AAElD,EAAA,YAAY,CAAC,QAAD,EAA4B;AACtC,QAAI,MAAM,GAAsB,QAAhC;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC5C,MAAA,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,YAAhB,CAA6B,MAA7B,CAAT;AACD;;AAED,WAAO,MAAP;AACD;;AAED,EAAA,eAAe,CAAC,QAAD,EAA4B;AACzC,QAAI,MAAM,GAAsB,QAAhC;;AAEA,SAAK,IAAI,CAAC,GAAG,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAnC,EAAsC,CAAC,IAAI,CAA3C,EAA8C,CAAC,EAA/C,EAAmD;AACjD,MAAA,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,eAAhB,CAAgC,MAAhC,CAAT;AACD;;AAED,WAAO,MAAP;AACD;;AAED,EAAA,WAAW,CAAC,OAAD,EAA8B;AACvC,QAAI,MAAM,GAAyB,OAAnC;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC5C,MAAA,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,WAAhB,CAA4B,MAA5B,CAAT;AACD;;AAED,WAAO,MAAP;AACD;;AAED,EAAA,cAAc,CAAC,OAAD,EAAyB;AACrC,QAAI,MAAM,GAAoB,OAA9B;;AAEA,SAAK,IAAI,CAAC,GAAG,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAnC,EAAsC,CAAC,IAAI,CAA3C,EAA8C,CAAC,EAA/C,EAAmD;AACjD,MAAA,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,cAAhB,CAA+B,MAA/B,CAAT;AACD;;AAED,WAAO,MAAP;AACD;;AAED,EAAA,eAAe,CAAC,MAAD,EAA8B;AAC3C,QAAI,MAAM,GAA0B,MAApC;;AAEA,SAAK,IAAI,CAAC,GAAG,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAnC,EAAsC,CAAC,IAAI,CAA3C,EAA8C,CAAC,EAA/C,EAAmD;AACjD,MAAA,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,eAAhB,CAAgC,MAAhC,CAAT;AACD;;AAED,WAAO,MAAP;AACD;;AAnDqB;;AAAxB,OAAA,CAAA,WAAA,GAAA,WAAA;;AAsDA,MAAa,kBAAb,CAA+B;AAC7B,EAAA,WAAA,CAA6B,SAA7B,EAAoE;AAAvC,SAAA,SAAA,GAAA,SAAA;AAA2C;;AAExE,EAAA,YAAY,CAAC,UAAD,EAAiB;AAC3B,WAAO,IAAI,WAAJ,CACL,KAAK,SAAL,CAAe,GAAf,CAAmB,OAAO,IAAI,OAAO,CAAC,YAAR,CAAqB,UAArB,CAA9B,CADK,CAAP;AAGD;;AAP4B;;AAA/B,OAAA,CAAA,kBAAA,GAAA,kBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\n/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass FilterStack {\n    constructor(filters) {\n        this.filters = filters;\n    }\n    sendMetadata(metadata) {\n        let result = metadata;\n        for (let i = 0; i < this.filters.length; i++) {\n            result = this.filters[i].sendMetadata(result);\n        }\n        return result;\n    }\n    receiveMetadata(metadata) {\n        let result = metadata;\n        for (let i = this.filters.length - 1; i >= 0; i--) {\n            result = this.filters[i].receiveMetadata(result);\n        }\n        return result;\n    }\n    sendMessage(message) {\n        let result = message;\n        for (let i = 0; i < this.filters.length; i++) {\n            result = this.filters[i].sendMessage(result);\n        }\n        return result;\n    }\n    receiveMessage(message) {\n        let result = message;\n        for (let i = this.filters.length - 1; i >= 0; i--) {\n            result = this.filters[i].receiveMessage(result);\n        }\n        return result;\n    }\n    receiveTrailers(status) {\n        let result = status;\n        for (let i = this.filters.length - 1; i >= 0; i--) {\n            result = this.filters[i].receiveTrailers(result);\n        }\n        return result;\n    }\n}\nexports.FilterStack = FilterStack;\nclass FilterStackFactory {\n    constructor(factories) {\n        this.factories = factories;\n    }\n    createFilter(callStream) {\n        return new FilterStack(this.factories.map(factory => factory.createFilter(callStream)));\n    }\n}\nexports.FilterStackFactory = FilterStackFactory;\n//# sourceMappingURL=filter-stack.js.map"]},"metadata":{},"sourceType":"script"}