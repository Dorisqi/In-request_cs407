{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { normalizeColor, parseMetricToNum } from '../../utils';\nimport { StyledChart } from './StyledChart';\nimport { normalizeBounds, normalizeValues } from './utils';\nvar gradientMaskColor = '#ffffff'; // use constants so re-renders don't re-trigger effects\n\nvar defaultSize = {\n  height: 'small',\n  width: 'medium'\n};\nvar defaultValues = [];\nvar Chart = React.forwardRef(function (_ref, ref) {\n  var propsBounds = _ref.bounds,\n      color = _ref.color,\n      gap = _ref.gap,\n      id = _ref.id,\n      onClick = _ref.onClick,\n      onHover = _ref.onHover,\n      _ref$overflow = _ref.overflow,\n      overflow = _ref$overflow === void 0 ? false : _ref$overflow,\n      round = _ref.round,\n      _ref$size = _ref.size,\n      propsSize = _ref$size === void 0 ? defaultSize : _ref$size,\n      _ref$thickness = _ref.thickness,\n      thickness = _ref$thickness === void 0 ? 'medium' : _ref$thickness,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'bar' : _ref$type,\n      _ref$values = _ref.values,\n      propsValues = _ref$values === void 0 ? defaultValues : _ref$values,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"bounds\", \"color\", \"gap\", \"id\", \"onClick\", \"onHover\", \"overflow\", \"round\", \"size\", \"thickness\", \"type\", \"values\"]);\n\n  var theme = useContext(ThemeContext);\n\n  var _useState = useState([]),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var _useState2 = useState([[0, 0], [0, 0]]),\n      bounds = _useState2[0],\n      setBounds = _useState2[1];\n\n  var _useState3 = useState([0, 0]),\n      containerSize = _useState3[0],\n      setContainerSize = _useState3[1];\n\n  var _useState4 = useState([0, 0]),\n      size = _useState4[0],\n      setSize = _useState4[1];\n\n  var _useState5 = useState([1, 1]),\n      scale = _useState5[0],\n      setScale = _useState5[1];\n\n  var _useState6 = useState(0),\n      strokeWidth = _useState6[0],\n      setStrokeWidth = _useState6[1];\n\n  var containerRef = ref || useRef(); // calculations\n\n  useEffect(function () {\n    var nextValues = normalizeValues(propsValues);\n    setValues(nextValues);\n    var nextBounds = normalizeBounds(propsBounds, nextValues);\n    setBounds(nextBounds);\n    var nextStrokeWidth = parseMetricToNum(theme.global.edgeSize[thickness] || thickness);\n    setStrokeWidth(nextStrokeWidth);\n    var gapWidth = gap ? parseMetricToNum(theme.global.edgeSize[gap] || gap) : nextStrokeWidth; // autoWidth is how wide we'd pefer\n\n    var autoWidth = nextStrokeWidth * nextValues.length + (nextValues.length - 1) * gapWidth;\n    var sizeWidth = typeof propsSize === 'string' ? propsSize : propsSize.width || defaultSize.width;\n    var width;\n\n    if (sizeWidth === 'full') {\n      width = containerSize[0];\n    } else if (sizeWidth === 'auto') {\n      width = autoWidth;\n    } else {\n      width = parseMetricToNum(theme.global.size[sizeWidth] || sizeWidth);\n    }\n\n    var sizeHeight = typeof propsSize === 'string' ? propsSize : propsSize.height || defaultSize.height;\n    var height;\n\n    if (sizeHeight === 'full') {\n      height = containerSize[1];\n    } else {\n      height = parseMetricToNum(theme.global.size[sizeHeight] || sizeHeight);\n    }\n\n    setSize([width, height]);\n    var nextScale = [(sizeWidth === 'auto' ? autoWidth : width) / (nextBounds[0][1] - nextBounds[0][0]), height / (nextBounds[1][1] - nextBounds[1][0])];\n    setScale(nextScale);\n  }, [containerSize, gap, propsBounds, propsSize, propsValues, theme.global.edgeSize, theme.global.size, thickness]); // set container size when we get ref or when size changes\n\n  if (containerRef.current && propsSize && (propsSize === 'full' || propsSize.height === 'full' || propsSize.width === 'full')) {\n    var containerNode = containerRef.current;\n\n    if (containerNode) {\n      var parentNode = containerNode.parentNode;\n\n      if (parentNode) {\n        var rect = parentNode.getBoundingClientRect();\n\n        if (rect.width !== containerSize[0] || rect.height !== containerSize[1]) {\n          setContainerSize([rect.width, rect.height]);\n        }\n      }\n    }\n  } // container size, if needed\n\n\n  useEffect(function () {\n    var onResize = function onResize() {\n      var parentNode = containerRef.current.parentNode;\n      var rect = parentNode.getBoundingClientRect();\n      setContainerSize([rect.width, rect.height]);\n    };\n\n    if (propsSize && (propsSize === 'full' || propsSize.width === 'full' || propsSize.height === 'full')) {\n      window.addEventListener('resize', onResize);\n      return function () {\n        return window.removeEventListener('resize', onResize);\n      };\n    }\n\n    return undefined;\n  }, [containerRef, propsSize]);\n  var useGradient = color && Array.isArray(color);\n\n  var renderBars = function renderBars() {\n    return (values || []).map(function (valueArg, index) {\n      var label = valueArg.label,\n          valueOnHover = valueArg.onHover,\n          value = valueArg.value,\n          valueRest = _objectWithoutPropertiesLoose(valueArg, [\"label\", \"onHover\", \"value\"]);\n\n      var key = \"p-\" + index;\n      var bottom = value.length === 2 ? bounds[1][0] : value[1];\n      var top = value.length === 2 ? value[1] : value[2];\n\n      if (top !== 0) {\n        var d = \"M \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (bottom - bounds[1][0]) * scale[1])) + (\" L \" + (value[0] - bounds[0][0]) * scale[0] + \",\") + (\"\" + (size[1] - (top - bounds[1][0]) * scale[1]));\n        var hoverProps;\n\n        if (valueOnHover) {\n          hoverProps = {\n            onMouseOver: function onMouseOver() {\n              return valueOnHover(true);\n            },\n            onMouseLeave: function onMouseLeave() {\n              return valueOnHover(false);\n            }\n          };\n        }\n\n        var clickProps;\n\n        if (onClick) {\n          clickProps = {\n            onClick: onClick\n          };\n        }\n\n        return React.createElement(\"g\", {\n          key: key,\n          fill: \"none\"\n        }, React.createElement(\"title\", null, label), React.createElement(\"path\", _extends({\n          d: d\n        }, hoverProps, clickProps, valueRest)));\n      }\n\n      return undefined;\n    });\n  };\n\n  var renderLine = function renderLine() {\n    var d = '';\n    (values || []).forEach(function (_ref2, index) {\n      var value = _ref2.value;\n      d += (index ? ' L' : 'M') + \" \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (value[1] - bounds[1][0]) * scale[1]));\n    });\n    var hoverProps;\n\n    if (onHover) {\n      hoverProps = {\n        onMouseOver: function onMouseOver() {\n          return onHover(true);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return onHover(false);\n        }\n      };\n    }\n\n    var clickProps;\n\n    if (onClick) {\n      clickProps = {\n        onClick: onClick\n      };\n    }\n\n    return React.createElement(\"g\", {\n      fill: \"none\"\n    }, React.createElement(\"path\", _extends({\n      d: d\n    }, hoverProps, clickProps)));\n  };\n\n  var renderArea = function renderArea() {\n    var d = '';\n    (values || []).forEach(function (_ref3, index) {\n      var value = _ref3.value;\n      var top = value.length === 2 ? value[1] : value[2];\n      d += (!index ? 'M' : ' L') + \" \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (top - bounds[1][0]) * scale[1]));\n    });\n    (values || []).reverse().forEach(function (_ref4) {\n      var value = _ref4.value;\n      var bottom = value.length === 2 ? bounds[1][0] : value[1];\n      d += \" L \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (bottom - bounds[1][0]) * scale[1]));\n    });\n\n    if (d.length > 0) {\n      d += ' Z';\n    }\n\n    var hoverProps;\n\n    if (onHover) {\n      hoverProps = {\n        onMouseOver: function onMouseOver() {\n          return onHover(true);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return onHover(false);\n        }\n      };\n    }\n\n    var clickProps;\n\n    if (onClick) {\n      clickProps = {\n        onClick: onClick\n      };\n    }\n\n    return React.createElement(\"g\", null, React.createElement(\"path\", _extends({\n      d: d\n    }, hoverProps, clickProps)));\n  };\n\n  var renderPoints = function renderPoints() {\n    return (values || []).map(function (valueArg, index) {\n      var label = valueArg.label,\n          valueOnHover = valueArg.onHover,\n          value = valueArg.value,\n          valueRest = _objectWithoutPropertiesLoose(valueArg, [\"label\", \"onHover\", \"value\"]);\n\n      var key = \"p-\" + index;\n      var hoverProps;\n\n      if (valueOnHover) {\n        hoverProps = {\n          onMouseOver: function onMouseOver() {\n            return valueOnHover(true);\n          },\n          onMouseLeave: function onMouseLeave() {\n            return valueOnHover(false);\n          }\n        };\n      }\n\n      var clickProps;\n\n      if (onClick) {\n        clickProps = {\n          onClick: onClick\n        };\n      }\n\n      var center = value.length === 2 ? value[1] : value[2];\n      var shape;\n\n      if (round) {\n        var cx = (value[0] - bounds[0][0]) * scale[0];\n        var cy = size[1] - (center - bounds[1][0]) * scale[1];\n        shape = React.createElement(\"circle\", _extends({\n          cx: cx,\n          cy: cy,\n          r: strokeWidth / 2\n        }, hoverProps, clickProps, valueRest));\n      } else {\n        var x = (value[0] - bounds[0][0]) * scale[0] - strokeWidth / 2;\n        var y = size[1] - (center - bounds[1][0]) * scale[1] - strokeWidth / 2;\n        shape = React.createElement(\"rect\", _extends({\n          x: x,\n          y: y,\n          width: strokeWidth,\n          height: strokeWidth\n        }, hoverProps, clickProps, valueRest));\n      }\n\n      return React.createElement(\"g\", {\n        key: key,\n        stroke: \"none\"\n      }, React.createElement(\"title\", null, label), shape);\n    });\n  };\n\n  var contents;\n\n  if (type === 'bar') {\n    contents = renderBars();\n  } else if (type === 'line') {\n    contents = renderLine();\n  } else if (type === 'area') {\n    contents = renderArea();\n  } else if (type === 'point') {\n    contents = renderPoints();\n  }\n\n  var viewBounds = overflow ? [0, 0, size[0], size[1]] : [-(strokeWidth / 2), -(strokeWidth / 2), size[0] + strokeWidth, size[1] + strokeWidth];\n  var viewBox = viewBounds.join(' ');\n  var colorName;\n\n  if (!useGradient) {\n    if (color && color.color) colorName = color.color;else if (color) colorName = color;else if (theme.chart && theme.chart.color) colorName = theme.chart.color;\n  }\n\n  var opacity = color && color.opacity ? theme.global.opacity[color.opacity] : undefined;\n  var stroke;\n\n  if (type !== 'point') {\n    if (useGradient) stroke = gradientMaskColor;else stroke = normalizeColor(colorName, theme);\n  } else stroke = 'none';\n\n  var fill;\n\n  if (type === 'point' || type === 'area') {\n    if (useGradient) fill = gradientMaskColor;else fill = normalizeColor(colorName, theme);\n  } else fill = 'none';\n\n  var drawing = React.createElement(\"g\", {\n    stroke: stroke,\n    strokeWidth: type !== 'point' ? strokeWidth : undefined,\n    fill: fill,\n    strokeLinecap: round ? 'round' : 'butt',\n    strokeLinejoin: round ? 'round' : 'miter',\n    opacity: opacity\n  }, contents);\n  var defs;\n  var gradientRect;\n\n  if (useGradient && size[1]) {\n    var gradientId = id + \"-gradient\";\n    var maskId = id + \"-mask\";\n    defs = React.createElement(\"defs\", null, React.createElement(\"linearGradient\", {\n      id: gradientId,\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 1\n    }, color.sort(function (c1, c2) {\n      return c2.value - c1.value;\n    }).map(function (_ref5) {\n      var value = _ref5.value,\n          gradientColor = _ref5.color;\n      return React.createElement(\"stop\", {\n        key: value,\n        offset: (size[1] - (value - bounds[1][0]) * scale[1]) / size[1],\n        stopColor: normalizeColor(gradientColor, theme)\n      });\n    })), React.createElement(\"mask\", {\n      id: maskId\n    }, drawing));\n    gradientRect = React.createElement(\"rect\", {\n      x: viewBounds[0],\n      y: viewBounds[1],\n      width: viewBounds[2],\n      height: viewBounds[3],\n      fill: \"url(#\" + gradientId + \")\",\n      mask: \"url(#\" + maskId + \")\"\n    });\n  }\n\n  return React.createElement(StyledChart, _extends({\n    ref: containerRef,\n    id: id,\n    viewBox: viewBox,\n    preserveAspectRatio: \"none\",\n    width: size === 'full' ? '100%' : size[0],\n    height: size === 'full' ? '100%' : size[1]\n  }, rest), defs, useGradient ? gradientRect : drawing);\n});\nChart.displayName = 'Chart';\nvar ChartDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  ChartDoc = require('./doc').doc(Chart); // eslint-disable-line global-require\n}\n\nvar ChartWrapper = ChartDoc || Chart;\nexport { ChartWrapper as Chart };","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/node_modules/grommet/es6/components/Chart/Chart.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useContext","useEffect","useRef","useState","ThemeContext","normalizeColor","parseMetricToNum","StyledChart","normalizeBounds","normalizeValues","gradientMaskColor","defaultSize","height","width","defaultValues","Chart","forwardRef","_ref","ref","propsBounds","bounds","color","gap","id","onClick","onHover","_ref$overflow","overflow","round","_ref$size","size","propsSize","_ref$thickness","thickness","_ref$type","type","_ref$values","values","propsValues","rest","theme","_useState","setValues","_useState2","setBounds","_useState3","containerSize","setContainerSize","_useState4","setSize","_useState5","scale","setScale","_useState6","strokeWidth","setStrokeWidth","containerRef","nextValues","nextBounds","nextStrokeWidth","global","edgeSize","gapWidth","autoWidth","sizeWidth","sizeHeight","nextScale","current","containerNode","parentNode","rect","getBoundingClientRect","onResize","window","addEventListener","removeEventListener","undefined","useGradient","Array","isArray","renderBars","map","valueArg","index","label","valueOnHover","value","valueRest","bottom","top","d","hoverProps","onMouseOver","onMouseLeave","clickProps","createElement","fill","renderLine","forEach","_ref2","renderArea","_ref3","reverse","_ref4","renderPoints","center","shape","cx","cy","r","x","y","stroke","contents","viewBounds","viewBox","join","colorName","chart","opacity","drawing","strokeLinecap","strokeLinejoin","defs","gradientRect","gradientId","maskId","x1","y1","x2","y2","sort","c1","c2","_ref5","gradientColor","offset","stopColor","mask","preserveAspectRatio","displayName","ChartDoc","process","env","NODE_ENV","require","doc","ChartWrapper"],"mappings":"AAAA,SAASA,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,SAASQ,6BAAT,CAAuCN,MAAvC,EAA+CO,QAA/C,EAAyD;AAAE,MAAIP,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIJ,MAAM,GAAG,EAAb;AAAiB,MAAIY,UAAU,GAAGd,MAAM,CAACe,IAAP,CAAYT,MAAZ,CAAjB;AAAsC,MAAIC,GAAJ,EAASJ,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGW,UAAU,CAACT,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AAAEI,IAAAA,GAAG,GAAGO,UAAU,CAACX,CAAD,CAAhB;AAAqB,QAAIU,QAAQ,CAACG,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAUL,IAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;;AAAC,SAAOL,MAAP;AAAgB;;AAEnT,OAAOe,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,MAAvC,EAA+CC,QAA/C,QAA+D,OAA/D;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,SAASC,cAAT,EAAyBC,gBAAzB,QAAiD,aAAjD;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,eAAT,EAA0BC,eAA1B,QAAiD,SAAjD;AACA,IAAIC,iBAAiB,GAAG,SAAxB,C,CAAmC;;AAEnC,IAAIC,WAAW,GAAG;AAChBC,EAAAA,MAAM,EAAE,OADQ;AAEhBC,EAAAA,KAAK,EAAE;AAFS,CAAlB;AAIA,IAAIC,aAAa,GAAG,EAApB;AACA,IAAIC,KAAK,GAAGhB,KAAK,CAACiB,UAAN,CAAiB,UAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AAChD,MAAIC,WAAW,GAAGF,IAAI,CAACG,MAAvB;AAAA,MACIC,KAAK,GAAGJ,IAAI,CAACI,KADjB;AAAA,MAEIC,GAAG,GAAGL,IAAI,CAACK,GAFf;AAAA,MAGIC,EAAE,GAAGN,IAAI,CAACM,EAHd;AAAA,MAIIC,OAAO,GAAGP,IAAI,CAACO,OAJnB;AAAA,MAKIC,OAAO,GAAGR,IAAI,CAACQ,OALnB;AAAA,MAMIC,aAAa,GAAGT,IAAI,CAACU,QANzB;AAAA,MAOIA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,KAA3B,GAAmCA,aAPlD;AAAA,MAQIE,KAAK,GAAGX,IAAI,CAACW,KARjB;AAAA,MASIC,SAAS,GAAGZ,IAAI,CAACa,IATrB;AAAA,MAUIC,SAAS,GAAGF,SAAS,KAAK,KAAK,CAAnB,GAAuBlB,WAAvB,GAAqCkB,SAVrD;AAAA,MAWIG,cAAc,GAAGf,IAAI,CAACgB,SAX1B;AAAA,MAYIA,SAAS,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B,QAA5B,GAAuCA,cAZvD;AAAA,MAaIE,SAAS,GAAGjB,IAAI,CAACkB,IAbrB;AAAA,MAcIA,IAAI,GAAGD,SAAS,KAAK,KAAK,CAAnB,GAAuB,KAAvB,GAA+BA,SAd1C;AAAA,MAeIE,WAAW,GAAGnB,IAAI,CAACoB,MAfvB;AAAA,MAgBIC,WAAW,GAAGF,WAAW,KAAK,KAAK,CAArB,GAAyBtB,aAAzB,GAAyCsB,WAhB3D;AAAA,MAiBIG,IAAI,GAAG7C,6BAA6B,CAACuB,IAAD,EAAO,CAAC,QAAD,EAAW,OAAX,EAAoB,KAApB,EAA2B,IAA3B,EAAiC,SAAjC,EAA4C,SAA5C,EAAuD,UAAvD,EAAmE,OAAnE,EAA4E,MAA5E,EAAoF,WAApF,EAAiG,MAAjG,EAAyG,QAAzG,CAAP,CAjBxC;;AAmBA,MAAIuB,KAAK,GAAGxC,UAAU,CAACI,YAAD,CAAtB;;AAEA,MAAIqC,SAAS,GAAGtC,QAAQ,CAAC,EAAD,CAAxB;AAAA,MACIkC,MAAM,GAAGI,SAAS,CAAC,CAAD,CADtB;AAAA,MAEIC,SAAS,GAAGD,SAAS,CAAC,CAAD,CAFzB;;AAIA,MAAIE,UAAU,GAAGxC,QAAQ,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,CAAzB;AAAA,MACIiB,MAAM,GAAGuB,UAAU,CAAC,CAAD,CADvB;AAAA,MAEIC,SAAS,GAAGD,UAAU,CAAC,CAAD,CAF1B;;AAIA,MAAIE,UAAU,GAAG1C,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAzB;AAAA,MACI2C,aAAa,GAAGD,UAAU,CAAC,CAAD,CAD9B;AAAA,MAEIE,gBAAgB,GAAGF,UAAU,CAAC,CAAD,CAFjC;;AAIA,MAAIG,UAAU,GAAG7C,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAzB;AAAA,MACI2B,IAAI,GAAGkB,UAAU,CAAC,CAAD,CADrB;AAAA,MAEIC,OAAO,GAAGD,UAAU,CAAC,CAAD,CAFxB;;AAIA,MAAIE,UAAU,GAAG/C,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAzB;AAAA,MACIgD,KAAK,GAAGD,UAAU,CAAC,CAAD,CADtB;AAAA,MAEIE,QAAQ,GAAGF,UAAU,CAAC,CAAD,CAFzB;;AAIA,MAAIG,UAAU,GAAGlD,QAAQ,CAAC,CAAD,CAAzB;AAAA,MACImD,WAAW,GAAGD,UAAU,CAAC,CAAD,CAD5B;AAAA,MAEIE,cAAc,GAAGF,UAAU,CAAC,CAAD,CAF/B;;AAIA,MAAIG,YAAY,GAAGtC,GAAG,IAAIhB,MAAM,EAAhC,CA9CgD,CA8CZ;;AAEpCD,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIwD,UAAU,GAAGhD,eAAe,CAAC6B,WAAD,CAAhC;AACAI,IAAAA,SAAS,CAACe,UAAD,CAAT;AACA,QAAIC,UAAU,GAAGlD,eAAe,CAACW,WAAD,EAAcsC,UAAd,CAAhC;AACAb,IAAAA,SAAS,CAACc,UAAD,CAAT;AACA,QAAIC,eAAe,GAAGrD,gBAAgB,CAACkC,KAAK,CAACoB,MAAN,CAAaC,QAAb,CAAsB5B,SAAtB,KAAoCA,SAArC,CAAtC;AACAsB,IAAAA,cAAc,CAACI,eAAD,CAAd;AACA,QAAIG,QAAQ,GAAGxC,GAAG,GAAGhB,gBAAgB,CAACkC,KAAK,CAACoB,MAAN,CAAaC,QAAb,CAAsBvC,GAAtB,KAA8BA,GAA/B,CAAnB,GAAyDqC,eAA3E,CAPoB,CAOwE;;AAE5F,QAAII,SAAS,GAAGJ,eAAe,GAAGF,UAAU,CAACtE,MAA7B,GAAsC,CAACsE,UAAU,CAACtE,MAAX,GAAoB,CAArB,IAA0B2E,QAAhF;AACA,QAAIE,SAAS,GAAG,OAAOjC,SAAP,KAAqB,QAArB,GAAgCA,SAAhC,GAA4CA,SAAS,CAAClB,KAAV,IAAmBF,WAAW,CAACE,KAA3F;AACA,QAAIA,KAAJ;;AAEA,QAAImD,SAAS,KAAK,MAAlB,EAA0B;AACxBnD,MAAAA,KAAK,GAAGiC,aAAa,CAAC,CAAD,CAArB;AACD,KAFD,MAEO,IAAIkB,SAAS,KAAK,MAAlB,EAA0B;AAC/BnD,MAAAA,KAAK,GAAGkD,SAAR;AACD,KAFM,MAEA;AACLlD,MAAAA,KAAK,GAAGP,gBAAgB,CAACkC,KAAK,CAACoB,MAAN,CAAa9B,IAAb,CAAkBkC,SAAlB,KAAgCA,SAAjC,CAAxB;AACD;;AAED,QAAIC,UAAU,GAAG,OAAOlC,SAAP,KAAqB,QAArB,GAAgCA,SAAhC,GAA4CA,SAAS,CAACnB,MAAV,IAAoBD,WAAW,CAACC,MAA7F;AACA,QAAIA,MAAJ;;AAEA,QAAIqD,UAAU,KAAK,MAAnB,EAA2B;AACzBrD,MAAAA,MAAM,GAAGkC,aAAa,CAAC,CAAD,CAAtB;AACD,KAFD,MAEO;AACLlC,MAAAA,MAAM,GAAGN,gBAAgB,CAACkC,KAAK,CAACoB,MAAN,CAAa9B,IAAb,CAAkBmC,UAAlB,KAAiCA,UAAlC,CAAzB;AACD;;AAEDhB,IAAAA,OAAO,CAAC,CAACpC,KAAD,EAAQD,MAAR,CAAD,CAAP;AACA,QAAIsD,SAAS,GAAG,CAAC,CAACF,SAAS,KAAK,MAAd,GAAuBD,SAAvB,GAAmClD,KAApC,KAA8C6C,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,IAAmBA,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAjE,CAAD,EAAqF9C,MAAM,IAAI8C,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,IAAmBA,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAvB,CAA3F,CAAhB;AACAN,IAAAA,QAAQ,CAACc,SAAD,CAAR;AACD,GAjCQ,EAiCN,CAACpB,aAAD,EAAgBxB,GAAhB,EAAqBH,WAArB,EAAkCY,SAAlC,EAA6CO,WAA7C,EAA0DE,KAAK,CAACoB,MAAN,CAAaC,QAAvE,EAAiFrB,KAAK,CAACoB,MAAN,CAAa9B,IAA9F,EAAoGG,SAApG,CAjCM,CAAT,CAhDgD,CAiFoE;;AAEpH,MAAIuB,YAAY,CAACW,OAAb,IAAwBpC,SAAxB,KAAsCA,SAAS,KAAK,MAAd,IAAwBA,SAAS,CAACnB,MAAV,KAAqB,MAA7C,IAAuDmB,SAAS,CAAClB,KAAV,KAAoB,MAAjH,CAAJ,EAA8H;AAC5H,QAAIuD,aAAa,GAAGZ,YAAY,CAACW,OAAjC;;AAEA,QAAIC,aAAJ,EAAmB;AACjB,UAAIC,UAAU,GAAGD,aAAa,CAACC,UAA/B;;AAEA,UAAIA,UAAJ,EAAgB;AACd,YAAIC,IAAI,GAAGD,UAAU,CAACE,qBAAX,EAAX;;AAEA,YAAID,IAAI,CAACzD,KAAL,KAAeiC,aAAa,CAAC,CAAD,CAA5B,IAAmCwB,IAAI,CAAC1D,MAAL,KAAgBkC,aAAa,CAAC,CAAD,CAApE,EAAyE;AACvEC,UAAAA,gBAAgB,CAAC,CAACuB,IAAI,CAACzD,KAAN,EAAayD,IAAI,CAAC1D,MAAlB,CAAD,CAAhB;AACD;AACF;AACF;AACF,GAjG+C,CAiG9C;;;AAGFX,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIuE,QAAQ,GAAG,SAASA,QAAT,GAAoB;AACjC,UAAIH,UAAU,GAAGb,YAAY,CAACW,OAAb,CAAqBE,UAAtC;AACA,UAAIC,IAAI,GAAGD,UAAU,CAACE,qBAAX,EAAX;AACAxB,MAAAA,gBAAgB,CAAC,CAACuB,IAAI,CAACzD,KAAN,EAAayD,IAAI,CAAC1D,MAAlB,CAAD,CAAhB;AACD,KAJD;;AAMA,QAAImB,SAAS,KAAKA,SAAS,KAAK,MAAd,IAAwBA,SAAS,CAAClB,KAAV,KAAoB,MAA5C,IAAsDkB,SAAS,CAACnB,MAAV,KAAqB,MAAhF,CAAb,EAAsG;AACpG6D,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCF,QAAlC;AACA,aAAO,YAAY;AACjB,eAAOC,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCH,QAArC,CAAP;AACD,OAFD;AAGD;;AAED,WAAOI,SAAP;AACD,GAfQ,EAeN,CAACpB,YAAD,EAAezB,SAAf,CAfM,CAAT;AAgBA,MAAI8C,WAAW,GAAGxD,KAAK,IAAIyD,KAAK,CAACC,OAAN,CAAc1D,KAAd,CAA3B;;AAEA,MAAI2D,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,WAAO,CAAC3C,MAAM,IAAI,EAAX,EAAe4C,GAAf,CAAmB,UAAUC,QAAV,EAAoBC,KAApB,EAA2B;AACnD,UAAIC,KAAK,GAAGF,QAAQ,CAACE,KAArB;AAAA,UACIC,YAAY,GAAGH,QAAQ,CAACzD,OAD5B;AAAA,UAEI6D,KAAK,GAAGJ,QAAQ,CAACI,KAFrB;AAAA,UAGIC,SAAS,GAAG7F,6BAA6B,CAACwF,QAAD,EAAW,CAAC,OAAD,EAAU,SAAV,EAAqB,OAArB,CAAX,CAH7C;;AAKA,UAAI7F,GAAG,GAAG,OAAO8F,KAAjB;AACA,UAAIK,MAAM,GAAGF,KAAK,CAACnG,MAAN,KAAiB,CAAjB,GAAqBiC,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAArB,GAAoCkE,KAAK,CAAC,CAAD,CAAtD;AACA,UAAIG,GAAG,GAAGH,KAAK,CAACnG,MAAN,KAAiB,CAAjB,GAAqBmG,KAAK,CAAC,CAAD,CAA1B,GAAgCA,KAAK,CAAC,CAAD,CAA/C;;AAEA,UAAIG,GAAG,KAAK,CAAZ,EAAe;AACb,YAAIC,CAAC,GAAG,OAAO,CAACJ,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAAxC,GAA8C,GAA9C,IAAqD,MAAMrB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC0D,MAAM,GAAGpE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAV,IAA0B+B,KAAK,CAAC,CAAD,CAA/C,CAArD,KAA6G,QAAQ,CAACmC,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAAzC,GAA+C,GAA5J,KAAoK,MAAMrB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC2D,GAAG,GAAGrE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAP,IAAuB+B,KAAK,CAAC,CAAD,CAA5C,CAApK,CAAR;AACA,YAAIwC,UAAJ;;AAEA,YAAIN,YAAJ,EAAkB;AAChBM,UAAAA,UAAU,GAAG;AACXC,YAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,qBAAOP,YAAY,CAAC,IAAD,CAAnB;AACD,aAHU;AAIXQ,YAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,qBAAOR,YAAY,CAAC,KAAD,CAAnB;AACD;AANU,WAAb;AAQD;;AAED,YAAIS,UAAJ;;AAEA,YAAItE,OAAJ,EAAa;AACXsE,UAAAA,UAAU,GAAG;AACXtE,YAAAA,OAAO,EAAEA;AADE,WAAb;AAGD;;AAED,eAAOzB,KAAK,CAACgG,aAAN,CAAoB,GAApB,EAAyB;AAC9B1G,UAAAA,GAAG,EAAEA,GADyB;AAE9B2G,UAAAA,IAAI,EAAE;AAFwB,SAAzB,EAGJjG,KAAK,CAACgG,aAAN,CAAoB,OAApB,EAA6B,IAA7B,EAAmCX,KAAnC,CAHI,EAGuCrF,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4BlH,QAAQ,CAAC;AACjF6G,UAAAA,CAAC,EAAEA;AAD8E,SAAD,EAE/EC,UAF+E,EAEnEG,UAFmE,EAEvDP,SAFuD,CAApC,CAHvC,CAAP;AAMD;;AAED,aAAOX,SAAP;AACD,KA1CM,CAAP;AA2CD,GA5CD;;AA8CA,MAAIqB,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,QAAIP,CAAC,GAAG,EAAR;AACA,KAACrD,MAAM,IAAI,EAAX,EAAe6D,OAAf,CAAuB,UAAUC,KAAV,EAAiBhB,KAAjB,EAAwB;AAC7C,UAAIG,KAAK,GAAGa,KAAK,CAACb,KAAlB;AACAI,MAAAA,CAAC,IAAI,CAACP,KAAK,GAAG,IAAH,GAAU,GAAhB,IAAuB,GAAvB,GAA6B,CAACG,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAA9D,GAAoE,GAApE,IAA2E,MAAMrB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACwD,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAAjD,CAA3E,CAAL;AACD,KAHD;AAIA,QAAIwC,UAAJ;;AAEA,QAAIlE,OAAJ,EAAa;AACXkE,MAAAA,UAAU,GAAG;AACXC,QAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,iBAAOnE,OAAO,CAAC,IAAD,CAAd;AACD,SAHU;AAIXoE,QAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,iBAAOpE,OAAO,CAAC,KAAD,CAAd;AACD;AANU,OAAb;AAQD;;AAED,QAAIqE,UAAJ;;AAEA,QAAItE,OAAJ,EAAa;AACXsE,MAAAA,UAAU,GAAG;AACXtE,QAAAA,OAAO,EAAEA;AADE,OAAb;AAGD;;AAED,WAAOzB,KAAK,CAACgG,aAAN,CAAoB,GAApB,EAAyB;AAC9BC,MAAAA,IAAI,EAAE;AADwB,KAAzB,EAEJjG,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4BlH,QAAQ,CAAC;AACtC6G,MAAAA,CAAC,EAAEA;AADmC,KAAD,EAEpCC,UAFoC,EAExBG,UAFwB,CAApC,CAFI,CAAP;AAKD,GAhCD;;AAkCA,MAAIM,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,QAAIV,CAAC,GAAG,EAAR;AACA,KAACrD,MAAM,IAAI,EAAX,EAAe6D,OAAf,CAAuB,UAAUG,KAAV,EAAiBlB,KAAjB,EAAwB;AAC7C,UAAIG,KAAK,GAAGe,KAAK,CAACf,KAAlB;AACA,UAAIG,GAAG,GAAGH,KAAK,CAACnG,MAAN,KAAiB,CAAjB,GAAqBmG,KAAK,CAAC,CAAD,CAA1B,GAAgCA,KAAK,CAAC,CAAD,CAA/C;AACAI,MAAAA,CAAC,IAAI,CAAC,CAACP,KAAD,GAAS,GAAT,GAAe,IAAhB,IAAwB,GAAxB,GAA8B,CAACG,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAA/D,GAAqE,GAArE,IAA4E,MAAMrB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC2D,GAAG,GAAGrE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAP,IAAuB+B,KAAK,CAAC,CAAD,CAA5C,CAA5E,CAAL;AACD,KAJD;AAKA,KAACd,MAAM,IAAI,EAAX,EAAeiE,OAAf,GAAyBJ,OAAzB,CAAiC,UAAUK,KAAV,EAAiB;AAChD,UAAIjB,KAAK,GAAGiB,KAAK,CAACjB,KAAlB;AACA,UAAIE,MAAM,GAAGF,KAAK,CAACnG,MAAN,KAAiB,CAAjB,GAAqBiC,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAArB,GAAoCkE,KAAK,CAAC,CAAD,CAAtD;AACAI,MAAAA,CAAC,IAAI,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAAzC,GAA+C,GAA/C,IAAsD,MAAMrB,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC0D,MAAM,GAAGpE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAV,IAA0B+B,KAAK,CAAC,CAAD,CAA/C,CAAtD,CAAL;AACD,KAJD;;AAMA,QAAIuC,CAAC,CAACvG,MAAF,GAAW,CAAf,EAAkB;AAChBuG,MAAAA,CAAC,IAAI,IAAL;AACD;;AAED,QAAIC,UAAJ;;AAEA,QAAIlE,OAAJ,EAAa;AACXkE,MAAAA,UAAU,GAAG;AACXC,QAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,iBAAOnE,OAAO,CAAC,IAAD,CAAd;AACD,SAHU;AAIXoE,QAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,iBAAOpE,OAAO,CAAC,KAAD,CAAd;AACD;AANU,OAAb;AAQD;;AAED,QAAIqE,UAAJ;;AAEA,QAAItE,OAAJ,EAAa;AACXsE,MAAAA,UAAU,GAAG;AACXtE,QAAAA,OAAO,EAAEA;AADE,OAAb;AAGD;;AAED,WAAOzB,KAAK,CAACgG,aAAN,CAAoB,GAApB,EAAyB,IAAzB,EAA+BhG,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4BlH,QAAQ,CAAC;AACzE6G,MAAAA,CAAC,EAAEA;AADsE,KAAD,EAEvEC,UAFuE,EAE3DG,UAF2D,CAApC,CAA/B,CAAP;AAGD,GAzCD;;AA2CA,MAAIU,YAAY,GAAG,SAASA,YAAT,GAAwB;AACzC,WAAO,CAACnE,MAAM,IAAI,EAAX,EAAe4C,GAAf,CAAmB,UAAUC,QAAV,EAAoBC,KAApB,EAA2B;AACnD,UAAIC,KAAK,GAAGF,QAAQ,CAACE,KAArB;AAAA,UACIC,YAAY,GAAGH,QAAQ,CAACzD,OAD5B;AAAA,UAEI6D,KAAK,GAAGJ,QAAQ,CAACI,KAFrB;AAAA,UAGIC,SAAS,GAAG7F,6BAA6B,CAACwF,QAAD,EAAW,CAAC,OAAD,EAAU,SAAV,EAAqB,OAArB,CAAX,CAH7C;;AAKA,UAAI7F,GAAG,GAAG,OAAO8F,KAAjB;AACA,UAAIQ,UAAJ;;AAEA,UAAIN,YAAJ,EAAkB;AAChBM,QAAAA,UAAU,GAAG;AACXC,UAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,mBAAOP,YAAY,CAAC,IAAD,CAAnB;AACD,WAHU;AAIXQ,UAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,mBAAOR,YAAY,CAAC,KAAD,CAAnB;AACD;AANU,SAAb;AAQD;;AAED,UAAIS,UAAJ;;AAEA,UAAItE,OAAJ,EAAa;AACXsE,QAAAA,UAAU,GAAG;AACXtE,UAAAA,OAAO,EAAEA;AADE,SAAb;AAGD;;AAED,UAAIiF,MAAM,GAAGnB,KAAK,CAACnG,MAAN,KAAiB,CAAjB,GAAqBmG,KAAK,CAAC,CAAD,CAA1B,GAAgCA,KAAK,CAAC,CAAD,CAAlD;AACA,UAAIoB,KAAJ;;AAEA,UAAI9E,KAAJ,EAAW;AACT,YAAI+E,EAAE,GAAG,CAACrB,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAA1C;AACA,YAAIyD,EAAE,GAAG9E,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC2E,MAAM,GAAGrF,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAV,IAA0B+B,KAAK,CAAC,CAAD,CAAlD;AACAuD,QAAAA,KAAK,GAAG3G,KAAK,CAACgG,aAAN,CAAoB,QAApB,EAA8BlH,QAAQ,CAAC;AAC7C8H,UAAAA,EAAE,EAAEA,EADyC;AAE7CC,UAAAA,EAAE,EAAEA,EAFyC;AAG7CC,UAAAA,CAAC,EAAEvD,WAAW,GAAG;AAH4B,SAAD,EAI3CqC,UAJ2C,EAI/BG,UAJ+B,EAInBP,SAJmB,CAAtC,CAAR;AAKD,OARD,MAQO;AACL,YAAIuB,CAAC,GAAG,CAACxB,KAAK,CAAC,CAAD,CAAL,GAAWlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ,IAA4B+B,KAAK,CAAC,CAAD,CAAjC,GAAuCG,WAAW,GAAG,CAA7D;AACA,YAAIyD,CAAC,GAAGjF,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC2E,MAAM,GAAGrF,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAV,IAA0B+B,KAAK,CAAC,CAAD,CAAzC,GAA+CG,WAAW,GAAG,CAArE;AACAoD,QAAAA,KAAK,GAAG3G,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4BlH,QAAQ,CAAC;AAC3CiI,UAAAA,CAAC,EAAEA,CADwC;AAE3CC,UAAAA,CAAC,EAAEA,CAFwC;AAG3ClG,UAAAA,KAAK,EAAEyC,WAHoC;AAI3C1C,UAAAA,MAAM,EAAE0C;AAJmC,SAAD,EAKzCqC,UALyC,EAK7BG,UAL6B,EAKjBP,SALiB,CAApC,CAAR;AAMD;;AAED,aAAOxF,KAAK,CAACgG,aAAN,CAAoB,GAApB,EAAyB;AAC9B1G,QAAAA,GAAG,EAAEA,GADyB;AAE9B2H,QAAAA,MAAM,EAAE;AAFsB,OAAzB,EAGJjH,KAAK,CAACgG,aAAN,CAAoB,OAApB,EAA6B,IAA7B,EAAmCX,KAAnC,CAHI,EAGuCsB,KAHvC,CAAP;AAID,KAtDM,CAAP;AAuDD,GAxDD;;AA0DA,MAAIO,QAAJ;;AAEA,MAAI9E,IAAI,KAAK,KAAb,EAAoB;AAClB8E,IAAAA,QAAQ,GAAGjC,UAAU,EAArB;AACD,GAFD,MAEO,IAAI7C,IAAI,KAAK,MAAb,EAAqB;AAC1B8E,IAAAA,QAAQ,GAAGhB,UAAU,EAArB;AACD,GAFM,MAEA,IAAI9D,IAAI,KAAK,MAAb,EAAqB;AAC1B8E,IAAAA,QAAQ,GAAGb,UAAU,EAArB;AACD,GAFM,MAEA,IAAIjE,IAAI,KAAK,OAAb,EAAsB;AAC3B8E,IAAAA,QAAQ,GAAGT,YAAY,EAAvB;AACD;;AAED,MAAIU,UAAU,GAAGvF,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAOG,IAAI,CAAC,CAAD,CAAX,EAAgBA,IAAI,CAAC,CAAD,CAApB,CAAH,GAA8B,CAAC,EAAEwB,WAAW,GAAG,CAAhB,CAAD,EAAqB,EAAEA,WAAW,GAAG,CAAhB,CAArB,EAAyCxB,IAAI,CAAC,CAAD,CAAJ,GAAUwB,WAAnD,EAAgExB,IAAI,CAAC,CAAD,CAAJ,GAAUwB,WAA1E,CAAvD;AACA,MAAI6D,OAAO,GAAGD,UAAU,CAACE,IAAX,CAAgB,GAAhB,CAAd;AACA,MAAIC,SAAJ;;AAEA,MAAI,CAACxC,WAAL,EAAkB;AAChB,QAAIxD,KAAK,IAAIA,KAAK,CAACA,KAAnB,EAA0BgG,SAAS,GAAGhG,KAAK,CAACA,KAAlB,CAA1B,KAAuD,IAAIA,KAAJ,EAAWgG,SAAS,GAAGhG,KAAZ,CAAX,KAAkC,IAAImB,KAAK,CAAC8E,KAAN,IAAe9E,KAAK,CAAC8E,KAAN,CAAYjG,KAA/B,EAAsCgG,SAAS,GAAG7E,KAAK,CAAC8E,KAAN,CAAYjG,KAAxB;AAChI;;AAED,MAAIkG,OAAO,GAAGlG,KAAK,IAAIA,KAAK,CAACkG,OAAf,GAAyB/E,KAAK,CAACoB,MAAN,CAAa2D,OAAb,CAAqBlG,KAAK,CAACkG,OAA3B,CAAzB,GAA+D3C,SAA7E;AACA,MAAIoC,MAAJ;;AAEA,MAAI7E,IAAI,KAAK,OAAb,EAAsB;AACpB,QAAI0C,WAAJ,EAAiBmC,MAAM,GAAGtG,iBAAT,CAAjB,KAAiDsG,MAAM,GAAG3G,cAAc,CAACgH,SAAD,EAAY7E,KAAZ,CAAvB;AAClD,GAFD,MAEOwE,MAAM,GAAG,MAAT;;AAEP,MAAIhB,IAAJ;;AAEA,MAAI7D,IAAI,KAAK,OAAT,IAAoBA,IAAI,KAAK,MAAjC,EAAyC;AACvC,QAAI0C,WAAJ,EAAiBmB,IAAI,GAAGtF,iBAAP,CAAjB,KAA+CsF,IAAI,GAAG3F,cAAc,CAACgH,SAAD,EAAY7E,KAAZ,CAArB;AAChD,GAFD,MAEOwD,IAAI,GAAG,MAAP;;AAEP,MAAIwB,OAAO,GAAGzH,KAAK,CAACgG,aAAN,CAAoB,GAApB,EAAyB;AACrCiB,IAAAA,MAAM,EAAEA,MAD6B;AAErC1D,IAAAA,WAAW,EAAEnB,IAAI,KAAK,OAAT,GAAmBmB,WAAnB,GAAiCsB,SAFT;AAGrCoB,IAAAA,IAAI,EAAEA,IAH+B;AAIrCyB,IAAAA,aAAa,EAAE7F,KAAK,GAAG,OAAH,GAAa,MAJI;AAKrC8F,IAAAA,cAAc,EAAE9F,KAAK,GAAG,OAAH,GAAa,OALG;AAMrC2F,IAAAA,OAAO,EAAEA;AAN4B,GAAzB,EAOXN,QAPW,CAAd;AAQA,MAAIU,IAAJ;AACA,MAAIC,YAAJ;;AAEA,MAAI/C,WAAW,IAAI/C,IAAI,CAAC,CAAD,CAAvB,EAA4B;AAC1B,QAAI+F,UAAU,GAAGtG,EAAE,GAAG,WAAtB;AACA,QAAIuG,MAAM,GAAGvG,EAAE,GAAG,OAAlB;AACAoG,IAAAA,IAAI,GAAG5H,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EAAkChG,KAAK,CAACgG,aAAN,CAAoB,gBAApB,EAAsC;AAC7ExE,MAAAA,EAAE,EAAEsG,UADyE;AAE7EE,MAAAA,EAAE,EAAE,CAFyE;AAG7EC,MAAAA,EAAE,EAAE,CAHyE;AAI7EC,MAAAA,EAAE,EAAE,CAJyE;AAK7EC,MAAAA,EAAE,EAAE;AALyE,KAAtC,EAMtC7G,KAAK,CAAC8G,IAAN,CAAW,UAAUC,EAAV,EAAcC,EAAd,EAAkB;AAC9B,aAAOA,EAAE,CAAC/C,KAAH,GAAW8C,EAAE,CAAC9C,KAArB;AACD,KAFE,EAEAL,GAFA,CAEI,UAAUqD,KAAV,EAAiB;AACtB,UAAIhD,KAAK,GAAGgD,KAAK,CAAChD,KAAlB;AAAA,UACIiD,aAAa,GAAGD,KAAK,CAACjH,KAD1B;AAEA,aAAOtB,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4B;AACjC1G,QAAAA,GAAG,EAAEiG,KAD4B;AAEjCkD,QAAAA,MAAM,EAAE,CAAC1G,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACwD,KAAK,GAAGlE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAT,IAAyB+B,KAAK,CAAC,CAAD,CAAzC,IAAgDrB,IAAI,CAAC,CAAD,CAF3B;AAGjC2G,QAAAA,SAAS,EAAEpI,cAAc,CAACkI,aAAD,EAAgB/F,KAAhB;AAHQ,OAA5B,CAAP;AAKD,KAVE,CANsC,CAAlC,EAgBFzC,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4B;AAC/BxE,MAAAA,EAAE,EAAEuG;AAD2B,KAA5B,EAEFN,OAFE,CAhBE,CAAP;AAmBAI,IAAAA,YAAY,GAAG7H,KAAK,CAACgG,aAAN,CAAoB,MAApB,EAA4B;AACzCe,MAAAA,CAAC,EAAEI,UAAU,CAAC,CAAD,CAD4B;AAEzCH,MAAAA,CAAC,EAAEG,UAAU,CAAC,CAAD,CAF4B;AAGzCrG,MAAAA,KAAK,EAAEqG,UAAU,CAAC,CAAD,CAHwB;AAIzCtG,MAAAA,MAAM,EAAEsG,UAAU,CAAC,CAAD,CAJuB;AAKzClB,MAAAA,IAAI,EAAE,UAAU6B,UAAV,GAAuB,GALY;AAMzCa,MAAAA,IAAI,EAAE,UAAUZ,MAAV,GAAmB;AANgB,KAA5B,CAAf;AAQD;;AAED,SAAO/H,KAAK,CAACgG,aAAN,CAAoBxF,WAApB,EAAiC1B,QAAQ,CAAC;AAC/CqC,IAAAA,GAAG,EAAEsC,YAD0C;AAE/CjC,IAAAA,EAAE,EAAEA,EAF2C;AAG/C4F,IAAAA,OAAO,EAAEA,OAHsC;AAI/CwB,IAAAA,mBAAmB,EAAE,MAJ0B;AAK/C9H,IAAAA,KAAK,EAAEiB,IAAI,KAAK,MAAT,GAAkB,MAAlB,GAA2BA,IAAI,CAAC,CAAD,CALS;AAM/ClB,IAAAA,MAAM,EAAEkB,IAAI,KAAK,MAAT,GAAkB,MAAlB,GAA2BA,IAAI,CAAC,CAAD;AANQ,GAAD,EAO7CS,IAP6C,CAAzC,EAOGoF,IAPH,EAOS9C,WAAW,GAAG+C,YAAH,GAAkBJ,OAPtC,CAAP;AAQD,CA/XW,CAAZ;AAgYAzG,KAAK,CAAC6H,WAAN,GAAoB,OAApB;AACA,IAAIC,QAAJ;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCH,EAAAA,QAAQ,GAAGI,OAAO,CAAC,OAAD,CAAP,CAAiBC,GAAjB,CAAqBnI,KAArB,CAAX,CADyC,CACD;AACzC;;AAED,IAAIoI,YAAY,GAAGN,QAAQ,IAAI9H,KAA/B;AACA,SAASoI,YAAY,IAAIpI,KAAzB","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { normalizeColor, parseMetricToNum } from '../../utils';\nimport { StyledChart } from './StyledChart';\nimport { normalizeBounds, normalizeValues } from './utils';\nvar gradientMaskColor = '#ffffff'; // use constants so re-renders don't re-trigger effects\n\nvar defaultSize = {\n  height: 'small',\n  width: 'medium'\n};\nvar defaultValues = [];\nvar Chart = React.forwardRef(function (_ref, ref) {\n  var propsBounds = _ref.bounds,\n      color = _ref.color,\n      gap = _ref.gap,\n      id = _ref.id,\n      onClick = _ref.onClick,\n      onHover = _ref.onHover,\n      _ref$overflow = _ref.overflow,\n      overflow = _ref$overflow === void 0 ? false : _ref$overflow,\n      round = _ref.round,\n      _ref$size = _ref.size,\n      propsSize = _ref$size === void 0 ? defaultSize : _ref$size,\n      _ref$thickness = _ref.thickness,\n      thickness = _ref$thickness === void 0 ? 'medium' : _ref$thickness,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'bar' : _ref$type,\n      _ref$values = _ref.values,\n      propsValues = _ref$values === void 0 ? defaultValues : _ref$values,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"bounds\", \"color\", \"gap\", \"id\", \"onClick\", \"onHover\", \"overflow\", \"round\", \"size\", \"thickness\", \"type\", \"values\"]);\n\n  var theme = useContext(ThemeContext);\n\n  var _useState = useState([]),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var _useState2 = useState([[0, 0], [0, 0]]),\n      bounds = _useState2[0],\n      setBounds = _useState2[1];\n\n  var _useState3 = useState([0, 0]),\n      containerSize = _useState3[0],\n      setContainerSize = _useState3[1];\n\n  var _useState4 = useState([0, 0]),\n      size = _useState4[0],\n      setSize = _useState4[1];\n\n  var _useState5 = useState([1, 1]),\n      scale = _useState5[0],\n      setScale = _useState5[1];\n\n  var _useState6 = useState(0),\n      strokeWidth = _useState6[0],\n      setStrokeWidth = _useState6[1];\n\n  var containerRef = ref || useRef(); // calculations\n\n  useEffect(function () {\n    var nextValues = normalizeValues(propsValues);\n    setValues(nextValues);\n    var nextBounds = normalizeBounds(propsBounds, nextValues);\n    setBounds(nextBounds);\n    var nextStrokeWidth = parseMetricToNum(theme.global.edgeSize[thickness] || thickness);\n    setStrokeWidth(nextStrokeWidth);\n    var gapWidth = gap ? parseMetricToNum(theme.global.edgeSize[gap] || gap) : nextStrokeWidth; // autoWidth is how wide we'd pefer\n\n    var autoWidth = nextStrokeWidth * nextValues.length + (nextValues.length - 1) * gapWidth;\n    var sizeWidth = typeof propsSize === 'string' ? propsSize : propsSize.width || defaultSize.width;\n    var width;\n\n    if (sizeWidth === 'full') {\n      width = containerSize[0];\n    } else if (sizeWidth === 'auto') {\n      width = autoWidth;\n    } else {\n      width = parseMetricToNum(theme.global.size[sizeWidth] || sizeWidth);\n    }\n\n    var sizeHeight = typeof propsSize === 'string' ? propsSize : propsSize.height || defaultSize.height;\n    var height;\n\n    if (sizeHeight === 'full') {\n      height = containerSize[1];\n    } else {\n      height = parseMetricToNum(theme.global.size[sizeHeight] || sizeHeight);\n    }\n\n    setSize([width, height]);\n    var nextScale = [(sizeWidth === 'auto' ? autoWidth : width) / (nextBounds[0][1] - nextBounds[0][0]), height / (nextBounds[1][1] - nextBounds[1][0])];\n    setScale(nextScale);\n  }, [containerSize, gap, propsBounds, propsSize, propsValues, theme.global.edgeSize, theme.global.size, thickness]); // set container size when we get ref or when size changes\n\n  if (containerRef.current && propsSize && (propsSize === 'full' || propsSize.height === 'full' || propsSize.width === 'full')) {\n    var containerNode = containerRef.current;\n\n    if (containerNode) {\n      var parentNode = containerNode.parentNode;\n\n      if (parentNode) {\n        var rect = parentNode.getBoundingClientRect();\n\n        if (rect.width !== containerSize[0] || rect.height !== containerSize[1]) {\n          setContainerSize([rect.width, rect.height]);\n        }\n      }\n    }\n  } // container size, if needed\n\n\n  useEffect(function () {\n    var onResize = function onResize() {\n      var parentNode = containerRef.current.parentNode;\n      var rect = parentNode.getBoundingClientRect();\n      setContainerSize([rect.width, rect.height]);\n    };\n\n    if (propsSize && (propsSize === 'full' || propsSize.width === 'full' || propsSize.height === 'full')) {\n      window.addEventListener('resize', onResize);\n      return function () {\n        return window.removeEventListener('resize', onResize);\n      };\n    }\n\n    return undefined;\n  }, [containerRef, propsSize]);\n  var useGradient = color && Array.isArray(color);\n\n  var renderBars = function renderBars() {\n    return (values || []).map(function (valueArg, index) {\n      var label = valueArg.label,\n          valueOnHover = valueArg.onHover,\n          value = valueArg.value,\n          valueRest = _objectWithoutPropertiesLoose(valueArg, [\"label\", \"onHover\", \"value\"]);\n\n      var key = \"p-\" + index;\n      var bottom = value.length === 2 ? bounds[1][0] : value[1];\n      var top = value.length === 2 ? value[1] : value[2];\n\n      if (top !== 0) {\n        var d = \"M \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (bottom - bounds[1][0]) * scale[1])) + (\" L \" + (value[0] - bounds[0][0]) * scale[0] + \",\") + (\"\" + (size[1] - (top - bounds[1][0]) * scale[1]));\n        var hoverProps;\n\n        if (valueOnHover) {\n          hoverProps = {\n            onMouseOver: function onMouseOver() {\n              return valueOnHover(true);\n            },\n            onMouseLeave: function onMouseLeave() {\n              return valueOnHover(false);\n            }\n          };\n        }\n\n        var clickProps;\n\n        if (onClick) {\n          clickProps = {\n            onClick: onClick\n          };\n        }\n\n        return React.createElement(\"g\", {\n          key: key,\n          fill: \"none\"\n        }, React.createElement(\"title\", null, label), React.createElement(\"path\", _extends({\n          d: d\n        }, hoverProps, clickProps, valueRest)));\n      }\n\n      return undefined;\n    });\n  };\n\n  var renderLine = function renderLine() {\n    var d = '';\n    (values || []).forEach(function (_ref2, index) {\n      var value = _ref2.value;\n      d += (index ? ' L' : 'M') + \" \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (value[1] - bounds[1][0]) * scale[1]));\n    });\n    var hoverProps;\n\n    if (onHover) {\n      hoverProps = {\n        onMouseOver: function onMouseOver() {\n          return onHover(true);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return onHover(false);\n        }\n      };\n    }\n\n    var clickProps;\n\n    if (onClick) {\n      clickProps = {\n        onClick: onClick\n      };\n    }\n\n    return React.createElement(\"g\", {\n      fill: \"none\"\n    }, React.createElement(\"path\", _extends({\n      d: d\n    }, hoverProps, clickProps)));\n  };\n\n  var renderArea = function renderArea() {\n    var d = '';\n    (values || []).forEach(function (_ref3, index) {\n      var value = _ref3.value;\n      var top = value.length === 2 ? value[1] : value[2];\n      d += (!index ? 'M' : ' L') + \" \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (top - bounds[1][0]) * scale[1]));\n    });\n    (values || []).reverse().forEach(function (_ref4) {\n      var value = _ref4.value;\n      var bottom = value.length === 2 ? bounds[1][0] : value[1];\n      d += \" L \" + (value[0] - bounds[0][0]) * scale[0] + \",\" + (\"\" + (size[1] - (bottom - bounds[1][0]) * scale[1]));\n    });\n\n    if (d.length > 0) {\n      d += ' Z';\n    }\n\n    var hoverProps;\n\n    if (onHover) {\n      hoverProps = {\n        onMouseOver: function onMouseOver() {\n          return onHover(true);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return onHover(false);\n        }\n      };\n    }\n\n    var clickProps;\n\n    if (onClick) {\n      clickProps = {\n        onClick: onClick\n      };\n    }\n\n    return React.createElement(\"g\", null, React.createElement(\"path\", _extends({\n      d: d\n    }, hoverProps, clickProps)));\n  };\n\n  var renderPoints = function renderPoints() {\n    return (values || []).map(function (valueArg, index) {\n      var label = valueArg.label,\n          valueOnHover = valueArg.onHover,\n          value = valueArg.value,\n          valueRest = _objectWithoutPropertiesLoose(valueArg, [\"label\", \"onHover\", \"value\"]);\n\n      var key = \"p-\" + index;\n      var hoverProps;\n\n      if (valueOnHover) {\n        hoverProps = {\n          onMouseOver: function onMouseOver() {\n            return valueOnHover(true);\n          },\n          onMouseLeave: function onMouseLeave() {\n            return valueOnHover(false);\n          }\n        };\n      }\n\n      var clickProps;\n\n      if (onClick) {\n        clickProps = {\n          onClick: onClick\n        };\n      }\n\n      var center = value.length === 2 ? value[1] : value[2];\n      var shape;\n\n      if (round) {\n        var cx = (value[0] - bounds[0][0]) * scale[0];\n        var cy = size[1] - (center - bounds[1][0]) * scale[1];\n        shape = React.createElement(\"circle\", _extends({\n          cx: cx,\n          cy: cy,\n          r: strokeWidth / 2\n        }, hoverProps, clickProps, valueRest));\n      } else {\n        var x = (value[0] - bounds[0][0]) * scale[0] - strokeWidth / 2;\n        var y = size[1] - (center - bounds[1][0]) * scale[1] - strokeWidth / 2;\n        shape = React.createElement(\"rect\", _extends({\n          x: x,\n          y: y,\n          width: strokeWidth,\n          height: strokeWidth\n        }, hoverProps, clickProps, valueRest));\n      }\n\n      return React.createElement(\"g\", {\n        key: key,\n        stroke: \"none\"\n      }, React.createElement(\"title\", null, label), shape);\n    });\n  };\n\n  var contents;\n\n  if (type === 'bar') {\n    contents = renderBars();\n  } else if (type === 'line') {\n    contents = renderLine();\n  } else if (type === 'area') {\n    contents = renderArea();\n  } else if (type === 'point') {\n    contents = renderPoints();\n  }\n\n  var viewBounds = overflow ? [0, 0, size[0], size[1]] : [-(strokeWidth / 2), -(strokeWidth / 2), size[0] + strokeWidth, size[1] + strokeWidth];\n  var viewBox = viewBounds.join(' ');\n  var colorName;\n\n  if (!useGradient) {\n    if (color && color.color) colorName = color.color;else if (color) colorName = color;else if (theme.chart && theme.chart.color) colorName = theme.chart.color;\n  }\n\n  var opacity = color && color.opacity ? theme.global.opacity[color.opacity] : undefined;\n  var stroke;\n\n  if (type !== 'point') {\n    if (useGradient) stroke = gradientMaskColor;else stroke = normalizeColor(colorName, theme);\n  } else stroke = 'none';\n\n  var fill;\n\n  if (type === 'point' || type === 'area') {\n    if (useGradient) fill = gradientMaskColor;else fill = normalizeColor(colorName, theme);\n  } else fill = 'none';\n\n  var drawing = React.createElement(\"g\", {\n    stroke: stroke,\n    strokeWidth: type !== 'point' ? strokeWidth : undefined,\n    fill: fill,\n    strokeLinecap: round ? 'round' : 'butt',\n    strokeLinejoin: round ? 'round' : 'miter',\n    opacity: opacity\n  }, contents);\n  var defs;\n  var gradientRect;\n\n  if (useGradient && size[1]) {\n    var gradientId = id + \"-gradient\";\n    var maskId = id + \"-mask\";\n    defs = React.createElement(\"defs\", null, React.createElement(\"linearGradient\", {\n      id: gradientId,\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 1\n    }, color.sort(function (c1, c2) {\n      return c2.value - c1.value;\n    }).map(function (_ref5) {\n      var value = _ref5.value,\n          gradientColor = _ref5.color;\n      return React.createElement(\"stop\", {\n        key: value,\n        offset: (size[1] - (value - bounds[1][0]) * scale[1]) / size[1],\n        stopColor: normalizeColor(gradientColor, theme)\n      });\n    })), React.createElement(\"mask\", {\n      id: maskId\n    }, drawing));\n    gradientRect = React.createElement(\"rect\", {\n      x: viewBounds[0],\n      y: viewBounds[1],\n      width: viewBounds[2],\n      height: viewBounds[3],\n      fill: \"url(#\" + gradientId + \")\",\n      mask: \"url(#\" + maskId + \")\"\n    });\n  }\n\n  return React.createElement(StyledChart, _extends({\n    ref: containerRef,\n    id: id,\n    viewBox: viewBox,\n    preserveAspectRatio: \"none\",\n    width: size === 'full' ? '100%' : size[0],\n    height: size === 'full' ? '100%' : size[1]\n  }, rest), defs, useGradient ? gradientRect : drawing);\n});\nChart.displayName = 'Chart';\nvar ChartDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  ChartDoc = require('./doc').doc(Chart); // eslint-disable-line global-require\n}\n\nvar ChartWrapper = ChartDoc || Chart;\nexport { ChartWrapper as Chart };"]},"metadata":{},"sourceType":"module"}