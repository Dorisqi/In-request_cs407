{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport { compose } from 'recompose';\nimport { withTheme } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { withForwardRef } from '../hocs';\nimport { throttle } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo'; // Split the volume control into 6 segments. Empirically determined.\n\nvar VOLUME_STEP = 0.166667;\n\nvar formatTime = function formatTime(time) {\n  var minutes = Math.round(time / 60);\n\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n\n  var seconds = Math.round(time) % 60;\n\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n\n  return minutes + \":\" + seconds;\n};\n\nvar videoEvents = ['onAbort', 'onCanPlay', 'onCanPlayThrough', 'onDurationChange', 'onEmptied', 'onEncrypted', 'onEnded', 'onError', 'onLoadedData', 'onLoadedMetadata', 'onLoadStart', 'onPause', 'onPlay', 'onPlaying', 'onProgress', 'onRateChange', 'onSeeked', 'onSeeking', 'onStalled', 'onSuspend', 'onTimeUpdate', 'onVolumeChange', 'onWaiting'];\n\nvar Video =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Video, _Component);\n\n  Video.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var forwardRef = nextProps.forwardRef;\n    var videoRef = prevState.videoRef;\n    var nextVideoRef = forwardRef || videoRef;\n\n    if (nextVideoRef !== videoRef) {\n      return {\n        videoRef: nextVideoRef\n      };\n    }\n\n    return null;\n  };\n\n  function Video(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      captions: [],\n      scrubberRef: React.createRef(),\n      videoRef: React.createRef()\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasPlayed\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"injectUpdateVideoEvents\", function () {\n      return videoEvents.reduce(function (previousValue, currentValue) {\n        var nextValue = _extends({}, previousValue);\n\n        nextValue[currentValue] = function (e) {\n          if (currentValue in _this.props &&\n          /* eslint-disable react/destructuring-assignment */\n          typeof _this.props[currentValue] === 'function') {\n            _this.props[currentValue](e);\n            /* eslint-enable react/destructuring-assignment */\n\n          }\n\n          _this.update();\n        };\n\n        return nextValue;\n      }, {});\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function () {\n      var videoRef = _this.state.videoRef;\n      var video = videoRef.current; // Set flag for Video first play\n\n      if (!_this.hasPlayed && !video.paused && !video.loading || video.currentTime) {\n        _this.hasPlayed = true;\n      }\n\n      var interacting = _this.state.interacting;\n\n      if (video.ended) {\n        interacting = false;\n      }\n\n      _this.setState({\n        duration: video.duration,\n        currentTime: video.currentTime,\n        // buffered: video.buffered,\n        // paused: video.paused,\n        // muted: video.muted,\n        volume: video.volume,\n        // ended: video.ended,\n        // readyState: video.readyState,\n        interacting: interacting,\n        // computed values\n        // hasPlayed: this.hasPlayed,\n        playing: !video.paused && !video.loading,\n        // percentageBuffered: video.buffered.length &&\n        //   (video.buffered.end(video.buffered.length - 1) /\n        //   video.duration) * 100,\n        percentagePlayed: video.currentTime / video.duration * 100 // loading: video.readyState < video.HAVE_ENOUGH_DATA,\n\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"play\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.play();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pause\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.pause();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrub\", function (event) {\n      var _this$state = _this.state,\n          duration = _this$state.duration,\n          scrubberRef = _this$state.scrubberRef;\n\n      if (scrubberRef.current) {\n        var scrubberRect = scrubberRef.current.getBoundingClientRect();\n        var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n\n        _this.setState({\n          scrubTime: duration * percent\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"seek\", function (event) {\n      var _this$state2 = _this.state,\n          duration = _this$state2.duration,\n          scrubberRef = _this$state2.scrubberRef,\n          videoRef = _this$state2.videoRef;\n\n      if (scrubberRef.current) {\n        var scrubberRect = scrubberRef.current.getBoundingClientRect();\n        var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n        videoRef.current.currentTime = duration * percent;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unmute\", function () {\n      var videoRef = _this.state.videoRef;\n\n      if (videoRef.current) {\n        videoRef.current.muted = false;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mute\", function () {\n      var videoRef = _this.state.videoRef;\n\n      if (videoRef.current) {\n        videoRef.current.muted = true;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"louder\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.volume += VOLUME_STEP;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"quieter\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.volume -= VOLUME_STEP;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showCaptions\", function (index) {\n      var videoRef = _this.state.videoRef;\n      var textTracks = videoRef.current.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = i === index ? 'showing' : 'hidden';\n      } // Using forceUpdate to force redraw of controls when changing captions\n\n\n      _this.forceUpdate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fullscreen\", function () {\n      var videoRef = _this.state.videoRef;\n      var video = videoRef.current;\n\n      if (video.requestFullscreen) {\n        video.requestFullscreen();\n      } else if (video.msRequestFullscreen) {\n        video.msRequestFullscreen();\n      } else if (video.mozRequestFullScreen) {\n        video.mozRequestFullScreen();\n      } else if (video.webkitRequestFullscreen) {\n        video.webkitRequestFullscreen();\n      } else {\n        console.warn(\"Your browser doesn't support fullscreen.\");\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"interactionStart\", function () {\n      _this.setState({\n        interacting: true\n      });\n\n      clearTimeout(_this.interactionTimer);\n      _this.interactionTimer = setTimeout(_this.interactionStop, 3000);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"interactionStop\", function () {\n      var focus = _this.state.focus;\n\n      if (!focus && !_this.unmounted) {\n        _this.setState({\n          interacting: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"restate\", function () {\n      var _this$state3 = _this.state,\n          captions = _this$state3.captions,\n          height = _this$state3.height,\n          videoRef = _this$state3.videoRef,\n          width = _this$state3.width;\n      var video = videoRef.current;\n\n      if (video) {\n        if (video.videoHeight) {\n          // set the size based on the video aspect ratio\n          var rect = video.getBoundingClientRect();\n          var ratio = rect.width / rect.height;\n          var videoRatio = video.videoWidth / video.videoHeight;\n\n          if (videoRatio > ratio) {\n            var nextHeight = rect.width / videoRatio;\n\n            if (nextHeight !== height) {\n              _this.setState({\n                height: nextHeight,\n                width: undefined\n              });\n            }\n          } else {\n            var nextWidth = rect.height * videoRatio;\n\n            if (nextWidth !== width) {\n              _this.setState({\n                height: undefined,\n                width: nextWidth\n              });\n            }\n          }\n        } // remember the state of the text tracks for subsequent rendering\n\n\n        var textTracks = video.textTracks;\n\n        if (textTracks.length > 0) {\n          if (textTracks.length === 1) {\n            var active = textTracks[0].mode === 'showing';\n\n            if (!captions || !captions[0] || captions[0].active !== active) {\n              _this.setState({\n                captions: [{\n                  active: active\n                }]\n              });\n            }\n          } else {\n            var nextCaptions = [];\n            var set = false;\n\n            for (var i = 0; i < textTracks.length; i += 1) {\n              var track = textTracks[i];\n\n              var _active = track.mode === 'showing';\n\n              nextCaptions.push({\n                label: track.label,\n                active: _active\n              });\n\n              if (!captions || !captions[i] || captions[i].active !== _active) {\n                set = true;\n              }\n            }\n\n            if (set) {\n              _this.setState({\n                captions: nextCaptions\n              });\n            }\n          }\n        }\n      }\n    });\n\n    _this.update = throttle(_this.update, 100, _assertThisInitialized(_this));\n    _this.mediaEventProps = _this.injectUpdateVideoEvents();\n    return _this;\n  }\n\n  var _proto = Video.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var mute = this.props.mute;\n    var videoRef = this.state.videoRef;\n    var video = videoRef.current;\n\n    if (mute) {\n      this.mute();\n    }\n\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n\n      this.restate();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var autoPlay = this.props.autoPlay;\n\n    if (autoPlay && !prevProps.autoPlay) {\n      // Caller wants the video to play now.\n      this.play();\n    }\n\n    this.restate();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unmounted = true;\n  };\n\n  _proto.renderControls = function renderControls() {\n    var _this2 = this;\n\n    var _this$props = this.props,\n        controls = _this$props.controls,\n        theme = _this$props.theme;\n    var _this$state4 = this.state,\n        captions = _this$state4.captions,\n        currentTime = _this$state4.currentTime,\n        duration = _this$state4.duration,\n        interacting = _this$state4.interacting,\n        percentagePlayed = _this$state4.percentagePlayed,\n        playing = _this$state4.playing,\n        scrubberRef = _this$state4.scrubberRef,\n        scrubTime = _this$state4.scrubTime,\n        volume = _this$state4.volume;\n    var over = controls === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'dark-1',\n      opacity: 'strong'\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'light-1');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume\n    };\n    var captionControls = captions.map(function (caption) {\n      return {\n        icon: caption.label ? undefined : React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        onClick: function onClick() {\n          return _this2.showCaptions(caption.active ? -1 : 0);\n        }\n      };\n    });\n    return React.createElement(StyledVideoControls, {\n      over: over,\n      active: !this.hasPlayed || controls === 'below' || over && interacting\n    }, React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, React.createElement(Button, {\n      icon: playing ? React.createElement(Icons.Pause, {\n        color: iconColor\n      }) : React.createElement(Icons.Play, {\n        color: iconColor\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? this.pause : this.play\n    }), React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, React.createElement(Box, {\n      flex: true\n    }, React.createElement(Stack, null, React.createElement(Meter, {\n      \"aria-label\": \"Video progress\",\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: \"small\",\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), React.createElement(StyledVideoScrubber, {\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: this.scrub,\n      onMouseLeave: function onMouseLeave() {\n        return _this2.setState({\n          scrubTime: undefined\n        });\n      },\n      onClick: this.seek\n    }))), React.createElement(Box, {\n      pad: {\n        horizontal: 'small'\n      }\n    }, React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), React.createElement(Menu, {\n      icon: React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      items: [{\n        icon: React.createElement(Icons.Volume, {\n          color: iconColor\n        }),\n        onClick: volume <= 1 - VOLUME_STEP ? this.louder : undefined,\n        close: false\n      }, {\n        icon: React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        onClick: volume >= VOLUME_STEP ? this.quieter : undefined,\n        close: false\n      }].concat(captionControls, [{\n        icon: React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        onClick: this.fullscreen\n      }])\n    })));\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        alignSelf = _this$props2.alignSelf,\n        autoPlay = _this$props2.autoPlay,\n        children = _this$props2.children,\n        controls = _this$props2.controls,\n        gridArea = _this$props2.gridArea,\n        loop = _this$props2.loop,\n        margin = _this$props2.margin,\n        theme = _this$props2.theme,\n        rest = _objectWithoutPropertiesLoose(_this$props2, [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"theme\"]);\n\n    var _this$state5 = this.state,\n        height = _this$state5.height,\n        videoRef = _this$state5.videoRef,\n        width = _this$state5.width;\n    var controlsElement = controls ? this.renderControls() : undefined;\n    var mouseEventListeners;\n\n    if (controls === 'over') {\n      mouseEventListeners = {\n        onMouseEnter: this.interactionStart,\n        onMouseMove: this.interactionStart,\n        onTouchStart: this.interactionStart\n      };\n    }\n\n    var style;\n\n    if (rest.fit === 'contain' && controls === 'over') {\n      // constrain the size to fit the aspect ratio so the controls\n      // overlap correctly\n      if (width) {\n        style = {\n          width: width\n        };\n      } else if (height) {\n        style = {\n          height: height\n        };\n      }\n    }\n\n    return React.createElement(StyledVideoContainer, _extends({}, mouseEventListeners, {\n      alignSelf: alignSelf,\n      gridArea: gridArea,\n      margin: margin,\n      style: style\n    }), React.createElement(StyledVideo, _extends({}, rest, {\n      ref: videoRef\n    }, this.mediaEventProps, {\n      autoPlay: autoPlay || false,\n      loop: loop || false\n    }), children), controlsElement);\n  };\n\n  return Video;\n}(Component);\n\nVideo.defaultProps = {\n  controls: 'over'\n};\nObject.setPrototypeOf(Video.defaultProps, defaultProps);\nvar VideoDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  VideoDoc = require('./doc').doc(Video);\n}\n\nvar VideoWrapper = compose(withTheme, withForwardRef)(VideoDoc || Video);\nexport { VideoWrapper as Video };","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/node_modules/grommet/es6/components/Video/Video.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","React","Component","compose","withTheme","defaultProps","Box","Button","Menu","Meter","Stack","Text","withForwardRef","throttle","StyledVideo","StyledVideoContainer","StyledVideoControls","StyledVideoScrubber","VOLUME_STEP","formatTime","time","minutes","Math","round","seconds","videoEvents","Video","_Component","getDerivedStateFromProps","nextProps","prevState","forwardRef","videoRef","nextVideoRef","props","_this","captions","scrubberRef","createRef","reduce","previousValue","currentValue","nextValue","e","update","state","video","current","hasPlayed","paused","loading","currentTime","interacting","ended","setState","duration","volume","playing","percentagePlayed","play","pause","event","_this$state","scrubberRect","getBoundingClientRect","percent","clientX","left","width","scrubTime","_this$state2","muted","index","textTracks","mode","forceUpdate","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","console","warn","clearTimeout","interactionTimer","setTimeout","interactionStop","focus","unmounted","_this$state3","height","videoHeight","rect","ratio","videoRatio","videoWidth","nextHeight","undefined","nextWidth","active","nextCaptions","set","track","_active","push","label","mediaEventProps","injectUpdateVideoEvents","_proto","componentDidMount","mute","restate","componentDidUpdate","prevProps","autoPlay","componentWillUnmount","renderControls","_this2","_this$props","controls","theme","_this$state4","over","background","color","opacity","iconColor","icons","formattedTime","Icons","ClosedCaption","closedCaption","Configure","configure","FullScreen","fullScreen","Pause","Play","ReduceVolume","reduceVolume","Volume","captionControls","map","caption","icon","createElement","onClick","showCaptions","direction","align","justify","hoverIndicator","flex","scrubber","size","thickness","values","ref","tabIndex","role","onMouseMove","scrub","onMouseLeave","seek","pad","horizontal","margin","dropAlign","bottom","right","dropBackground","items","louder","close","quieter","concat","fullscreen","render","_this$props2","alignSelf","children","gridArea","loop","rest","_this$state5","controlsElement","mouseEventListeners","onMouseEnter","interactionStart","onTouchStart","style","fit","setPrototypeOf","VideoDoc","process","env","NODE_ENV","require","doc","VideoWrapper"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { compose } from 'recompose';\nimport { withTheme } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { withForwardRef } from '../hocs';\nimport { throttle } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo'; // Split the volume control into 6 segments. Empirically determined.\n\nvar VOLUME_STEP = 0.166667;\n\nvar formatTime = function formatTime(time) {\n  var minutes = Math.round(time / 60);\n\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n\n  var seconds = Math.round(time) % 60;\n\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n\n  return minutes + \":\" + seconds;\n};\n\nvar videoEvents = ['onAbort', 'onCanPlay', 'onCanPlayThrough', 'onDurationChange', 'onEmptied', 'onEncrypted', 'onEnded', 'onError', 'onLoadedData', 'onLoadedMetadata', 'onLoadStart', 'onPause', 'onPlay', 'onPlaying', 'onProgress', 'onRateChange', 'onSeeked', 'onSeeking', 'onStalled', 'onSuspend', 'onTimeUpdate', 'onVolumeChange', 'onWaiting'];\n\nvar Video =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Video, _Component);\n\n  Video.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var forwardRef = nextProps.forwardRef;\n    var videoRef = prevState.videoRef;\n    var nextVideoRef = forwardRef || videoRef;\n\n    if (nextVideoRef !== videoRef) {\n      return {\n        videoRef: nextVideoRef\n      };\n    }\n\n    return null;\n  };\n\n  function Video(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      captions: [],\n      scrubberRef: React.createRef(),\n      videoRef: React.createRef()\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasPlayed\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"injectUpdateVideoEvents\", function () {\n      return videoEvents.reduce(function (previousValue, currentValue) {\n        var nextValue = _extends({}, previousValue);\n\n        nextValue[currentValue] = function (e) {\n          if (currentValue in _this.props &&\n          /* eslint-disable react/destructuring-assignment */\n          typeof _this.props[currentValue] === 'function') {\n            _this.props[currentValue](e);\n            /* eslint-enable react/destructuring-assignment */\n\n          }\n\n          _this.update();\n        };\n\n        return nextValue;\n      }, {});\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function () {\n      var videoRef = _this.state.videoRef;\n      var video = videoRef.current; // Set flag for Video first play\n\n      if (!_this.hasPlayed && !video.paused && !video.loading || video.currentTime) {\n        _this.hasPlayed = true;\n      }\n\n      var interacting = _this.state.interacting;\n\n      if (video.ended) {\n        interacting = false;\n      }\n\n      _this.setState({\n        duration: video.duration,\n        currentTime: video.currentTime,\n        // buffered: video.buffered,\n        // paused: video.paused,\n        // muted: video.muted,\n        volume: video.volume,\n        // ended: video.ended,\n        // readyState: video.readyState,\n        interacting: interacting,\n        // computed values\n        // hasPlayed: this.hasPlayed,\n        playing: !video.paused && !video.loading,\n        // percentageBuffered: video.buffered.length &&\n        //   (video.buffered.end(video.buffered.length - 1) /\n        //   video.duration) * 100,\n        percentagePlayed: video.currentTime / video.duration * 100 // loading: video.readyState < video.HAVE_ENOUGH_DATA,\n\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"play\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.play();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pause\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.pause();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrub\", function (event) {\n      var _this$state = _this.state,\n          duration = _this$state.duration,\n          scrubberRef = _this$state.scrubberRef;\n\n      if (scrubberRef.current) {\n        var scrubberRect = scrubberRef.current.getBoundingClientRect();\n        var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n\n        _this.setState({\n          scrubTime: duration * percent\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"seek\", function (event) {\n      var _this$state2 = _this.state,\n          duration = _this$state2.duration,\n          scrubberRef = _this$state2.scrubberRef,\n          videoRef = _this$state2.videoRef;\n\n      if (scrubberRef.current) {\n        var scrubberRect = scrubberRef.current.getBoundingClientRect();\n        var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n        videoRef.current.currentTime = duration * percent;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unmute\", function () {\n      var videoRef = _this.state.videoRef;\n\n      if (videoRef.current) {\n        videoRef.current.muted = false;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mute\", function () {\n      var videoRef = _this.state.videoRef;\n\n      if (videoRef.current) {\n        videoRef.current.muted = true;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"louder\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.volume += VOLUME_STEP;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"quieter\", function () {\n      var videoRef = _this.state.videoRef;\n      videoRef.current.volume -= VOLUME_STEP;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showCaptions\", function (index) {\n      var videoRef = _this.state.videoRef;\n      var textTracks = videoRef.current.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = i === index ? 'showing' : 'hidden';\n      } // Using forceUpdate to force redraw of controls when changing captions\n\n\n      _this.forceUpdate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fullscreen\", function () {\n      var videoRef = _this.state.videoRef;\n      var video = videoRef.current;\n\n      if (video.requestFullscreen) {\n        video.requestFullscreen();\n      } else if (video.msRequestFullscreen) {\n        video.msRequestFullscreen();\n      } else if (video.mozRequestFullScreen) {\n        video.mozRequestFullScreen();\n      } else if (video.webkitRequestFullscreen) {\n        video.webkitRequestFullscreen();\n      } else {\n        console.warn(\"Your browser doesn't support fullscreen.\");\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"interactionStart\", function () {\n      _this.setState({\n        interacting: true\n      });\n\n      clearTimeout(_this.interactionTimer);\n      _this.interactionTimer = setTimeout(_this.interactionStop, 3000);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"interactionStop\", function () {\n      var focus = _this.state.focus;\n\n      if (!focus && !_this.unmounted) {\n        _this.setState({\n          interacting: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"restate\", function () {\n      var _this$state3 = _this.state,\n          captions = _this$state3.captions,\n          height = _this$state3.height,\n          videoRef = _this$state3.videoRef,\n          width = _this$state3.width;\n      var video = videoRef.current;\n\n      if (video) {\n        if (video.videoHeight) {\n          // set the size based on the video aspect ratio\n          var rect = video.getBoundingClientRect();\n          var ratio = rect.width / rect.height;\n          var videoRatio = video.videoWidth / video.videoHeight;\n\n          if (videoRatio > ratio) {\n            var nextHeight = rect.width / videoRatio;\n\n            if (nextHeight !== height) {\n              _this.setState({\n                height: nextHeight,\n                width: undefined\n              });\n            }\n          } else {\n            var nextWidth = rect.height * videoRatio;\n\n            if (nextWidth !== width) {\n              _this.setState({\n                height: undefined,\n                width: nextWidth\n              });\n            }\n          }\n        } // remember the state of the text tracks for subsequent rendering\n\n\n        var textTracks = video.textTracks;\n\n        if (textTracks.length > 0) {\n          if (textTracks.length === 1) {\n            var active = textTracks[0].mode === 'showing';\n\n            if (!captions || !captions[0] || captions[0].active !== active) {\n              _this.setState({\n                captions: [{\n                  active: active\n                }]\n              });\n            }\n          } else {\n            var nextCaptions = [];\n            var set = false;\n\n            for (var i = 0; i < textTracks.length; i += 1) {\n              var track = textTracks[i];\n\n              var _active = track.mode === 'showing';\n\n              nextCaptions.push({\n                label: track.label,\n                active: _active\n              });\n\n              if (!captions || !captions[i] || captions[i].active !== _active) {\n                set = true;\n              }\n            }\n\n            if (set) {\n              _this.setState({\n                captions: nextCaptions\n              });\n            }\n          }\n        }\n      }\n    });\n\n    _this.update = throttle(_this.update, 100, _assertThisInitialized(_this));\n    _this.mediaEventProps = _this.injectUpdateVideoEvents();\n    return _this;\n  }\n\n  var _proto = Video.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var mute = this.props.mute;\n    var videoRef = this.state.videoRef;\n    var video = videoRef.current;\n\n    if (mute) {\n      this.mute();\n    }\n\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n\n      this.restate();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var autoPlay = this.props.autoPlay;\n\n    if (autoPlay && !prevProps.autoPlay) {\n      // Caller wants the video to play now.\n      this.play();\n    }\n\n    this.restate();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unmounted = true;\n  };\n\n  _proto.renderControls = function renderControls() {\n    var _this2 = this;\n\n    var _this$props = this.props,\n        controls = _this$props.controls,\n        theme = _this$props.theme;\n    var _this$state4 = this.state,\n        captions = _this$state4.captions,\n        currentTime = _this$state4.currentTime,\n        duration = _this$state4.duration,\n        interacting = _this$state4.interacting,\n        percentagePlayed = _this$state4.percentagePlayed,\n        playing = _this$state4.playing,\n        scrubberRef = _this$state4.scrubberRef,\n        scrubTime = _this$state4.scrubTime,\n        volume = _this$state4.volume;\n    var over = controls === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'dark-1',\n      opacity: 'strong'\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'light-1');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume\n    };\n    var captionControls = captions.map(function (caption) {\n      return {\n        icon: caption.label ? undefined : React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        onClick: function onClick() {\n          return _this2.showCaptions(caption.active ? -1 : 0);\n        }\n      };\n    });\n    return React.createElement(StyledVideoControls, {\n      over: over,\n      active: !this.hasPlayed || controls === 'below' || over && interacting\n    }, React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, React.createElement(Button, {\n      icon: playing ? React.createElement(Icons.Pause, {\n        color: iconColor\n      }) : React.createElement(Icons.Play, {\n        color: iconColor\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? this.pause : this.play\n    }), React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, React.createElement(Box, {\n      flex: true\n    }, React.createElement(Stack, null, React.createElement(Meter, {\n      \"aria-label\": \"Video progress\",\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: \"small\",\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), React.createElement(StyledVideoScrubber, {\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: this.scrub,\n      onMouseLeave: function onMouseLeave() {\n        return _this2.setState({\n          scrubTime: undefined\n        });\n      },\n      onClick: this.seek\n    }))), React.createElement(Box, {\n      pad: {\n        horizontal: 'small'\n      }\n    }, React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), React.createElement(Menu, {\n      icon: React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      items: [{\n        icon: React.createElement(Icons.Volume, {\n          color: iconColor\n        }),\n        onClick: volume <= 1 - VOLUME_STEP ? this.louder : undefined,\n        close: false\n      }, {\n        icon: React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        onClick: volume >= VOLUME_STEP ? this.quieter : undefined,\n        close: false\n      }].concat(captionControls, [{\n        icon: React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        onClick: this.fullscreen\n      }])\n    })));\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        alignSelf = _this$props2.alignSelf,\n        autoPlay = _this$props2.autoPlay,\n        children = _this$props2.children,\n        controls = _this$props2.controls,\n        gridArea = _this$props2.gridArea,\n        loop = _this$props2.loop,\n        margin = _this$props2.margin,\n        theme = _this$props2.theme,\n        rest = _objectWithoutPropertiesLoose(_this$props2, [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"theme\"]);\n\n    var _this$state5 = this.state,\n        height = _this$state5.height,\n        videoRef = _this$state5.videoRef,\n        width = _this$state5.width;\n    var controlsElement = controls ? this.renderControls() : undefined;\n    var mouseEventListeners;\n\n    if (controls === 'over') {\n      mouseEventListeners = {\n        onMouseEnter: this.interactionStart,\n        onMouseMove: this.interactionStart,\n        onTouchStart: this.interactionStart\n      };\n    }\n\n    var style;\n\n    if (rest.fit === 'contain' && controls === 'over') {\n      // constrain the size to fit the aspect ratio so the controls\n      // overlap correctly\n      if (width) {\n        style = {\n          width: width\n        };\n      } else if (height) {\n        style = {\n          height: height\n        };\n      }\n    }\n\n    return React.createElement(StyledVideoContainer, _extends({}, mouseEventListeners, {\n      alignSelf: alignSelf,\n      gridArea: gridArea,\n      margin: margin,\n      style: style\n    }), React.createElement(StyledVideo, _extends({}, rest, {\n      ref: videoRef\n    }, this.mediaEventProps, {\n      autoPlay: autoPlay || false,\n      loop: loop || false\n    }), children), controlsElement);\n  };\n\n  return Video;\n}(Component);\n\nVideo.defaultProps = {\n  controls: 'over'\n};\nObject.setPrototypeOf(Video.defaultProps, defaultProps);\nvar VideoDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  VideoDoc = require('./doc').doc(Video);\n}\n\nvar VideoWrapper = compose(withTheme, withForwardRef)(VideoDoc || Video);\nexport { VideoWrapper as Video };"]},"metadata":{},"sourceType":"module"}