{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar normalizeReference = function normalizeReference(reference, date, dates) {\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    normalizedReference = new Date(date);\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0]);\n    } else {\n      normalizedReference = new Date();\n      normalizedReference.setHours(0, 0, 0, 0);\n    }\n  } else {\n    normalizedReference = new Date();\n    normalizedReference.setHours(0, 0, 0, 0);\n  }\n\n  return normalizedReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nvar Calendar = forwardRef(function (_ref, ref) {\n  var _ref$animate = _ref.animate,\n      animate = _ref$animate === void 0 ? true : _ref$animate,\n      validBounds = _ref.bounds,\n      dateProp = _ref.date,\n      datesProp = _ref.dates,\n      daysOfWeek = _ref.daysOfWeek,\n      disabled = _ref.disabled,\n      _ref$firstDayOfWeek = _ref.firstDayOfWeek,\n      firstDayOfWeek = _ref$firstDayOfWeek === void 0 ? 0 : _ref$firstDayOfWeek,\n      header = _ref.header,\n      _ref$locale = _ref.locale,\n      locale = _ref$locale === void 0 ? 'en-US' : _ref$locale,\n      onReference = _ref.onReference,\n      onSelect = _ref.onSelect,\n      range = _ref.range,\n      referenceProp = _ref.reference,\n      _ref$showAdjacentDays = _ref.showAdjacentDays,\n      showAdjacentDays = _ref$showAdjacentDays === void 0 ? true : _ref$showAdjacentDays,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'medium' : _ref$size,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"animate\", \"bounds\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"firstDayOfWeek\", \"header\", \"locale\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\"]);\n\n  var theme = useContext(ThemeContext); // set date when caller changes it, allows us to change it internally too\n\n  var _useState = useState(dateProp),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  useEffect(function () {\n    return setDate(dateProp);\n  }, [dateProp]); // set dates when caller changes it, allows us to change it internally too\n\n  var _useState2 = useState(datesProp),\n      dates = _useState2[0],\n      setDates = _useState2[1];\n\n  useEffect(function () {\n    return setDates(datesProp);\n  }, [datesProp]); // set reference based on what the caller passed or date/dates.\n\n  var _useState3 = useState(normalizeReference(referenceProp, date, dates)),\n      reference = _useState3[0],\n      setReference = _useState3[1];\n\n  useEffect(function () {\n    return setReference(normalizeReference(referenceProp, dateProp, datesProp));\n  }, [dateProp, datesProp, referenceProp]); // calculate the bounds we display based on the reference\n\n  var _useState4 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState4[0],\n      setDisplayBounds = _useState4[1];\n\n  var _useState5 = useState(),\n      targetDisplayBounds = _useState5[0],\n      setTargetDisplayBounds = _useState5[1];\n\n  var _useState6 = useState(),\n      slide = _useState6[0],\n      setSlide = _useState6[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek);\n\n    if (!animate) {\n      setDisplayBounds(nextDisplayBounds);\n    } else {\n      setTargetDisplayBounds(nextDisplayBounds);\n    }\n  }, [animate, firstDayOfWeek, reference]);\n  useEffect(function () {\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], displayBounds[1]]);\n        setSlide({\n          direction: 'down',\n          weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n        });\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([displayBounds[0], targetDisplayBounds[1]]);\n        setSlide({\n          direction: 'up',\n          weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n        });\n      } // Wait for animation to finish before cleaning up.\n\n\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [displayBounds, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n\n  var _useState7 = useState(),\n      focus = _useState7[0],\n      setFocus = _useState7[1];\n\n  var _useState8 = useState(),\n      active = _useState8[0],\n      setActive = _useState8[1]; // when working on a range, remember the last selected date so we know\n  // how to handle subsequent date selection\n\n\n  var _useState9 = useState(),\n      lastSelectedDate = _useState9[0],\n      setLastSelectedDate = _useState9[1];\n\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, validBounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, validBounds]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextDates;\n    var nextDate;\n\n    if (!range) {\n      nextDate = selectedDate;\n    } else if (!dates) {\n      if (!date) {\n        nextDate = selectedDate;\n      } else {\n        var priorDate = new Date(date);\n        var selDate = new Date(selectedDate);\n\n        if (priorDate.getTime() < selDate.getTime()) {\n          nextDates = [[date, selectedDate]];\n          nextDate = undefined;\n        } else if (priorDate.getTime() > selDate.getTime()) {\n          nextDates = [[selectedDate, date]];\n          nextDate = undefined;\n        } else {\n          nextDate = undefined;\n        }\n      }\n    } else {\n      // have dates\n      var priorDates = dates[0].map(function (d) {\n        return new Date(d);\n      });\n      var previousDate = new Date(lastSelectedDate);\n\n      var _selDate = new Date(selectedDate);\n\n      if (_selDate.getTime() === priorDates[0].getTime()) {\n        var _dates$ = dates[0];\n        nextDate = _dates$[1];\n        nextDates = undefined;\n      } else if (_selDate.getTime() === priorDates[1].getTime()) {\n        var _dates$2 = dates[0];\n        nextDate = _dates$2[0];\n        nextDates = undefined;\n      } else if (_selDate.getTime() < previousDate.getTime()) {\n        if (_selDate.getTime() < priorDates[0].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        } else if (_selDate.getTime() > priorDates[0].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        }\n      } else if (_selDate.getTime() > previousDate.getTime()) {\n        if (_selDate.getTime() > priorDates[1].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        } else if (_selDate.getTime() < priorDates[1].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        }\n      }\n    }\n\n    setDates(nextDates);\n    setDate(nextDate);\n    setActive(new Date(selectedDate));\n    setLastSelectedDate(selectedDate);\n    if (onSelect) onSelect(nextDates || nextDate);\n  }, [date, dates, lastSelectedDate, onSelect, range]);\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, React.createElement(Button, {\n      a11yTitle: previousMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(previousMonth);\n      }\n    }), React.createElement(Button, {\n      a11yTitle: nextMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(nextMonth);\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push(React.createElement(StyledDayContainer, {\n        key: days.length,\n        sizeProp: size\n      }, React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return React.createElement(StyledWeek, null, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push(React.createElement(StyledWeek, {\n          key: day.getTime()\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push(React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size\n      }, React.createElement(StyledDay, {\n        sizeProp: size\n      })));\n    } else {\n      (function () {\n        var dateString = day.toISOString(); // this.dayRefs[dateString] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || validBounds && !betweenDates(day, validBounds);\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateString;\n        }\n\n        days.push(React.createElement(StyledDayContainer, {\n          key: day.getTime(),\n          sizeProp: size\n        }, React.createElement(Button, {\n          a11yTitle: day.toDateString(),\n          plain: true,\n          tabIndex: -1,\n          active: active && active.getTime() === day.getTime(),\n          disabled: dayDisabled,\n          onClick: function onClick() {\n            return selectDate(dateString);\n          },\n          onMouseOver: function onMouseOver() {\n            return setActive(new Date(dateString));\n          },\n          onMouseOut: function onMouseOut() {\n            return setActive(undefined);\n          },\n          onFocus: function onFocus() {},\n          onBlur: function onBlur() {}\n        }, React.createElement(StyledDay, {\n          inRange: inRange,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          isSelected: selected,\n          sizeProp: size\n        }, day.getDate()))));\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push(React.createElement(StyledWeek, {\n    key: day.getTime()\n  }, days));\n  return React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size\n  }, rest), React.createElement(Box, null, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      return changeReference(previousMonth);\n    },\n    onNextMonth: function onNextMonth() {\n      return changeReference(nextMonth);\n    },\n    previousInBound: betweenDates(previousMonth, validBounds),\n    nextInBound: betweenDates(nextMonth, validBounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return selectDate(active.toISOString());\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n    },\n    onLeft: function onLeft() {\n      return active && setActive(addDays(active, -1));\n    },\n    onRight: function onRight() {\n      return active && setActive(addDays(active, 1));\n    }\n  }, React.createElement(StyledWeeksContainer, {\n    sizeProp: size,\n    tabIndex: 0,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n\n      if (date && betweenDates(new Date(date), displayBounds)) {\n        setActive(new Date(date));\n      } else {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nvar CalendarDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  CalendarDoc = require('./doc').doc(Calendar);\n}\n\nvar CalendarWrapper = CalendarDoc || Calendar;\nexport { CalendarWrapper as Calendar };","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/node_modules/grommet/es6/components/Calendar/Calendar.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useMemo","useState","useEffect","ThemeContext","Box","Button","Heading","Keyboard","StyledCalendar","StyledDay","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","startOfMonth","subtractDays","subtractMonths","withinDates","headingPadMap","small","medium","large","normalizeReference","reference","date","dates","normalizedReference","Date","Array","isArray","setHours","buildDisplayBounds","firstDayOfWeek","start","setDate","getDay","end","Calendar","_ref","ref","_ref$animate","animate","validBounds","bounds","dateProp","datesProp","daysOfWeek","disabled","_ref$firstDayOfWeek","header","_ref$locale","locale","onReference","onSelect","range","referenceProp","_ref$showAdjacentDays","showAdjacentDays","_ref$size","size","rest","theme","_useState","_useState2","setDates","_useState3","setReference","_useState4","displayBounds","setDisplayBounds","_useState5","targetDisplayBounds","setTargetDisplayBounds","_useState6","slide","setSlide","nextDisplayBounds","getTime","direction","weeks","timer","setTimeout","undefined","clearTimeout","previousMonth","nextMonth","_useState7","focus","setFocus","_useState8","active","setActive","_useState9","lastSelectedDate","setLastSelectedDate","changeReference","nextReference","toISOString","selectDate","selectedDate","nextDates","nextDate","priorDate","selDate","priorDates","map","d","previousDate","_selDate","_dates$","_dates$2","renderCalendarHeader","PreviousIcon","calendar","icons","previous","NextIcon","next","createElement","justify","align","flex","pad","horizontal","level","heading","margin","toLocaleDateString","month","year","a11yTitle","icon","onClick","renderDaysOfWeek","day","days","push","sizeProp","otherMonth","weekday","firstDayInMonth","getMonth","dateString","selected","inRange","selectedState","dayDisabled","toDateString","plain","tabIndex","onMouseOver","onMouseOut","onFocus","onBlur","isSelected","getDate","onPreviousMonth","onNextMonth","previousInBound","nextInBound","onEnter","onUp","event","preventDefault","stopPropagation","onDown","onLeft","onRight","displayName","CalendarDoc","process","env","NODE_ENV","require","doc","CalendarWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar normalizeReference = function normalizeReference(reference, date, dates) {\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    normalizedReference = new Date(date);\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0]);\n    } else {\n      normalizedReference = new Date();\n      normalizedReference.setHours(0, 0, 0, 0);\n    }\n  } else {\n    normalizedReference = new Date();\n    normalizedReference.setHours(0, 0, 0, 0);\n  }\n\n  return normalizedReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nvar Calendar = forwardRef(function (_ref, ref) {\n  var _ref$animate = _ref.animate,\n      animate = _ref$animate === void 0 ? true : _ref$animate,\n      validBounds = _ref.bounds,\n      dateProp = _ref.date,\n      datesProp = _ref.dates,\n      daysOfWeek = _ref.daysOfWeek,\n      disabled = _ref.disabled,\n      _ref$firstDayOfWeek = _ref.firstDayOfWeek,\n      firstDayOfWeek = _ref$firstDayOfWeek === void 0 ? 0 : _ref$firstDayOfWeek,\n      header = _ref.header,\n      _ref$locale = _ref.locale,\n      locale = _ref$locale === void 0 ? 'en-US' : _ref$locale,\n      onReference = _ref.onReference,\n      onSelect = _ref.onSelect,\n      range = _ref.range,\n      referenceProp = _ref.reference,\n      _ref$showAdjacentDays = _ref.showAdjacentDays,\n      showAdjacentDays = _ref$showAdjacentDays === void 0 ? true : _ref$showAdjacentDays,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'medium' : _ref$size,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"animate\", \"bounds\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"firstDayOfWeek\", \"header\", \"locale\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\"]);\n\n  var theme = useContext(ThemeContext); // set date when caller changes it, allows us to change it internally too\n\n  var _useState = useState(dateProp),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  useEffect(function () {\n    return setDate(dateProp);\n  }, [dateProp]); // set dates when caller changes it, allows us to change it internally too\n\n  var _useState2 = useState(datesProp),\n      dates = _useState2[0],\n      setDates = _useState2[1];\n\n  useEffect(function () {\n    return setDates(datesProp);\n  }, [datesProp]); // set reference based on what the caller passed or date/dates.\n\n  var _useState3 = useState(normalizeReference(referenceProp, date, dates)),\n      reference = _useState3[0],\n      setReference = _useState3[1];\n\n  useEffect(function () {\n    return setReference(normalizeReference(referenceProp, dateProp, datesProp));\n  }, [dateProp, datesProp, referenceProp]); // calculate the bounds we display based on the reference\n\n  var _useState4 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState4[0],\n      setDisplayBounds = _useState4[1];\n\n  var _useState5 = useState(),\n      targetDisplayBounds = _useState5[0],\n      setTargetDisplayBounds = _useState5[1];\n\n  var _useState6 = useState(),\n      slide = _useState6[0],\n      setSlide = _useState6[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek);\n\n    if (!animate) {\n      setDisplayBounds(nextDisplayBounds);\n    } else {\n      setTargetDisplayBounds(nextDisplayBounds);\n    }\n  }, [animate, firstDayOfWeek, reference]);\n  useEffect(function () {\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], displayBounds[1]]);\n        setSlide({\n          direction: 'down',\n          weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n        });\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([displayBounds[0], targetDisplayBounds[1]]);\n        setSlide({\n          direction: 'up',\n          weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n        });\n      } // Wait for animation to finish before cleaning up.\n\n\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [displayBounds, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n\n  var _useState7 = useState(),\n      focus = _useState7[0],\n      setFocus = _useState7[1];\n\n  var _useState8 = useState(),\n      active = _useState8[0],\n      setActive = _useState8[1]; // when working on a range, remember the last selected date so we know\n  // how to handle subsequent date selection\n\n\n  var _useState9 = useState(),\n      lastSelectedDate = _useState9[0],\n      setLastSelectedDate = _useState9[1];\n\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, validBounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, validBounds]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextDates;\n    var nextDate;\n\n    if (!range) {\n      nextDate = selectedDate;\n    } else if (!dates) {\n      if (!date) {\n        nextDate = selectedDate;\n      } else {\n        var priorDate = new Date(date);\n        var selDate = new Date(selectedDate);\n\n        if (priorDate.getTime() < selDate.getTime()) {\n          nextDates = [[date, selectedDate]];\n          nextDate = undefined;\n        } else if (priorDate.getTime() > selDate.getTime()) {\n          nextDates = [[selectedDate, date]];\n          nextDate = undefined;\n        } else {\n          nextDate = undefined;\n        }\n      }\n    } else {\n      // have dates\n      var priorDates = dates[0].map(function (d) {\n        return new Date(d);\n      });\n      var previousDate = new Date(lastSelectedDate);\n\n      var _selDate = new Date(selectedDate);\n\n      if (_selDate.getTime() === priorDates[0].getTime()) {\n        var _dates$ = dates[0];\n        nextDate = _dates$[1];\n        nextDates = undefined;\n      } else if (_selDate.getTime() === priorDates[1].getTime()) {\n        var _dates$2 = dates[0];\n        nextDate = _dates$2[0];\n        nextDates = undefined;\n      } else if (_selDate.getTime() < previousDate.getTime()) {\n        if (_selDate.getTime() < priorDates[0].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        } else if (_selDate.getTime() > priorDates[0].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        }\n      } else if (_selDate.getTime() > previousDate.getTime()) {\n        if (_selDate.getTime() > priorDates[1].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        } else if (_selDate.getTime() < priorDates[1].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        }\n      }\n    }\n\n    setDates(nextDates);\n    setDate(nextDate);\n    setActive(new Date(selectedDate));\n    setLastSelectedDate(selectedDate);\n    if (onSelect) onSelect(nextDates || nextDate);\n  }, [date, dates, lastSelectedDate, onSelect, range]);\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, React.createElement(Button, {\n      a11yTitle: previousMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(previousMonth);\n      }\n    }), React.createElement(Button, {\n      a11yTitle: nextMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(nextMonth);\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push(React.createElement(StyledDayContainer, {\n        key: days.length,\n        sizeProp: size\n      }, React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return React.createElement(StyledWeek, null, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push(React.createElement(StyledWeek, {\n          key: day.getTime()\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push(React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size\n      }, React.createElement(StyledDay, {\n        sizeProp: size\n      })));\n    } else {\n      (function () {\n        var dateString = day.toISOString(); // this.dayRefs[dateString] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || validBounds && !betweenDates(day, validBounds);\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateString;\n        }\n\n        days.push(React.createElement(StyledDayContainer, {\n          key: day.getTime(),\n          sizeProp: size\n        }, React.createElement(Button, {\n          a11yTitle: day.toDateString(),\n          plain: true,\n          tabIndex: -1,\n          active: active && active.getTime() === day.getTime(),\n          disabled: dayDisabled,\n          onClick: function onClick() {\n            return selectDate(dateString);\n          },\n          onMouseOver: function onMouseOver() {\n            return setActive(new Date(dateString));\n          },\n          onMouseOut: function onMouseOut() {\n            return setActive(undefined);\n          },\n          onFocus: function onFocus() {},\n          onBlur: function onBlur() {}\n        }, React.createElement(StyledDay, {\n          inRange: inRange,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          isSelected: selected,\n          sizeProp: size\n        }, day.getDate()))));\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push(React.createElement(StyledWeek, {\n    key: day.getTime()\n  }, days));\n  return React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size\n  }, rest), React.createElement(Box, null, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      return changeReference(previousMonth);\n    },\n    onNextMonth: function onNextMonth() {\n      return changeReference(nextMonth);\n    },\n    previousInBound: betweenDates(previousMonth, validBounds),\n    nextInBound: betweenDates(nextMonth, validBounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return selectDate(active.toISOString());\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n    },\n    onLeft: function onLeft() {\n      return active && setActive(addDays(active, -1));\n    },\n    onRight: function onRight() {\n      return active && setActive(addDays(active, 1));\n    }\n  }, React.createElement(StyledWeeksContainer, {\n    sizeProp: size,\n    tabIndex: 0,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n\n      if (date && betweenDates(new Date(date), displayBounds)) {\n        setActive(new Date(date));\n      } else {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nvar CalendarDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  CalendarDoc = require('./doc').doc(Calendar);\n}\n\nvar CalendarWrapper = CalendarDoc || Calendar;\nexport { CalendarWrapper as Calendar };"]},"metadata":{},"sourceType":"module"}