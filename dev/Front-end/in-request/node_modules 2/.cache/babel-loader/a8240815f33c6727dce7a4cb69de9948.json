{"ast":null,"code":"\"use strict\";\n\nfunction once(emitter, name) {\n  let c = null;\n  const p = new Promise((resolve, reject) => {\n    function cancel() {\n      emitter.removeListener(name, onEvent);\n      emitter.removeListener('error', onError);\n    }\n\n    function onEvent(arg) {\n      cancel();\n      resolve(arg);\n    }\n\n    function onError(err) {\n      cancel();\n      reject(err);\n    }\n\n    c = cancel;\n    emitter.on(name, onEvent);\n    emitter.on('error', onError);\n  });\n\n  if (!c) {\n    throw new TypeError('Could not get `cancel()` function');\n  }\n\n  p.cancel = c;\n  return p;\n}\n\nmodule.exports = once;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;AAEA,SAAS,IAAT,CACC,OADD,EAEC,IAFD,EAEa;AAEZ,MAAI,CAAC,GAA+B,IAApC;AACA,QAAM,CAAC,GAAG,IAAI,OAAJ,CAAe,CAAC,OAAD,EAAU,MAAV,KAAoB;AAC5C,aAAS,MAAT,GAAe;AACd,MAAA,OAAO,CAAC,cAAR,CAAuB,IAAvB,EAA6B,OAA7B;AACA,MAAA,OAAO,CAAC,cAAR,CAAuB,OAAvB,EAAgC,OAAhC;AACA;;AACD,aAAS,OAAT,CAAiB,GAAjB,EAAuB;AACtB,MAAA,MAAM;AACN,MAAA,OAAO,CAAC,GAAD,CAAP;AACA;;AACD,aAAS,OAAT,CAAiB,GAAjB,EAA2B;AAC1B,MAAA,MAAM;AACN,MAAA,MAAM,CAAC,GAAD,CAAN;AACA;;AACD,IAAA,CAAC,GAAG,MAAJ;AACA,IAAA,OAAO,CAAC,EAAR,CAAW,IAAX,EAAiB,OAAjB;AACA,IAAA,OAAO,CAAC,EAAR,CAAW,OAAX,EAAoB,OAApB;AACA,GAhBS,CAAV;;AAiBA,MAAI,CAAC,CAAL,EAAQ;AACP,UAAM,IAAI,SAAJ,CAAc,mCAAd,CAAN;AACA;;AACD,EAAA,CAAC,CAAC,MAAF,GAAW,CAAX;AACA,SAAO,CAAP;AACA;;AAWD,MAAA,CAAA,OAAA,GAAS,IAAT","sourceRoot":"","sourcesContent":["\"use strict\";\nfunction once(emitter, name) {\n    let c = null;\n    const p = new Promise((resolve, reject) => {\n        function cancel() {\n            emitter.removeListener(name, onEvent);\n            emitter.removeListener('error', onError);\n        }\n        function onEvent(arg) {\n            cancel();\n            resolve(arg);\n        }\n        function onError(err) {\n            cancel();\n            reject(err);\n        }\n        c = cancel;\n        emitter.on(name, onEvent);\n        emitter.on('error', onError);\n    });\n    if (!c) {\n        throw new TypeError('Could not get `cancel()` function');\n    }\n    p.cancel = c;\n    return p;\n}\nmodule.exports = once;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}