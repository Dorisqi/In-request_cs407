{"ast":null,"code":"import firebase from \"firebase/app\";\nimport admin from \"firebase-admin\";\nimport serviceAccount from './in-request-firebase-adminsdk-2upr0-a94880f19f.json';\nimport \"firebase/auth\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB8fmbeFCz6MflVeRF-pU7N5WyPCDbQDQw\",\n  authDomain: \"in-request.firebaseapp.com\",\n  databaseURL: \"https://in-request.firebaseio.com\",\n  projectId: \"in-request\",\n  storageBucket: \"in-request.appspot.com\",\n  messagingSenderId: \"566878675007\",\n  appId: \"1:566878675007:web:234477171d4f9c7311d88a\",\n  measurementId: \"G-5PRZRKXFQ2\"\n}; //const firebase = require(\"firebase/app\");\n\nfirebase.initializeApp(firebaseConfig);\nconst auth = firebase.auth();\nadmin.initializeApp({\n  credential: admin.credential.cert(serviceAccount)\n});\nconst db = admin.firestore();\n\nfunction login(email, password) {\n  firebase.auth().signInWithEmailAndPassword(email, password).then(error => {\n    // log-in successful.\n    const ref = db.collection('users').doc(email);\n    ref.get().then(doc => {\n      if (!doc.exists) {\n        console.log('No such document!');\n      } else {\n        ref.update({\n          LoginState: true\n        }).then(() => {\n          console.log('login successful'); // console.log('Data:', doc.data());\n        });\n      }\n    }).catch(err => {\n      // An error happened.\n      console.log('Error logging in', err);\n    });\n  });\n}\n\nexport default login; // This part is for firebase-cloud firestore setup\n//const admin = require('firebase-admin');","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/App/Firebase_start.js"],"names":["firebase","admin","serviceAccount","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","auth","credential","cert","db","firestore","login","email","password","signInWithEmailAndPassword","then","error","ref","collection","doc","get","exists","console","log","update","LoginState","catch","err"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,cAAP,MAA2B,sDAA3B;AACA,OAAO,eAAP;AACA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,4BAFS;AAGrBC,EAAAA,WAAW,EAAE,mCAHQ;AAIrBC,EAAAA,SAAS,EAAE,YAJU;AAKrBC,EAAAA,aAAa,EAAE,wBALM;AAMrBC,EAAAA,iBAAiB,EAAE,cANE;AAOrBC,EAAAA,KAAK,EAAE,2CAPc;AAQrBC,EAAAA,aAAa,EAAE;AARM,CAAvB,C,CAUA;;AACAX,QAAQ,CAACY,aAAT,CAAuBT,cAAvB;AACA,MAAMU,IAAI,GAAEb,QAAQ,CAACa,IAAT,EAAZ;AACAZ,KAAK,CAACW,aAAN,CAAoB;AAClBE,EAAAA,UAAU,EAAEb,KAAK,CAACa,UAAN,CAAiBC,IAAjB,CAAsBb,cAAtB;AADM,CAApB;AAMA,MAAMc,EAAE,GAAGf,KAAK,CAACgB,SAAN,EAAX;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAA+B;AAC7BpB,EAAAA,QAAQ,CAACa,IAAT,GAAgBQ,0BAAhB,CAA2CF,KAA3C,EAAkDC,QAAlD,EAA4DE,IAA5D,CAAiEC,KAAK,IAAI;AAC5E;AACE,UAAMC,GAAG,GAAGR,EAAE,CAACS,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BP,KAA3B,CAAZ;AACAK,IAAAA,GAAG,CAACG,GAAJ,GAAUL,IAAV,CAAeI,GAAG,IAAI;AACpB,UAAI,CAACA,GAAG,CAACE,MAAT,EAAiB;AACfC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACD,OAFD,MAEO;AACLN,QAAAA,GAAG,CAACO,MAAJ,CAAW;AACTC,UAAAA,UAAU,EAAE;AADH,SAAX,EAEGV,IAFH,CAEQ,MAAM;AACZO,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADY,CAEZ;AACD,SALD;AAMD;AACF,KAXD,EAWGG,KAXH,CAWSC,GAAG,IAAI;AACd;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCI,GAAhC;AACD,KAdD;AAeD,GAlBC;AAmBD;;AAED,eAAehB,KAAf,C,CAGA;AACA","sourcesContent":["import firebase from \"firebase/app\"\nimport admin from \"firebase-admin\"\nimport serviceAccount from './in-request-firebase-adminsdk-2upr0-a94880f19f.json'\nimport \"firebase/auth\"\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB8fmbeFCz6MflVeRF-pU7N5WyPCDbQDQw\",\n  authDomain: \"in-request.firebaseapp.com\",\n  databaseURL: \"https://in-request.firebaseio.com\",\n  projectId: \"in-request\",\n  storageBucket: \"in-request.appspot.com\",\n  messagingSenderId: \"566878675007\",\n  appId: \"1:566878675007:web:234477171d4f9c7311d88a\",\n  measurementId: \"G-5PRZRKXFQ2\"\n};\n//const firebase = require(\"firebase/app\");\nfirebase.initializeApp(firebaseConfig);\nconst auth= firebase.auth()\nadmin.initializeApp({\n  credential: admin.credential.cert(serviceAccount),\n});\n\n\n\nconst db = admin.firestore();\n\nfunction login(email, password){\n  firebase.auth().signInWithEmailAndPassword(email, password).then(error => {\n// log-in successful.\n  const ref = db.collection('users').doc(email);\n  ref.get().then(doc => {\n    if (!doc.exists) {\n      console.log('No such document!');\n    } else {\n      ref.update({\n        LoginState: true\n      }).then(() => {\n        console.log('login successful');\n        // console.log('Data:', doc.data());\n      });\n    }\n  }).catch(err => {\n    // An error happened.\n    console.log('Error logging in', err);\n  });\n});\n}\n\nexport default login ;\n\n\n// This part is for firebase-cloud firestore setup\n//const admin = require('firebase-admin');\n"]},"metadata":{},"sourceType":"module"}