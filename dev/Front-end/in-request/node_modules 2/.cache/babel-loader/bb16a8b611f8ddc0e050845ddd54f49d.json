{"ast":null,"code":"var _jsxFileName = \"/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Home/uploadimg.js\";\nimport React, { Component } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport { storage } from '../../firebase';\nimport PersonIcon from '@material-ui/icons/Person';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport { fdb } from '../../firebase'; // const largeAvatar = withStyles(theme => ({\n//   root: {\n//     width: 200,\n//     height: 150,\n//     border: `2px solid ${theme.palette.background.paper}`,\n//   },\n// }))(Avatar);\n\nclass Upload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        })); //image = this.state.image;\n\n        const name = 'images/' + this.props.Email;\n        console.log(name);\n        const uploadtask = storage.ref(name).put(image);\n        uploadtask.on('state_changed', snapshot => {\n          console.log(\"intheresomewhere\"); //progress\n        }, error => {\n          console.log(error);\n          alert(error);\n        }, () => {\n          //complete\n          storage.ref('images').child(this.props.Email).getDownloadURL().then(url => {\n            console.log(url);\n            this.setState({\n              url\n            });\n          });\n          const ref = fdb.collection('users').doc(this.props.Email);\n          ref.set({\n            photostate: true\n          });\n        });\n      }\n    };\n\n    this.handleUpdate = e => {// const {image} = this.state;\n      // const uploadtask = storage.ref(`images/${image.name}`).put(image);\n      // uploadtask.on('state_changed', (snapshot) => {\n      //     console.log(\"intheresomewhere\")//progress\n      // }, (error) => {console.log()}, () => {\n      //     //complete\n      //     storage.ref('images').child(image.name).getDownloadURL().then(url => {\n      //         console.log(url);\n      //         this.setState({url});\n      //     })\n      // });\n    };\n\n    this.state = {\n      image: \"\",\n      url: this.props.url,\n      imgName: this.props.email\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n  }\n\n  componentWillMount() {\n    console.log(this.props.url);\n    this.setState({\n      url: this.props.url\n    });\n  }\n\n  render() {\n    const style = {\n      height: '100vh,',\n      display: 'flex ',\n      flexDirection: 'column',\n      alignItems: 'center'\n    };\n    return React.createElement(\"div\", {\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"myInput\",\n      type: \"file\",\n      ref: ref => this.myInput = ref,\n      style: {\n        display: 'none'\n      },\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(IconButton, {\n      onClick: e => this.myInput.click(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      src: this.state.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      size: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.props.Nickname));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Home/uploadimg.js"],"names":["React","Component","IconButton","Button","storage","PersonIcon","PublishIcon","Avatar","makeStyles","withStyles","fdb","Upload","constructor","props","handleChange","e","target","files","image","setState","name","Email","console","log","uploadtask","ref","put","on","snapshot","error","alert","child","getDownloadURL","then","url","collection","doc","set","photostate","handleUpdate","state","imgName","email","bind","componentWillMount","render","style","height","display","flexDirection","alignItems","myInput","click","Nickname"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from  \"@material-ui/core/Button\";\nimport {storage} from '../../firebase';\nimport PersonIcon from '@material-ui/icons/Person';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { makeStyles,withStyles } from '@material-ui/core/styles';\nimport {fdb} from '../../firebase';\n\n\n// const largeAvatar = withStyles(theme => ({\n//   root: {\n//     width: 200,\n//     height: 150,\n//     border: `2px solid ${theme.palette.background.paper}`,\n//   },\n// }))(Avatar);\n\n\nclass Upload extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: \"\",\n            url: this.props.url,\n            imgName:this.props.email\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n    }\n\n\n    handleChange = e => {\n        if(e.target.files[0]){\n            const image = e.target.files[0];\n            this.setState(()=>({image}));\n            //image = this.state.image;\n            const name = 'images/'+ this.props.Email\n            console.log(name)\n            const uploadtask = storage.ref(name).put(image);\n            uploadtask.on('state_changed', (snapshot) => {\n                console.log(\"intheresomewhere\")//progress\n            },\n            (error) => {\n              console.log(error);\n              alert(error)\n            },\n            () => {\n                //complete\n\n                storage.ref('images').child(this.props.Email).getDownloadURL().then(url => {\n                    console.log(url);\n                    this.setState({url});\n                })\n                const ref = fdb.collection('users').doc(this.props.Email);\n                  ref.set({\n                  photostate: true\n                  });\n\n            });\n        }\n\n    }\n    handleUpdate = e => {\n        // const {image} = this.state;\n        // const uploadtask = storage.ref(`images/${image.name}`).put(image);\n        // uploadtask.on('state_changed', (snapshot) => {\n        //     console.log(\"intheresomewhere\")//progress\n        // }, (error) => {console.log()}, () => {\n        //     //complete\n        //     storage.ref('images').child(image.name).getDownloadURL().then(url => {\n        //         console.log(url);\n        //         this.setState({url});\n        //     })\n        // });\n    }\n\ncomponentWillMount() {\n  console.log(this.props.url)\n  this.setState({\n    url:this.props.url\n  })\n}\n\n    render(){\n        const style = {\n            height: '100vh,',\n            display: 'flex ',\n            flexDirection: 'column',\n            alignItems: 'center'\n        };\n        return (\n            <div style={style}>\n                <input id=\"myInput\" type=\"file\" ref={(ref) => this.myInput = ref} style = {{display : 'none'}}  onChange={this.handleChange}/>\n                <IconButton onClick={(e) => this.myInput.click() }  >\n                    <Avatar src={this.state.url}  />\n                </IconButton>\n                <label size=\"large\">{this.props.Nickname}</label>\n\n            </div>\n        )\n    }\n}\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}