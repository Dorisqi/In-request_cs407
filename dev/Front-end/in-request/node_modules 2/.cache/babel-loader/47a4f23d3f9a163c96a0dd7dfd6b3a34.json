{"ast":null,"code":"/*! firebase-admin v8.9.2 */\n\"use strict\";\n/*!\n * Copyright 2018 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar error_1 = require(\"../utils/error\");\n\nvar utils = require(\"../utils/index\");\n\nvar validator = require(\"../utils/validator\");\n\nvar android_app_1 = require(\"./android-app\");\n\nvar ios_app_1 = require(\"./ios-app\");\n\nvar project_management_api_request_1 = require(\"./project-management-api-request\");\n\nvar app_metadata_1 = require(\"./app-metadata\");\n/**\n * Internals of a Project Management instance.\n */\n\n\nvar ProjectManagementInternals =\n/** @class */\nfunction () {\n  function ProjectManagementInternals() {}\n  /**\n   * Deletes the service and its associated resources.\n   *\n   * @return {Promise<void>} An empty Promise that will be resolved when the service is deleted.\n   */\n\n\n  ProjectManagementInternals.prototype.delete = function () {\n    // There are no resources to clean up.\n    return Promise.resolve();\n  };\n\n  return ProjectManagementInternals;\n}();\n/**\n * ProjectManagement service bound to the provided app.\n */\n\n\nvar ProjectManagement =\n/** @class */\nfunction () {\n  /**\n   * @param {object} app The app for this ProjectManagement service.\n   * @constructor\n   */\n  function ProjectManagement(app) {\n    this.app = app;\n    this.INTERNAL = new ProjectManagementInternals();\n\n    if (!validator.isNonNullObject(app) || !('options' in app)) {\n      throw new error_1.FirebaseProjectManagementError('invalid-argument', 'First argument passed to admin.projectManagement() must be a valid Firebase app ' + 'instance.');\n    }\n\n    this.requestHandler = new project_management_api_request_1.ProjectManagementRequestHandler(app);\n  }\n  /**\n   * Lists up to 100 Firebase Android apps associated with this Firebase project.\n   */\n\n\n  ProjectManagement.prototype.listAndroidApps = function () {\n    return this.listPlatformApps('android', 'listAndroidApps()');\n  };\n  /**\n   * Lists up to 100 Firebase iOS apps associated with this Firebase project.\n   */\n\n\n  ProjectManagement.prototype.listIosApps = function () {\n    return this.listPlatformApps('ios', 'listIosApps()');\n  };\n  /**\n   * Returns an AndroidApp object for the given appId. No RPC is made.\n   */\n\n\n  ProjectManagement.prototype.androidApp = function (appId) {\n    return new android_app_1.AndroidApp(appId, this.requestHandler);\n  };\n  /**\n   * Returns an IosApp object for the given appId. No RPC is made.\n   */\n\n\n  ProjectManagement.prototype.iosApp = function (appId) {\n    return new ios_app_1.IosApp(appId, this.requestHandler);\n  };\n  /**\n   * Returns a ShaCertificate object for the given shaHash. No RPC is made.\n   */\n\n\n  ProjectManagement.prototype.shaCertificate = function (shaHash) {\n    return new android_app_1.ShaCertificate(shaHash);\n  };\n  /**\n   * Creates a new Firebase Android app, associated with this Firebase project.\n   */\n\n\n  ProjectManagement.prototype.createAndroidApp = function (packageName, displayName) {\n    var _this = this;\n\n    return this.getResourceName().then(function (resourceName) {\n      return _this.requestHandler.createAndroidApp(resourceName, packageName, displayName);\n    }).then(function (responseData) {\n      project_management_api_request_1.assertServerResponse(validator.isNonNullObject(responseData), responseData, 'createAndroidApp()\\'s responseData must be a non-null object.');\n      project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(responseData.appId), responseData, \"\\\"responseData.appId\\\" field must be present in createAndroidApp()'s response data.\");\n      return new android_app_1.AndroidApp(responseData.appId, _this.requestHandler);\n    });\n  };\n  /**\n   * Creates a new Firebase iOS app, associated with this Firebase project.\n   */\n\n\n  ProjectManagement.prototype.createIosApp = function (bundleId, displayName) {\n    var _this = this;\n\n    return this.getResourceName().then(function (resourceName) {\n      return _this.requestHandler.createIosApp(resourceName, bundleId, displayName);\n    }).then(function (responseData) {\n      project_management_api_request_1.assertServerResponse(validator.isNonNullObject(responseData), responseData, 'createIosApp()\\'s responseData must be a non-null object.');\n      project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(responseData.appId), responseData, \"\\\"responseData.appId\\\" field must be present in createIosApp()'s response data.\");\n      return new ios_app_1.IosApp(responseData.appId, _this.requestHandler);\n    });\n  };\n  /**\n   * Lists up to 100 Firebase apps associated with this Firebase project.\n   */\n\n\n  ProjectManagement.prototype.listAppMetadata = function () {\n    var _this = this;\n\n    return this.getResourceName().then(function (resourceName) {\n      return _this.requestHandler.listAppMetadata(resourceName);\n    }).then(function (responseData) {\n      return _this.getProjectId().then(function (projectId) {\n        return _this.transformResponseToAppMetadata(responseData, projectId);\n      });\n    });\n  };\n  /**\n   * Update display name of the project\n   */\n\n\n  ProjectManagement.prototype.setDisplayName = function (newDisplayName) {\n    var _this = this;\n\n    return this.getResourceName().then(function (resourceName) {\n      return _this.requestHandler.setDisplayName(resourceName, newDisplayName);\n    });\n  };\n\n  ProjectManagement.prototype.transformResponseToAppMetadata = function (responseData, projectId) {\n    this.assertListAppsResponseData(responseData, 'listAppMetadata()');\n\n    if (!responseData.apps) {\n      return [];\n    }\n\n    return responseData.apps.map(function (appJson) {\n      project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(appJson.appId), responseData, \"\\\"apps[].appId\\\" field must be present in the listAppMetadata() response data.\");\n      project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(appJson.platform), responseData, \"\\\"apps[].platform\\\" field must be present in the listAppMetadata() response data.\");\n      var metadata = {\n        appId: appJson.appId,\n        platform: app_metadata_1.AppPlatform[appJson.platform] || app_metadata_1.AppPlatform.PLATFORM_UNKNOWN,\n        projectId: projectId,\n        resourceName: appJson.name\n      };\n\n      if (appJson.displayName) {\n        metadata.displayName = appJson.displayName;\n      }\n\n      return metadata;\n    });\n  };\n\n  ProjectManagement.prototype.getResourceName = function () {\n    return this.getProjectId().then(function (projectId) {\n      return \"projects/\" + projectId;\n    });\n  };\n\n  ProjectManagement.prototype.getProjectId = function () {\n    var _this = this;\n\n    if (this.projectId) {\n      return Promise.resolve(this.projectId);\n    }\n\n    return utils.findProjectId(this.app).then(function (projectId) {\n      // Assert that a specific project ID was provided within the app.\n      if (!validator.isNonEmptyString(projectId)) {\n        throw new error_1.FirebaseProjectManagementError('invalid-project-id', 'Failed to determine project ID. Initialize the SDK with service account credentials, or ' + 'set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT ' + 'environment variable.');\n      }\n\n      _this.projectId = projectId;\n      return _this.projectId;\n    });\n  };\n  /**\n   * Lists up to 100 Firebase apps for a specified platform, associated with this Firebase project.\n   */\n\n\n  ProjectManagement.prototype.listPlatformApps = function (platform, callerName) {\n    var _this = this;\n\n    return this.getResourceName().then(function (resourceName) {\n      return platform === 'android' ? _this.requestHandler.listAndroidApps(resourceName) : _this.requestHandler.listIosApps(resourceName);\n    }).then(function (responseData) {\n      _this.assertListAppsResponseData(responseData, callerName);\n\n      if (!responseData.apps) {\n        return [];\n      }\n\n      return responseData.apps.map(function (appJson) {\n        project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(appJson.appId), responseData, \"\\\"apps[].appId\\\" field must be present in the \" + callerName + \" response data.\");\n\n        if (platform === 'android') {\n          return new android_app_1.AndroidApp(appJson.appId, _this.requestHandler);\n        } else {\n          return new ios_app_1.IosApp(appJson.appId, _this.requestHandler);\n        }\n      });\n    });\n  };\n\n  ProjectManagement.prototype.assertListAppsResponseData = function (responseData, callerName) {\n    project_management_api_request_1.assertServerResponse(validator.isNonNullObject(responseData), responseData, callerName + \"'s responseData must be a non-null object.\");\n\n    if (responseData.apps) {\n      project_management_api_request_1.assertServerResponse(validator.isArray(responseData.apps), responseData, \"\\\"apps\\\" field must be present in the \" + callerName + \" response data.\");\n    }\n  };\n\n  return ProjectManagement;\n}();\n\nexports.ProjectManagement = ProjectManagement;","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/node_modules/firebase-admin/lib/project-management/project-management.js"],"names":["Object","defineProperty","exports","value","error_1","require","utils","validator","android_app_1","ios_app_1","project_management_api_request_1","app_metadata_1","ProjectManagementInternals","prototype","delete","Promise","resolve","ProjectManagement","app","INTERNAL","isNonNullObject","FirebaseProjectManagementError","requestHandler","ProjectManagementRequestHandler","listAndroidApps","listPlatformApps","listIosApps","androidApp","appId","AndroidApp","iosApp","IosApp","shaCertificate","shaHash","ShaCertificate","createAndroidApp","packageName","displayName","_this","getResourceName","then","resourceName","responseData","assertServerResponse","isNonEmptyString","createIosApp","bundleId","listAppMetadata","getProjectId","projectId","transformResponseToAppMetadata","setDisplayName","newDisplayName","assertListAppsResponseData","apps","map","appJson","platform","metadata","AppPlatform","PLATFORM_UNKNOWN","name","findProjectId","callerName","isArray"],"mappings":"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","sourcesContent":["/*! firebase-admin v8.9.2 */\n\"use strict\";\n/*!\n * Copyright 2018 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar error_1 = require(\"../utils/error\");\nvar utils = require(\"../utils/index\");\nvar validator = require(\"../utils/validator\");\nvar android_app_1 = require(\"./android-app\");\nvar ios_app_1 = require(\"./ios-app\");\nvar project_management_api_request_1 = require(\"./project-management-api-request\");\nvar app_metadata_1 = require(\"./app-metadata\");\n/**\n * Internals of a Project Management instance.\n */\nvar ProjectManagementInternals = /** @class */ (function () {\n    function ProjectManagementInternals() {\n    }\n    /**\n     * Deletes the service and its associated resources.\n     *\n     * @return {Promise<void>} An empty Promise that will be resolved when the service is deleted.\n     */\n    ProjectManagementInternals.prototype.delete = function () {\n        // There are no resources to clean up.\n        return Promise.resolve();\n    };\n    return ProjectManagementInternals;\n}());\n/**\n * ProjectManagement service bound to the provided app.\n */\nvar ProjectManagement = /** @class */ (function () {\n    /**\n     * @param {object} app The app for this ProjectManagement service.\n     * @constructor\n     */\n    function ProjectManagement(app) {\n        this.app = app;\n        this.INTERNAL = new ProjectManagementInternals();\n        if (!validator.isNonNullObject(app) || !('options' in app)) {\n            throw new error_1.FirebaseProjectManagementError('invalid-argument', 'First argument passed to admin.projectManagement() must be a valid Firebase app '\n                + 'instance.');\n        }\n        this.requestHandler = new project_management_api_request_1.ProjectManagementRequestHandler(app);\n    }\n    /**\n     * Lists up to 100 Firebase Android apps associated with this Firebase project.\n     */\n    ProjectManagement.prototype.listAndroidApps = function () {\n        return this.listPlatformApps('android', 'listAndroidApps()');\n    };\n    /**\n     * Lists up to 100 Firebase iOS apps associated with this Firebase project.\n     */\n    ProjectManagement.prototype.listIosApps = function () {\n        return this.listPlatformApps('ios', 'listIosApps()');\n    };\n    /**\n     * Returns an AndroidApp object for the given appId. No RPC is made.\n     */\n    ProjectManagement.prototype.androidApp = function (appId) {\n        return new android_app_1.AndroidApp(appId, this.requestHandler);\n    };\n    /**\n     * Returns an IosApp object for the given appId. No RPC is made.\n     */\n    ProjectManagement.prototype.iosApp = function (appId) {\n        return new ios_app_1.IosApp(appId, this.requestHandler);\n    };\n    /**\n     * Returns a ShaCertificate object for the given shaHash. No RPC is made.\n     */\n    ProjectManagement.prototype.shaCertificate = function (shaHash) {\n        return new android_app_1.ShaCertificate(shaHash);\n    };\n    /**\n     * Creates a new Firebase Android app, associated with this Firebase project.\n     */\n    ProjectManagement.prototype.createAndroidApp = function (packageName, displayName) {\n        var _this = this;\n        return this.getResourceName()\n            .then(function (resourceName) {\n            return _this.requestHandler.createAndroidApp(resourceName, packageName, displayName);\n        })\n            .then(function (responseData) {\n            project_management_api_request_1.assertServerResponse(validator.isNonNullObject(responseData), responseData, 'createAndroidApp()\\'s responseData must be a non-null object.');\n            project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(responseData.appId), responseData, \"\\\"responseData.appId\\\" field must be present in createAndroidApp()'s response data.\");\n            return new android_app_1.AndroidApp(responseData.appId, _this.requestHandler);\n        });\n    };\n    /**\n     * Creates a new Firebase iOS app, associated with this Firebase project.\n     */\n    ProjectManagement.prototype.createIosApp = function (bundleId, displayName) {\n        var _this = this;\n        return this.getResourceName()\n            .then(function (resourceName) {\n            return _this.requestHandler.createIosApp(resourceName, bundleId, displayName);\n        })\n            .then(function (responseData) {\n            project_management_api_request_1.assertServerResponse(validator.isNonNullObject(responseData), responseData, 'createIosApp()\\'s responseData must be a non-null object.');\n            project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(responseData.appId), responseData, \"\\\"responseData.appId\\\" field must be present in createIosApp()'s response data.\");\n            return new ios_app_1.IosApp(responseData.appId, _this.requestHandler);\n        });\n    };\n    /**\n     * Lists up to 100 Firebase apps associated with this Firebase project.\n     */\n    ProjectManagement.prototype.listAppMetadata = function () {\n        var _this = this;\n        return this.getResourceName()\n            .then(function (resourceName) {\n            return _this.requestHandler.listAppMetadata(resourceName);\n        })\n            .then(function (responseData) {\n            return _this.getProjectId()\n                .then(function (projectId) {\n                return _this.transformResponseToAppMetadata(responseData, projectId);\n            });\n        });\n    };\n    /**\n     * Update display name of the project\n     */\n    ProjectManagement.prototype.setDisplayName = function (newDisplayName) {\n        var _this = this;\n        return this.getResourceName()\n            .then(function (resourceName) {\n            return _this.requestHandler.setDisplayName(resourceName, newDisplayName);\n        });\n    };\n    ProjectManagement.prototype.transformResponseToAppMetadata = function (responseData, projectId) {\n        this.assertListAppsResponseData(responseData, 'listAppMetadata()');\n        if (!responseData.apps) {\n            return [];\n        }\n        return responseData.apps.map(function (appJson) {\n            project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(appJson.appId), responseData, \"\\\"apps[].appId\\\" field must be present in the listAppMetadata() response data.\");\n            project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(appJson.platform), responseData, \"\\\"apps[].platform\\\" field must be present in the listAppMetadata() response data.\");\n            var metadata = {\n                appId: appJson.appId,\n                platform: app_metadata_1.AppPlatform[appJson.platform] || app_metadata_1.AppPlatform.PLATFORM_UNKNOWN,\n                projectId: projectId,\n                resourceName: appJson.name,\n            };\n            if (appJson.displayName) {\n                metadata.displayName = appJson.displayName;\n            }\n            return metadata;\n        });\n    };\n    ProjectManagement.prototype.getResourceName = function () {\n        return this.getProjectId()\n            .then(function (projectId) {\n            return \"projects/\" + projectId;\n        });\n    };\n    ProjectManagement.prototype.getProjectId = function () {\n        var _this = this;\n        if (this.projectId) {\n            return Promise.resolve(this.projectId);\n        }\n        return utils.findProjectId(this.app)\n            .then(function (projectId) {\n            // Assert that a specific project ID was provided within the app.\n            if (!validator.isNonEmptyString(projectId)) {\n                throw new error_1.FirebaseProjectManagementError('invalid-project-id', 'Failed to determine project ID. Initialize the SDK with service account credentials, or '\n                    + 'set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT '\n                    + 'environment variable.');\n            }\n            _this.projectId = projectId;\n            return _this.projectId;\n        });\n    };\n    /**\n     * Lists up to 100 Firebase apps for a specified platform, associated with this Firebase project.\n     */\n    ProjectManagement.prototype.listPlatformApps = function (platform, callerName) {\n        var _this = this;\n        return this.getResourceName()\n            .then(function (resourceName) {\n            return (platform === 'android') ?\n                _this.requestHandler.listAndroidApps(resourceName)\n                : _this.requestHandler.listIosApps(resourceName);\n        })\n            .then(function (responseData) {\n            _this.assertListAppsResponseData(responseData, callerName);\n            if (!responseData.apps) {\n                return [];\n            }\n            return responseData.apps.map(function (appJson) {\n                project_management_api_request_1.assertServerResponse(validator.isNonEmptyString(appJson.appId), responseData, \"\\\"apps[].appId\\\" field must be present in the \" + callerName + \" response data.\");\n                if (platform === 'android') {\n                    return new android_app_1.AndroidApp(appJson.appId, _this.requestHandler);\n                }\n                else {\n                    return new ios_app_1.IosApp(appJson.appId, _this.requestHandler);\n                }\n            });\n        });\n    };\n    ProjectManagement.prototype.assertListAppsResponseData = function (responseData, callerName) {\n        project_management_api_request_1.assertServerResponse(validator.isNonNullObject(responseData), responseData, callerName + \"'s responseData must be a non-null object.\");\n        if (responseData.apps) {\n            project_management_api_request_1.assertServerResponse(validator.isArray(responseData.apps), responseData, \"\\\"apps\\\" field must be present in the \" + callerName + \" response data.\");\n        }\n    };\n    return ProjectManagement;\n}());\nexports.ProjectManagement = ProjectManagement;\n"]},"metadata":{},"sourceType":"script"}