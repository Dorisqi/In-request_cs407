{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport { defaultProps } from '../../default-props';\nimport { ThemeContext } from '../../contexts';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { backgroundIsDark, findScrollParents, findVisibleParent, parseMetricToNum } from '../../utils';\nimport { Box } from '../Box';\nimport { Keyboard } from '../Keyboard';\nimport { StyledDrop } from './StyledDrop'; // using react synthetic event to be able to stop propagation that\n// would otherwise close the layer on ESC.\n\nvar preventLayerClose = function preventLayerClose(event) {\n  var key = event.keyCode ? event.keyCode : event.which;\n\n  if (key === 27) {\n    event.stopPropagation();\n  }\n};\n\nvar DropContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(DropContainer, _Component);\n\n  function DropContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"dropRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"addScrollListener\", function () {\n      var dropTarget = _this.props.dropTarget;\n      _this.scrollParents = findScrollParents(dropTarget);\n\n      _this.scrollParents.forEach(function (scrollParent) {\n        return scrollParent.addEventListener('scroll', _this.place);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeScrollListener\", function () {\n      _this.scrollParents.forEach(function (scrollParent) {\n        return scrollParent.removeEventListener('scroll', _this.place);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickDocument\", function (event) {\n      var _this$props = _this.props,\n          dropTarget = _this$props.dropTarget,\n          onClickOutside = _this$props.onClickOutside;\n      var dropTargetNode = dropTarget;\n      var dropNode = _this.dropRef.current;\n\n      if (onClickOutside && dropNode && // need this for ie11\n      !dropTargetNode.contains(event.target) && !dropNode.contains(event.target)) {\n        onClickOutside();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function () {\n      _this.removeScrollListener();\n\n      _this.addScrollListener();\n\n      _this.place(false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"place\", function (preserveHeight) {\n      var _this$props2 = _this.props,\n          align = _this$props2.align,\n          dropTarget = _this$props2.dropTarget,\n          responsive = _this$props2.responsive,\n          stretch = _this$props2.stretch,\n          theme = _this$props2.theme;\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var target = dropTarget;\n      var container = _this.dropRef.current;\n\n      if (container && target) {\n        // clear prior styling\n        container.style.left = '';\n        container.style.top = '';\n        container.style.bottom = '';\n        container.style.width = '';\n\n        if (!preserveHeight) {\n          container.style.maxHeight = '';\n        } // get bounds\n\n\n        var targetRect = findVisibleParent(target).getBoundingClientRect();\n        var containerRect = container.getBoundingClientRect(); // determine width\n\n        var width = Math.min(stretch ? Math.max(targetRect.width, containerRect.width) : containerRect.width, windowWidth); // set left position\n\n        var left;\n\n        if (align.left) {\n          if (align.left === 'left') {\n            left = targetRect.left;\n          } else if (align.left === 'right') {\n            left = targetRect.left + targetRect.width;\n          }\n        } else if (align.right) {\n          if (align.right === 'left') {\n            left = targetRect.left - width;\n          } else if (align.right === 'right') {\n            left = targetRect.left + targetRect.width - width;\n          }\n        } else {\n          left = targetRect.left + targetRect.width / 2 - width / 2;\n        }\n\n        if (left + width > windowWidth) {\n          left -= left + width - windowWidth;\n        } else if (left < 0) {\n          left = 0;\n        } // set top or bottom position\n\n\n        var top;\n        var bottom;\n        var maxHeight = containerRect.height;\n\n        if (align.top) {\n          if (align.top === 'top') {\n            top = targetRect.top;\n          } else {\n            top = targetRect.bottom;\n          } // Calculate visible area underneath the control w.r.t window height\n\n\n          var percentVisibleAreaBelow = 100 - targetRect.bottom / windowHeight * 100; // Check whether it is within 20% from bottom of the window or visible\n          // area to flip the control\n          // DropContainer doesn't fit well within visible area when\n          // percentVisibleAreaBelow value<=20%\n          // There is enough space from DropContainer to bottom of the window\n          // when percentVisibleAreaBelow>20%.\n\n          if (windowHeight === top || percentVisibleAreaBelow <= 20) {\n            // We need more room than we have.\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              bottom = targetRect.top;\n            } else {\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else if (top > 0) {\n            maxHeight = windowHeight - top;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else {\n            maxHeight = windowHeight - top;\n          }\n        } else if (align.bottom) {\n          if (align.bottom === 'bottom') {\n            bottom = targetRect.bottom;\n          } else {\n            bottom = targetRect.top;\n          }\n\n          maxHeight = bottom;\n          container.style.maxHeight = maxHeight + \"px\";\n        } else {\n          // center\n          top = targetRect.top + targetRect.height / 2 - containerRect.height / 2;\n          maxHeight = windowHeight - top;\n        } // if we can't fit it all, or we're rather close,\n        // see if there's more room the other direction\n\n\n        if (responsive && (containerRect.height > maxHeight || maxHeight < windowHeight / 10)) {\n          // We need more room than we have.\n          if (align.top && top > windowHeight / 2) {\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              // top = Math.max(targetRect.top - containerRect.height, 0);\n              // maxHeight = targetRect.top - top;\n              bottom = targetRect.top;\n            } else {\n              // top = Math.max(targetRect.bottom - containerRect.height, 0);\n              // maxHeight = targetRect.bottom - top;\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n          } else if (align.bottom && maxHeight < windowHeight / 2) {\n            // We put it above but there's more room below, put it below\n            bottom = '';\n\n            if (align.bottom === 'bottom') {\n              top = targetRect.top;\n            } else {\n              top = targetRect.bottom;\n            }\n\n            maxHeight = windowHeight - top;\n          }\n        }\n\n        container.style.left = left + \"px\";\n\n        if (stretch) {\n          // offset width by 0.1 to avoid a bug in ie11 that\n          // unnecessarily wraps the text if width is the same\n          // NOTE: turned off for now\n          container.style.width = width + 0.1 + \"px\";\n        } // the (position:absolute + scrollTop)\n        // is presenting issues with desktop scroll flickering\n\n\n        if (top !== '') {\n          container.style.top = top + \"px\";\n        }\n\n        if (bottom !== '') {\n          container.style.bottom = windowHeight - bottom + \"px\";\n        }\n\n        if (!preserveHeight) {\n          if (theme.drop && theme.drop.maxHeight) {\n            maxHeight = Math.min(maxHeight, parseMetricToNum(theme.drop.maxHeight));\n          }\n\n          container.style.maxHeight = maxHeight + \"px\";\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEsc\", function (event) {\n      var onEsc = _this.props.onEsc;\n      event.stopPropagation();\n\n      if (onEsc) {\n        onEsc(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"preventClickBubbling\", function (event) {\n      event.stopPropagation();\n      /**\n       * the React event system actually listens to all events at the top level\n       * and then handles its own bubbling / capturing virtually. This means that\n       * even if we call stopPropagation, it only affects the React synthetic\n       * event, and the native event still bubbles upward.\n       * Any code that uses native events (like the close listener in this class)\n       * will still get the bubbled event, unless we also call\n       * event.nativeEvent.stopImmediatePropagation, which bridges the gap from\n       * React synthetic event to native DOM event.\n       */\n\n      event.nativeEvent.stopImmediatePropagation();\n    });\n\n    return _this;\n  }\n\n  var _proto = DropContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var restrictFocus = this.props.restrictFocus;\n    this.addScrollListener();\n    window.addEventListener('resize', this.onResize);\n    document.addEventListener('mousedown', this.onClickDocument);\n    this.place(false);\n\n    if (restrictFocus) {\n      this.dropRef.current.focus();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    this.place(true);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.removeScrollListener();\n    window.removeEventListener('resize', this.onResize);\n    document.removeEventListener('mousedown', this.onClickDocument);\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        alignProp = _this$props3.align,\n        children = _this$props3.children,\n        elevation = _this$props3.elevation,\n        onClickOutside = _this$props3.onClickOutside,\n        onEsc = _this$props3.onEsc,\n        onKeyDown = _this$props3.onKeyDown,\n        plain = _this$props3.plain,\n        propsTheme = _this$props3.theme,\n        rest = _objectWithoutPropertiesLoose(_this$props3, [\"align\", \"children\", \"elevation\", \"onClickOutside\", \"onEsc\", \"onKeyDown\", \"plain\", \"theme\"]);\n\n    var theme = this.context || propsTheme;\n    var content = React.createElement(StyledDrop, _extends({\n      as: Box,\n      plain: plain,\n      elevation: !plain ? elevation || theme.global.drop.shadowSize || 'small' : undefined,\n      tabIndex: \"-1\",\n      ref: this.dropRef,\n      alignProp: alignProp,\n      onMouseDown: this.preventClickBubbling\n    }, rest), children);\n\n    if (theme.global.drop.background) {\n      var dark = backgroundIsDark(theme.global.drop.background, theme);\n\n      if (dark !== undefined && dark !== theme.dark) {\n        content = React.createElement(ThemeContext.Provider, {\n          value: _extends({}, theme, {\n            dark: dark\n          })\n        }, content);\n      }\n    }\n\n    return React.createElement(FocusedContainer, {\n      onKeyDown: onEsc && preventLayerClose\n    }, React.createElement(Keyboard, {\n      onEsc: onEsc && this.onEsc,\n      onKeyDown: onKeyDown,\n      target: \"document\"\n    }, content));\n  };\n\n  return DropContainer;\n}(Component);\n\n_defineProperty(DropContainer, \"contextType\", ThemeContext);\n\n_defineProperty(DropContainer, \"defaultProps\", {\n  align: {\n    top: 'top',\n    left: 'left'\n  },\n  overflow: 'auto',\n  stretch: 'width'\n});\n\nObject.setPrototypeOf(DropContainer.defaultProps, defaultProps);\nexport { DropContainer };","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/node_modules/grommet/es6/components/Drop/DropContainer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","React","Component","defaultProps","ThemeContext","FocusedContainer","backgroundIsDark","findScrollParents","findVisibleParent","parseMetricToNum","Box","Keyboard","StyledDrop","preventLayerClose","event","keyCode","which","stopPropagation","DropContainer","_Component","_this","_len","args","Array","_key","concat","createRef","dropTarget","props","scrollParents","forEach","scrollParent","addEventListener","place","removeEventListener","_this$props","onClickOutside","dropTargetNode","dropNode","dropRef","current","contains","removeScrollListener","addScrollListener","preserveHeight","_this$props2","align","responsive","stretch","theme","windowWidth","window","innerWidth","windowHeight","innerHeight","container","style","left","top","bottom","width","maxHeight","targetRect","getBoundingClientRect","containerRect","Math","min","max","right","height","percentVisibleAreaBelow","drop","onEsc","nativeEvent","stopImmediatePropagation","_proto","componentDidMount","restrictFocus","onResize","document","onClickDocument","focus","componentDidUpdate","componentWillUnmount","render","_this$props3","alignProp","children","elevation","onKeyDown","plain","propsTheme","rest","context","content","createElement","as","global","shadowSize","undefined","tabIndex","ref","onMouseDown","preventClickBubbling","background","dark","Provider","overflow","setPrototypeOf"],"mappings":"AAAA,SAASA,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,SAASQ,6BAAT,CAAuCN,MAAvC,EAA+CO,QAA/C,EAAyD;AAAE,MAAIP,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIJ,MAAM,GAAG,EAAb;AAAiB,MAAIY,UAAU,GAAGd,MAAM,CAACe,IAAP,CAAYT,MAAZ,CAAjB;AAAsC,MAAIC,GAAJ,EAASJ,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGW,UAAU,CAACT,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AAAEI,IAAAA,GAAG,GAAGO,UAAU,CAACX,CAAD,CAAhB;AAAqB,QAAIU,QAAQ,CAACG,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAUL,IAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;;AAAC,SAAOL,MAAP;AAAgB;;AAEnT,SAASe,sBAAT,CAAgCC,IAAhC,EAAsC;AAAE,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOD,IAAP;AAAc;;AAEtK,SAASE,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;AAAED,EAAAA,QAAQ,CAACb,SAAT,GAAqBR,MAAM,CAACuB,MAAP,CAAcD,UAAU,CAACd,SAAzB,CAArB;AAA0Da,EAAAA,QAAQ,CAACb,SAAT,CAAmBgB,WAAnB,GAAiCH,QAAjC;AAA2CA,EAAAA,QAAQ,CAACI,SAAT,GAAqBH,UAArB;AAAkC;;AAEvL,SAASI,eAAT,CAAyBC,GAAzB,EAA8BpB,GAA9B,EAAmCqB,KAAnC,EAA0C;AAAE,MAAIrB,GAAG,IAAIoB,GAAX,EAAgB;AAAE3B,IAAAA,MAAM,CAAC6B,cAAP,CAAsBF,GAAtB,EAA2BpB,GAA3B,EAAgC;AAAEqB,MAAAA,KAAK,EAAEA,KAAT;AAAgBE,MAAAA,UAAU,EAAE,IAA5B;AAAkCC,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAEL,IAAAA,GAAG,CAACpB,GAAD,CAAH,GAAWqB,KAAX;AAAmB;;AAAC,SAAOD,GAAP;AAAa;;AAEjN,OAAOM,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,gBAAT,QAAiC,qBAAjC;AACA,SAASC,gBAAT,EAA2BC,iBAA3B,EAA8CC,iBAA9C,EAAiEC,gBAAjE,QAAyF,aAAzF;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,UAAT,QAA2B,cAA3B,C,CAA2C;AAC3C;;AAEA,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,KAA3B,EAAkC;AACxD,MAAIvC,GAAG,GAAGuC,KAAK,CAACC,OAAN,GAAgBD,KAAK,CAACC,OAAtB,GAAgCD,KAAK,CAACE,KAAhD;;AAEA,MAAIzC,GAAG,KAAK,EAAZ,EAAgB;AACduC,IAAAA,KAAK,CAACG,eAAN;AACD;AACF,CAND;;AAQA,IAAIC,aAAa;AACjB;AACA,UAAUC,UAAV,EAAsB;AACpB/B,EAAAA,cAAc,CAAC8B,aAAD,EAAgBC,UAAhB,CAAd;;AAEA,WAASD,aAAT,GAAyB;AACvB,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGjD,SAAS,CAACC,MAArB,EAA6BiD,IAAI,GAAG,IAAIC,KAAJ,CAAUF,IAAV,CAApC,EAAqDG,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGH,IAA3E,EAAiFG,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAapD,SAAS,CAACoD,IAAD,CAAtB;AACD;;AAEDJ,IAAAA,KAAK,GAAGD,UAAU,CAACzC,IAAX,CAAgBC,KAAhB,CAAsBwC,UAAtB,EAAkC,CAAC,IAAD,EAAOM,MAAP,CAAcH,IAAd,CAAlC,KAA0D,IAAlE;;AAEA5B,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,SAAhC,EAA2CnB,KAAK,CAACyB,SAAN,EAA3C,CAAf;;AAEAhC,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,mBAAhC,EAAqD,YAAY;AAC9E,UAAIO,UAAU,GAAGP,KAAK,CAACQ,KAAN,CAAYD,UAA7B;AACAP,MAAAA,KAAK,CAACS,aAAN,GAAsBtB,iBAAiB,CAACoB,UAAD,CAAvC;;AAEAP,MAAAA,KAAK,CAACS,aAAN,CAAoBC,OAApB,CAA4B,UAAUC,YAAV,EAAwB;AAClD,eAAOA,YAAY,CAACC,gBAAb,CAA8B,QAA9B,EAAwCZ,KAAK,CAACa,KAA9C,CAAP;AACD,OAFD;AAGD,KAPc,CAAf;;AASAvC,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,sBAAhC,EAAwD,YAAY;AACjFA,MAAAA,KAAK,CAACS,aAAN,CAAoBC,OAApB,CAA4B,UAAUC,YAAV,EAAwB;AAClD,eAAOA,YAAY,CAACG,mBAAb,CAAiC,QAAjC,EAA2Cd,KAAK,CAACa,KAAjD,CAAP;AACD,OAFD;AAGD,KAJc,CAAf;;AAMAvC,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,iBAAhC,EAAmD,UAAUN,KAAV,EAAiB;AACjF,UAAIqB,WAAW,GAAGf,KAAK,CAACQ,KAAxB;AAAA,UACID,UAAU,GAAGQ,WAAW,CAACR,UAD7B;AAAA,UAEIS,cAAc,GAAGD,WAAW,CAACC,cAFjC;AAGA,UAAIC,cAAc,GAAGV,UAArB;AACA,UAAIW,QAAQ,GAAGlB,KAAK,CAACmB,OAAN,CAAcC,OAA7B;;AAEA,UAAIJ,cAAc,IAAIE,QAAlB,IAA8B;AAClC,OAACD,cAAc,CAACI,QAAf,CAAwB3B,KAAK,CAAC5C,MAA9B,CADG,IACsC,CAACoE,QAAQ,CAACG,QAAT,CAAkB3B,KAAK,CAAC5C,MAAxB,CAD3C,EAC4E;AAC1EkE,QAAAA,cAAc;AACf;AACF,KAXc,CAAf;;AAaA1C,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,UAAhC,EAA4C,YAAY;AACrEA,MAAAA,KAAK,CAACsB,oBAAN;;AAEAtB,MAAAA,KAAK,CAACuB,iBAAN;;AAEAvB,MAAAA,KAAK,CAACa,KAAN,CAAY,KAAZ;AACD,KANc,CAAf;;AAQAvC,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,OAAhC,EAAyC,UAAUwB,cAAV,EAA0B;AAChF,UAAIC,YAAY,GAAGzB,KAAK,CAACQ,KAAzB;AAAA,UACIkB,KAAK,GAAGD,YAAY,CAACC,KADzB;AAAA,UAEInB,UAAU,GAAGkB,YAAY,CAAClB,UAF9B;AAAA,UAGIoB,UAAU,GAAGF,YAAY,CAACE,UAH9B;AAAA,UAIIC,OAAO,GAAGH,YAAY,CAACG,OAJ3B;AAAA,UAKIC,KAAK,GAAGJ,YAAY,CAACI,KALzB;AAMA,UAAIC,WAAW,GAAGC,MAAM,CAACC,UAAzB;AACA,UAAIC,YAAY,GAAGF,MAAM,CAACG,WAA1B;AACA,UAAIpF,MAAM,GAAGyD,UAAb;AACA,UAAI4B,SAAS,GAAGnC,KAAK,CAACmB,OAAN,CAAcC,OAA9B;;AAEA,UAAIe,SAAS,IAAIrF,MAAjB,EAAyB;AACvB;AACAqF,QAAAA,SAAS,CAACC,KAAV,CAAgBC,IAAhB,GAAuB,EAAvB;AACAF,QAAAA,SAAS,CAACC,KAAV,CAAgBE,GAAhB,GAAsB,EAAtB;AACAH,QAAAA,SAAS,CAACC,KAAV,CAAgBG,MAAhB,GAAyB,EAAzB;AACAJ,QAAAA,SAAS,CAACC,KAAV,CAAgBI,KAAhB,GAAwB,EAAxB;;AAEA,YAAI,CAAChB,cAAL,EAAqB;AACnBW,UAAAA,SAAS,CAACC,KAAV,CAAgBK,SAAhB,GAA4B,EAA5B;AACD,SATsB,CASrB;;;AAGF,YAAIC,UAAU,GAAGtD,iBAAiB,CAACtC,MAAD,CAAjB,CAA0B6F,qBAA1B,EAAjB;AACA,YAAIC,aAAa,GAAGT,SAAS,CAACQ,qBAAV,EAApB,CAbuB,CAagC;;AAEvD,YAAIH,KAAK,GAAGK,IAAI,CAACC,GAAL,CAASlB,OAAO,GAAGiB,IAAI,CAACE,GAAL,CAASL,UAAU,CAACF,KAApB,EAA2BI,aAAa,CAACJ,KAAzC,CAAH,GAAqDI,aAAa,CAACJ,KAAnF,EAA0FV,WAA1F,CAAZ,CAfuB,CAe6F;;AAEpH,YAAIO,IAAJ;;AAEA,YAAIX,KAAK,CAACW,IAAV,EAAgB;AACd,cAAIX,KAAK,CAACW,IAAN,KAAe,MAAnB,EAA2B;AACzBA,YAAAA,IAAI,GAAGK,UAAU,CAACL,IAAlB;AACD,WAFD,MAEO,IAAIX,KAAK,CAACW,IAAN,KAAe,OAAnB,EAA4B;AACjCA,YAAAA,IAAI,GAAGK,UAAU,CAACL,IAAX,GAAkBK,UAAU,CAACF,KAApC;AACD;AACF,SAND,MAMO,IAAId,KAAK,CAACsB,KAAV,EAAiB;AACtB,cAAItB,KAAK,CAACsB,KAAN,KAAgB,MAApB,EAA4B;AAC1BX,YAAAA,IAAI,GAAGK,UAAU,CAACL,IAAX,GAAkBG,KAAzB;AACD,WAFD,MAEO,IAAId,KAAK,CAACsB,KAAN,KAAgB,OAApB,EAA6B;AAClCX,YAAAA,IAAI,GAAGK,UAAU,CAACL,IAAX,GAAkBK,UAAU,CAACF,KAA7B,GAAqCA,KAA5C;AACD;AACF,SANM,MAMA;AACLH,UAAAA,IAAI,GAAGK,UAAU,CAACL,IAAX,GAAkBK,UAAU,CAACF,KAAX,GAAmB,CAArC,GAAyCA,KAAK,GAAG,CAAxD;AACD;;AAED,YAAIH,IAAI,GAAGG,KAAP,GAAeV,WAAnB,EAAgC;AAC9BO,UAAAA,IAAI,IAAIA,IAAI,GAAGG,KAAP,GAAeV,WAAvB;AACD,SAFD,MAEO,IAAIO,IAAI,GAAG,CAAX,EAAc;AACnBA,UAAAA,IAAI,GAAG,CAAP;AACD,SAvCsB,CAuCrB;;;AAGF,YAAIC,GAAJ;AACA,YAAIC,MAAJ;AACA,YAAIE,SAAS,GAAGG,aAAa,CAACK,MAA9B;;AAEA,YAAIvB,KAAK,CAACY,GAAV,EAAe;AACb,cAAIZ,KAAK,CAACY,GAAN,KAAc,KAAlB,EAAyB;AACvBA,YAAAA,GAAG,GAAGI,UAAU,CAACJ,GAAjB;AACD,WAFD,MAEO;AACLA,YAAAA,GAAG,GAAGI,UAAU,CAACH,MAAjB;AACD,WALY,CAKX;;;AAGF,cAAIW,uBAAuB,GAAG,MAAMR,UAAU,CAACH,MAAX,GAAoBN,YAApB,GAAmC,GAAvE,CARa,CAQ+D;AAC5E;AACA;AACA;AACA;AACA;;AAEA,cAAIA,YAAY,KAAKK,GAAjB,IAAwBY,uBAAuB,IAAI,EAAvD,EAA2D;AACzD;AACA;AACAZ,YAAAA,GAAG,GAAG,EAAN;;AAEA,gBAAIZ,KAAK,CAACY,GAAN,KAAc,QAAlB,EAA4B;AAC1BC,cAAAA,MAAM,GAAGG,UAAU,CAACJ,GAApB;AACD,aAFD,MAEO;AACLC,cAAAA,MAAM,GAAGG,UAAU,CAACH,MAApB;AACD;;AAEDE,YAAAA,SAAS,GAAGF,MAAZ;AACAJ,YAAAA,SAAS,CAACC,KAAV,CAAgBK,SAAhB,GAA4BA,SAAS,GAAG,IAAxC;AACD,WAbD,MAaO,IAAIH,GAAG,GAAG,CAAV,EAAa;AAClBG,YAAAA,SAAS,GAAGR,YAAY,GAAGK,GAA3B;AACAH,YAAAA,SAAS,CAACC,KAAV,CAAgBK,SAAhB,GAA4BA,SAAS,GAAG,IAAxC;AACD,WAHM,MAGA;AACLA,YAAAA,SAAS,GAAGR,YAAY,GAAGK,GAA3B;AACD;AACF,SAlCD,MAkCO,IAAIZ,KAAK,CAACa,MAAV,EAAkB;AACvB,cAAIb,KAAK,CAACa,MAAN,KAAiB,QAArB,EAA+B;AAC7BA,YAAAA,MAAM,GAAGG,UAAU,CAACH,MAApB;AACD,WAFD,MAEO;AACLA,YAAAA,MAAM,GAAGG,UAAU,CAACJ,GAApB;AACD;;AAEDG,UAAAA,SAAS,GAAGF,MAAZ;AACAJ,UAAAA,SAAS,CAACC,KAAV,CAAgBK,SAAhB,GAA4BA,SAAS,GAAG,IAAxC;AACD,SATM,MASA;AACL;AACAH,UAAAA,GAAG,GAAGI,UAAU,CAACJ,GAAX,GAAiBI,UAAU,CAACO,MAAX,GAAoB,CAArC,GAAyCL,aAAa,CAACK,MAAd,GAAuB,CAAtE;AACAR,UAAAA,SAAS,GAAGR,YAAY,GAAGK,GAA3B;AACD,SA7FsB,CA6FrB;AACF;;;AAGA,YAAIX,UAAU,KAAKiB,aAAa,CAACK,MAAd,GAAuBR,SAAvB,IAAoCA,SAAS,GAAGR,YAAY,GAAG,EAApE,CAAd,EAAuF;AACrF;AACA,cAAIP,KAAK,CAACY,GAAN,IAAaA,GAAG,GAAGL,YAAY,GAAG,CAAtC,EAAyC;AACvC;AACAK,YAAAA,GAAG,GAAG,EAAN;;AAEA,gBAAIZ,KAAK,CAACY,GAAN,KAAc,QAAlB,EAA4B;AAC1B;AACA;AACAC,cAAAA,MAAM,GAAGG,UAAU,CAACJ,GAApB;AACD,aAJD,MAIO;AACL;AACA;AACAC,cAAAA,MAAM,GAAGG,UAAU,CAACH,MAApB;AACD;;AAEDE,YAAAA,SAAS,GAAGF,MAAZ;AACD,WAfD,MAeO,IAAIb,KAAK,CAACa,MAAN,IAAgBE,SAAS,GAAGR,YAAY,GAAG,CAA/C,EAAkD;AACvD;AACAM,YAAAA,MAAM,GAAG,EAAT;;AAEA,gBAAIb,KAAK,CAACa,MAAN,KAAiB,QAArB,EAA+B;AAC7BD,cAAAA,GAAG,GAAGI,UAAU,CAACJ,GAAjB;AACD,aAFD,MAEO;AACLA,cAAAA,GAAG,GAAGI,UAAU,CAACH,MAAjB;AACD;;AAEDE,YAAAA,SAAS,GAAGR,YAAY,GAAGK,GAA3B;AACD;AACF;;AAEDH,QAAAA,SAAS,CAACC,KAAV,CAAgBC,IAAhB,GAAuBA,IAAI,GAAG,IAA9B;;AAEA,YAAIT,OAAJ,EAAa;AACX;AACA;AACA;AACAO,UAAAA,SAAS,CAACC,KAAV,CAAgBI,KAAhB,GAAwBA,KAAK,GAAG,GAAR,GAAc,IAAtC;AACD,SAvIsB,CAuIrB;AACF;;;AAGA,YAAIF,GAAG,KAAK,EAAZ,EAAgB;AACdH,UAAAA,SAAS,CAACC,KAAV,CAAgBE,GAAhB,GAAsBA,GAAG,GAAG,IAA5B;AACD;;AAED,YAAIC,MAAM,KAAK,EAAf,EAAmB;AACjBJ,UAAAA,SAAS,CAACC,KAAV,CAAgBG,MAAhB,GAAyBN,YAAY,GAAGM,MAAf,GAAwB,IAAjD;AACD;;AAED,YAAI,CAACf,cAAL,EAAqB;AACnB,cAAIK,KAAK,CAACsB,IAAN,IAActB,KAAK,CAACsB,IAAN,CAAWV,SAA7B,EAAwC;AACtCA,YAAAA,SAAS,GAAGI,IAAI,CAACC,GAAL,CAASL,SAAT,EAAoBpD,gBAAgB,CAACwC,KAAK,CAACsB,IAAN,CAAWV,SAAZ,CAApC,CAAZ;AACD;;AAEDN,UAAAA,SAAS,CAACC,KAAV,CAAgBK,SAAhB,GAA4BA,SAAS,GAAG,IAAxC;AACD;AACF;AACF,KAvKc,CAAf;;AAyKAnE,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,OAAhC,EAAyC,UAAUN,KAAV,EAAiB;AACvE,UAAI0D,KAAK,GAAGpD,KAAK,CAACQ,KAAN,CAAY4C,KAAxB;AACA1D,MAAAA,KAAK,CAACG,eAAN;;AAEA,UAAIuD,KAAJ,EAAW;AACTA,QAAAA,KAAK,CAAC1D,KAAD,CAAL;AACD;AACF,KAPc,CAAf;;AASApB,IAAAA,eAAe,CAACT,sBAAsB,CAACmC,KAAD,CAAvB,EAAgC,sBAAhC,EAAwD,UAAUN,KAAV,EAAiB;AACtFA,MAAAA,KAAK,CAACG,eAAN;AACA;;;;;;;;;;;AAWAH,MAAAA,KAAK,CAAC2D,WAAN,CAAkBC,wBAAlB;AACD,KAdc,CAAf;;AAgBA,WAAOtD,KAAP;AACD;;AAED,MAAIuD,MAAM,GAAGzD,aAAa,CAAC1C,SAA3B;;AAEAmG,EAAAA,MAAM,CAACC,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,QAAIC,aAAa,GAAG,KAAKjD,KAAL,CAAWiD,aAA/B;AACA,SAAKlC,iBAAL;AACAQ,IAAAA,MAAM,CAACnB,gBAAP,CAAwB,QAAxB,EAAkC,KAAK8C,QAAvC;AACAC,IAAAA,QAAQ,CAAC/C,gBAAT,CAA0B,WAA1B,EAAuC,KAAKgD,eAA5C;AACA,SAAK/C,KAAL,CAAW,KAAX;;AAEA,QAAI4C,aAAJ,EAAmB;AACjB,WAAKtC,OAAL,CAAaC,OAAb,CAAqByC,KAArB;AACD;AACF,GAVD;;AAYAN,EAAAA,MAAM,CAACO,kBAAP,GAA4B,SAASA,kBAAT,GAA8B;AACxD,SAAKjD,KAAL,CAAW,IAAX;AACD,GAFD;;AAIA0C,EAAAA,MAAM,CAACQ,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,SAAKzC,oBAAL;AACAS,IAAAA,MAAM,CAACjB,mBAAP,CAA2B,QAA3B,EAAqC,KAAK4C,QAA1C;AACAC,IAAAA,QAAQ,CAAC7C,mBAAT,CAA6B,WAA7B,EAA0C,KAAK8C,eAA/C;AACD,GAJD;;AAMAL,EAAAA,MAAM,CAACS,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,YAAY,GAAG,KAAKzD,KAAxB;AAAA,QACI0D,SAAS,GAAGD,YAAY,CAACvC,KAD7B;AAAA,QAEIyC,QAAQ,GAAGF,YAAY,CAACE,QAF5B;AAAA,QAGIC,SAAS,GAAGH,YAAY,CAACG,SAH7B;AAAA,QAIIpD,cAAc,GAAGiD,YAAY,CAACjD,cAJlC;AAAA,QAKIoC,KAAK,GAAGa,YAAY,CAACb,KALzB;AAAA,QAMIiB,SAAS,GAAGJ,YAAY,CAACI,SAN7B;AAAA,QAOIC,KAAK,GAAGL,YAAY,CAACK,KAPzB;AAAA,QAQIC,UAAU,GAAGN,YAAY,CAACpC,KAR9B;AAAA,QASI2C,IAAI,GAAGhH,6BAA6B,CAACyG,YAAD,EAAe,CAAC,OAAD,EAAU,UAAV,EAAsB,WAAtB,EAAmC,gBAAnC,EAAqD,OAArD,EAA8D,WAA9D,EAA2E,OAA3E,EAAoF,OAApF,CAAf,CATxC;;AAWA,QAAIpC,KAAK,GAAG,KAAK4C,OAAL,IAAgBF,UAA5B;AACA,QAAIG,OAAO,GAAG7F,KAAK,CAAC8F,aAAN,CAAoBnF,UAApB,EAAgC7C,QAAQ,CAAC;AACrDiI,MAAAA,EAAE,EAAEtF,GADiD;AAErDgF,MAAAA,KAAK,EAAEA,KAF8C;AAGrDF,MAAAA,SAAS,EAAE,CAACE,KAAD,GAASF,SAAS,IAAIvC,KAAK,CAACgD,MAAN,CAAa1B,IAAb,CAAkB2B,UAA/B,IAA6C,OAAtD,GAAgEC,SAHtB;AAIrDC,MAAAA,QAAQ,EAAE,IAJ2C;AAKrDC,MAAAA,GAAG,EAAE,KAAK9D,OAL2C;AAMrD+C,MAAAA,SAAS,EAAEA,SAN0C;AAOrDgB,MAAAA,WAAW,EAAE,KAAKC;AAPmC,KAAD,EAQnDX,IARmD,CAAxC,EAQJL,QARI,CAAd;;AAUA,QAAItC,KAAK,CAACgD,MAAN,CAAa1B,IAAb,CAAkBiC,UAAtB,EAAkC;AAChC,UAAIC,IAAI,GAAGnG,gBAAgB,CAAC2C,KAAK,CAACgD,MAAN,CAAa1B,IAAb,CAAkBiC,UAAnB,EAA+BvD,KAA/B,CAA3B;;AAEA,UAAIwD,IAAI,KAAKN,SAAT,IAAsBM,IAAI,KAAKxD,KAAK,CAACwD,IAAzC,EAA+C;AAC7CX,QAAAA,OAAO,GAAG7F,KAAK,CAAC8F,aAAN,CAAoB3F,YAAY,CAACsG,QAAjC,EAA2C;AACnD9G,UAAAA,KAAK,EAAE7B,QAAQ,CAAC,EAAD,EAAKkF,KAAL,EAAY;AACzBwD,YAAAA,IAAI,EAAEA;AADmB,WAAZ;AADoC,SAA3C,EAIPX,OAJO,CAAV;AAKD;AACF;;AAED,WAAO7F,KAAK,CAAC8F,aAAN,CAAoB1F,gBAApB,EAAsC;AAC3CoF,MAAAA,SAAS,EAAEjB,KAAK,IAAI3D;AADuB,KAAtC,EAEJZ,KAAK,CAAC8F,aAAN,CAAoBpF,QAApB,EAA8B;AAC/B6D,MAAAA,KAAK,EAAEA,KAAK,IAAI,KAAKA,KADU;AAE/BiB,MAAAA,SAAS,EAAEA,SAFoB;AAG/BvH,MAAAA,MAAM,EAAE;AAHuB,KAA9B,EAIA4H,OAJA,CAFI,CAAP;AAOD,GA1CD;;AA4CA,SAAO5E,aAAP;AACD,CA5TD,CA4TEhB,SA5TF,CAFA;;AAgUAR,eAAe,CAACwB,aAAD,EAAgB,aAAhB,EAA+Bd,YAA/B,CAAf;;AAEAV,eAAe,CAACwB,aAAD,EAAgB,cAAhB,EAAgC;AAC7C4B,EAAAA,KAAK,EAAE;AACLY,IAAAA,GAAG,EAAE,KADA;AAELD,IAAAA,IAAI,EAAE;AAFD,GADsC;AAK7CkD,EAAAA,QAAQ,EAAE,MALmC;AAM7C3D,EAAAA,OAAO,EAAE;AANoC,CAAhC,CAAf;;AASAhF,MAAM,CAAC4I,cAAP,CAAsB1F,aAAa,CAACf,YAApC,EAAkDA,YAAlD;AACA,SAASe,aAAT","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { defaultProps } from '../../default-props';\nimport { ThemeContext } from '../../contexts';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { backgroundIsDark, findScrollParents, findVisibleParent, parseMetricToNum } from '../../utils';\nimport { Box } from '../Box';\nimport { Keyboard } from '../Keyboard';\nimport { StyledDrop } from './StyledDrop'; // using react synthetic event to be able to stop propagation that\n// would otherwise close the layer on ESC.\n\nvar preventLayerClose = function preventLayerClose(event) {\n  var key = event.keyCode ? event.keyCode : event.which;\n\n  if (key === 27) {\n    event.stopPropagation();\n  }\n};\n\nvar DropContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(DropContainer, _Component);\n\n  function DropContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"dropRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"addScrollListener\", function () {\n      var dropTarget = _this.props.dropTarget;\n      _this.scrollParents = findScrollParents(dropTarget);\n\n      _this.scrollParents.forEach(function (scrollParent) {\n        return scrollParent.addEventListener('scroll', _this.place);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeScrollListener\", function () {\n      _this.scrollParents.forEach(function (scrollParent) {\n        return scrollParent.removeEventListener('scroll', _this.place);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickDocument\", function (event) {\n      var _this$props = _this.props,\n          dropTarget = _this$props.dropTarget,\n          onClickOutside = _this$props.onClickOutside;\n      var dropTargetNode = dropTarget;\n      var dropNode = _this.dropRef.current;\n\n      if (onClickOutside && dropNode && // need this for ie11\n      !dropTargetNode.contains(event.target) && !dropNode.contains(event.target)) {\n        onClickOutside();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function () {\n      _this.removeScrollListener();\n\n      _this.addScrollListener();\n\n      _this.place(false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"place\", function (preserveHeight) {\n      var _this$props2 = _this.props,\n          align = _this$props2.align,\n          dropTarget = _this$props2.dropTarget,\n          responsive = _this$props2.responsive,\n          stretch = _this$props2.stretch,\n          theme = _this$props2.theme;\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var target = dropTarget;\n      var container = _this.dropRef.current;\n\n      if (container && target) {\n        // clear prior styling\n        container.style.left = '';\n        container.style.top = '';\n        container.style.bottom = '';\n        container.style.width = '';\n\n        if (!preserveHeight) {\n          container.style.maxHeight = '';\n        } // get bounds\n\n\n        var targetRect = findVisibleParent(target).getBoundingClientRect();\n        var containerRect = container.getBoundingClientRect(); // determine width\n\n        var width = Math.min(stretch ? Math.max(targetRect.width, containerRect.width) : containerRect.width, windowWidth); // set left position\n\n        var left;\n\n        if (align.left) {\n          if (align.left === 'left') {\n            left = targetRect.left;\n          } else if (align.left === 'right') {\n            left = targetRect.left + targetRect.width;\n          }\n        } else if (align.right) {\n          if (align.right === 'left') {\n            left = targetRect.left - width;\n          } else if (align.right === 'right') {\n            left = targetRect.left + targetRect.width - width;\n          }\n        } else {\n          left = targetRect.left + targetRect.width / 2 - width / 2;\n        }\n\n        if (left + width > windowWidth) {\n          left -= left + width - windowWidth;\n        } else if (left < 0) {\n          left = 0;\n        } // set top or bottom position\n\n\n        var top;\n        var bottom;\n        var maxHeight = containerRect.height;\n\n        if (align.top) {\n          if (align.top === 'top') {\n            top = targetRect.top;\n          } else {\n            top = targetRect.bottom;\n          } // Calculate visible area underneath the control w.r.t window height\n\n\n          var percentVisibleAreaBelow = 100 - targetRect.bottom / windowHeight * 100; // Check whether it is within 20% from bottom of the window or visible\n          // area to flip the control\n          // DropContainer doesn't fit well within visible area when\n          // percentVisibleAreaBelow value<=20%\n          // There is enough space from DropContainer to bottom of the window\n          // when percentVisibleAreaBelow>20%.\n\n          if (windowHeight === top || percentVisibleAreaBelow <= 20) {\n            // We need more room than we have.\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              bottom = targetRect.top;\n            } else {\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else if (top > 0) {\n            maxHeight = windowHeight - top;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else {\n            maxHeight = windowHeight - top;\n          }\n        } else if (align.bottom) {\n          if (align.bottom === 'bottom') {\n            bottom = targetRect.bottom;\n          } else {\n            bottom = targetRect.top;\n          }\n\n          maxHeight = bottom;\n          container.style.maxHeight = maxHeight + \"px\";\n        } else {\n          // center\n          top = targetRect.top + targetRect.height / 2 - containerRect.height / 2;\n          maxHeight = windowHeight - top;\n        } // if we can't fit it all, or we're rather close,\n        // see if there's more room the other direction\n\n\n        if (responsive && (containerRect.height > maxHeight || maxHeight < windowHeight / 10)) {\n          // We need more room than we have.\n          if (align.top && top > windowHeight / 2) {\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              // top = Math.max(targetRect.top - containerRect.height, 0);\n              // maxHeight = targetRect.top - top;\n              bottom = targetRect.top;\n            } else {\n              // top = Math.max(targetRect.bottom - containerRect.height, 0);\n              // maxHeight = targetRect.bottom - top;\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n          } else if (align.bottom && maxHeight < windowHeight / 2) {\n            // We put it above but there's more room below, put it below\n            bottom = '';\n\n            if (align.bottom === 'bottom') {\n              top = targetRect.top;\n            } else {\n              top = targetRect.bottom;\n            }\n\n            maxHeight = windowHeight - top;\n          }\n        }\n\n        container.style.left = left + \"px\";\n\n        if (stretch) {\n          // offset width by 0.1 to avoid a bug in ie11 that\n          // unnecessarily wraps the text if width is the same\n          // NOTE: turned off for now\n          container.style.width = width + 0.1 + \"px\";\n        } // the (position:absolute + scrollTop)\n        // is presenting issues with desktop scroll flickering\n\n\n        if (top !== '') {\n          container.style.top = top + \"px\";\n        }\n\n        if (bottom !== '') {\n          container.style.bottom = windowHeight - bottom + \"px\";\n        }\n\n        if (!preserveHeight) {\n          if (theme.drop && theme.drop.maxHeight) {\n            maxHeight = Math.min(maxHeight, parseMetricToNum(theme.drop.maxHeight));\n          }\n\n          container.style.maxHeight = maxHeight + \"px\";\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEsc\", function (event) {\n      var onEsc = _this.props.onEsc;\n      event.stopPropagation();\n\n      if (onEsc) {\n        onEsc(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"preventClickBubbling\", function (event) {\n      event.stopPropagation();\n      /**\n       * the React event system actually listens to all events at the top level\n       * and then handles its own bubbling / capturing virtually. This means that\n       * even if we call stopPropagation, it only affects the React synthetic\n       * event, and the native event still bubbles upward.\n       * Any code that uses native events (like the close listener in this class)\n       * will still get the bubbled event, unless we also call\n       * event.nativeEvent.stopImmediatePropagation, which bridges the gap from\n       * React synthetic event to native DOM event.\n       */\n\n      event.nativeEvent.stopImmediatePropagation();\n    });\n\n    return _this;\n  }\n\n  var _proto = DropContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var restrictFocus = this.props.restrictFocus;\n    this.addScrollListener();\n    window.addEventListener('resize', this.onResize);\n    document.addEventListener('mousedown', this.onClickDocument);\n    this.place(false);\n\n    if (restrictFocus) {\n      this.dropRef.current.focus();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    this.place(true);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.removeScrollListener();\n    window.removeEventListener('resize', this.onResize);\n    document.removeEventListener('mousedown', this.onClickDocument);\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        alignProp = _this$props3.align,\n        children = _this$props3.children,\n        elevation = _this$props3.elevation,\n        onClickOutside = _this$props3.onClickOutside,\n        onEsc = _this$props3.onEsc,\n        onKeyDown = _this$props3.onKeyDown,\n        plain = _this$props3.plain,\n        propsTheme = _this$props3.theme,\n        rest = _objectWithoutPropertiesLoose(_this$props3, [\"align\", \"children\", \"elevation\", \"onClickOutside\", \"onEsc\", \"onKeyDown\", \"plain\", \"theme\"]);\n\n    var theme = this.context || propsTheme;\n    var content = React.createElement(StyledDrop, _extends({\n      as: Box,\n      plain: plain,\n      elevation: !plain ? elevation || theme.global.drop.shadowSize || 'small' : undefined,\n      tabIndex: \"-1\",\n      ref: this.dropRef,\n      alignProp: alignProp,\n      onMouseDown: this.preventClickBubbling\n    }, rest), children);\n\n    if (theme.global.drop.background) {\n      var dark = backgroundIsDark(theme.global.drop.background, theme);\n\n      if (dark !== undefined && dark !== theme.dark) {\n        content = React.createElement(ThemeContext.Provider, {\n          value: _extends({}, theme, {\n            dark: dark\n          })\n        }, content);\n      }\n    }\n\n    return React.createElement(FocusedContainer, {\n      onKeyDown: onEsc && preventLayerClose\n    }, React.createElement(Keyboard, {\n      onEsc: onEsc && this.onEsc,\n      onKeyDown: onKeyDown,\n      target: \"document\"\n    }, content));\n  };\n\n  return DropContainer;\n}(Component);\n\n_defineProperty(DropContainer, \"contextType\", ThemeContext);\n\n_defineProperty(DropContainer, \"defaultProps\", {\n  align: {\n    top: 'top',\n    left: 'left'\n  },\n  overflow: 'auto',\n  stretch: 'width'\n});\n\nObject.setPrototypeOf(DropContainer.defaultProps, defaultProps);\nexport { DropContainer };"]},"metadata":{},"sourceType":"module"}