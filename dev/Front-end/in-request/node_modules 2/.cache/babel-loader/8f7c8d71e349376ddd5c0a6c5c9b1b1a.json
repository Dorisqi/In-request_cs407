{"ast":null,"code":"var _jsxFileName = \"/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Login_Related/Log_Page.js\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PropTypes from \"prop-types\";\nimport { withStyles } from '@material-ui/core/styles';\nimport { storiesOf } from \"@storybook/react\";\nimport { CircleInformation, Currency } from \"grommet-icons\";\nimport { Box, Form, CheckBox, RangeInput, Select, FormField, TextArea, Button, MaskedInput, RadioButtonGroup, Grommet, Grid, Stack, Tab, Tabs, Text, TextInput } from \"grommet\";\nimport { grommet } from \"grommet/themes\";\nimport { Attraction, Car, TreeOption } from \"grommet-icons\";\nimport TextField from '@material-ui/core/TextField';\nimport { Log_in_Box } from \"./Log_in_Box.js\";\nimport { Sign_up_Box } from \"./Sign_up_Box.js\";\nimport { deepMerge } from \"grommet/utils\";\nimport { tryBox } from \"./tryBox.js\";\nimport { css } from \"styled-components\";\nimport \"firebase/auth\";\nimport { auth } from \"../../firebase\";\nimport { fdb } from \"../../firebase\";\nimport { Redirect } from 'react-router'; //import {Server} from \"./server.js\"\n\nconst customFormFieldTheme = {\n  global: {\n    font: {\n      size: \"16px\"\n    },\n    input: {\n      weight: 400\n    }\n  },\n  formField: {\n    label: {\n      color: \"dark-3\",\n      size: \"large\",\n      margin: \"xsmall\",\n      weight: 600\n    },\n    border: {\n      position: \"outer\",\n      side: \"all\"\n    },\n    disabled: {\n      background: {\n        color: \"light-3\",\n        opacity: true\n      }\n    },\n    content: {\n      pad: \"small\"\n    },\n    error: {\n      background: {\n        color: \"status-critical\",\n        opacity: \"weak\"\n      }\n    },\n    margin: 30\n  },\n  tab: {\n    active: {\n      background: \"dark-1\",\n      color: \"accent-1\"\n    },\n    border: undefined,\n    color: \"white\",\n    hover: {\n      background: \"dark-1\"\n    },\n    margin: undefined,\n    pad: {\n      bottom: undefined,\n      horizontal: \"small\"\n    },\n    extend: ({\n      theme\n    }) => css`\n      border-radius: ${theme.global.control.border.radius};\n      box-shadow: ${theme.global.elevation.light.small};\n    `\n  }\n}; // const RichTabTitle = ({ icon, label }) => (\n//   <Box direction=\"row\" align=\"center\" gap=\"xsmall\" margin=\"xsmall\">\n//     {icon}\n//     <Text size=\"small\">\n//       <strong>{label}</strong>\n//     </Text>\n//   </Box>\n// );\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.on_Login = event => {\n      //console.log(this.state.Email)\n      const email = this.state.Email;\n      const ps = this.state.Password;\n      auth.signInWithEmailAndPassword(email, ps).then(error => {\n        // log-in successful.\n        const ref = fdb.collection('users').doc(email);\n        ref.get().then(doc => {\n          if (!doc.exists) {\n            console.log('No such document!');\n          } else {\n            ref.update({\n              LoginState: true\n            }).then(() => {\n              console.log('login successful'); // console.log('Data:', doc.data());\n              //todo redirect to post\n            });\n          }\n        }).catch(err => {\n          // An error happened.\n          console.log('Error logging in', err);\n        });\n      });\n    };\n\n    this.on_Signup = event => {\n      //console.log(this.state.Email)\n      const email = this.state.Email;\n      const ps = this.state.Password;\n      const nickname = this.state.Nickname;\n      console.log(\"in signuup\");\n      auth.createUserWithEmailAndPassword(email, ps).then(error => {\n        // log-in successful.\n        const ref = fdb.collection('users').doc(email);\n        ref.set({\n          nickname: nickname,\n          email: email,\n          LoginState: true,\n          photostate: false\n        });\n        var user = auth.currentUser;\n        user.sendEmailVerification().then(function () {\n          // Email sent.\n          console.log(\"varification\");\n        }).catch(function (error) {\n          // An error happened.\n          console.log(error);\n        });\n        console.log('signup successful');\n      }).catch(err => {\n        // An error happened.\n        console.log('Error sign up', err);\n      });\n    };\n\n    this.onActive = event => {\n      //console.log(nextIndex)\n      const value = this.state.index == 0 ? 1 : 0;\n      this.setState({\n        index: value\n      });\n    };\n\n    this.state = {\n      Email: \"\",\n      Password: \"\",\n      Nickname: \"\",\n      auth: this.auth,\n      fdb: this.fdb,\n      name: \"\",\n      index: 0,\n      tab_f: 0\n    };\n    this.on_Login = this.on_Login.bind(this);\n    this.on_Signup = this.on_Signup.bind(this);\n    this.update_Pw = this.update_Pw.bind(this);\n    this.update_Email = this.update_Email.bind(this);\n    this.update_Nickname = this.update_Nickname.bind(this);\n    this.onActive = this.onActive.bind(this);\n  }\n\n  update_Email(value) {\n    this.setState(state => ({\n      Email: value\n    }));\n  }\n\n  update_Pw(value) {\n    this.setState(state => ({\n      Password: value\n    })); //console.log(value)\n  }\n\n  update_Nickname(value) {\n    this.setState(state => ({\n      Nickname: value\n    })); //console.log(value)\n  }\n\n  render() {\n    return React.createElement(Grommet, {\n      theme: deepMerge(grommet, customFormFieldTheme),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Box, {\n      direction: \"column\",\n      pad: \"fill\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Box, {\n      right: true,\n      pad: \"380px\",\n      background: \"#d1bec3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Box, {\n      right: true,\n      width: \"90%\",\n      height: \"80%\",\n      pad: \"{{ left: 'large', right: 'large' }}\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Tabs, {\n      color: \"#d1bec3\",\n      activeIndex: this.state.index,\n      onActive: this.onActive,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      title: React.createElement(Box, {\n        direction: \"row\",\n        align: \"center\",\n        gap: \"xsmall\",\n        margin: \"xsmall\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Text, {\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"LOG IN\"))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(Log_in_Box, {\n      P_update_pw: this.update_Pw,\n      P_update_email: this.update_Email,\n      P_Submit_func: this.on_Login,\n      auth: this.auth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    })), React.createElement(Tab, {\n      title: React.createElement(Box, {\n        direction: \"row\",\n        align: \"center\",\n        gap: \"xsmall\",\n        margin: \"xsmall\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(Text, {\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"SIGN UP\"))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(Sign_up_Box, {\n      P_update_pw: this.update_Pw,\n      P_update_email: this.update_Email,\n      P_Submit_func: this.on_Signup,\n      P_update_nickname: this.update_Nickname,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/qier/Documents/cs407/In-request_cs407/dev/Front-end/in-request/src/Components/Login_Related/Log_Page.js"],"names":["React","makeStyles","PropTypes","withStyles","storiesOf","CircleInformation","Currency","Box","Form","CheckBox","RangeInput","Select","FormField","TextArea","Button","MaskedInput","RadioButtonGroup","Grommet","Grid","Stack","Tab","Tabs","Text","TextInput","grommet","Attraction","Car","TreeOption","TextField","Log_in_Box","Sign_up_Box","deepMerge","tryBox","css","auth","fdb","Redirect","customFormFieldTheme","global","font","size","input","weight","formField","label","color","margin","border","position","side","disabled","background","opacity","content","pad","error","tab","active","undefined","hover","bottom","horizontal","extend","theme","control","radius","elevation","light","small","Login","Component","constructor","props","on_Login","event","email","state","Email","ps","Password","signInWithEmailAndPassword","then","ref","collection","doc","get","exists","console","log","update","LoginState","catch","err","on_Signup","nickname","Nickname","createUserWithEmailAndPassword","set","photostate","user","currentUser","sendEmailVerification","onActive","value","index","setState","name","tab_f","bind","update_Pw","update_Email","update_Nickname","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,iBAAT,EAA4BC,QAA5B,QAA4C,eAA5C;AACA,SAASC,GAAT,EAAaC,IAAb,EAAkBC,QAAlB,EAA2BC,UAA3B,EAAsCC,MAAtC,EAA6CC,SAA7C,EACEC,QADF,EACWC,MADX,EACkBC,WADlB,EAC8BC,gBAD9B,EACgDC,OADhD,EACwDC,IADxD,EAC6DC,KAD7D,EACoEC,GADpE,EACyEC,IADzE,EAC+EC,IAD/E,EACqFC,SADrF,QACsG,SADtG;AAEA,SAASC,OAAT,QAAwB,gBAAxB;AACA,SAASC,UAAT,EAAqBC,GAArB,EAA0BC,UAA1B,QAA4C,eAA5C;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAAQC,UAAR,QAAyB,iBAAzB;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,SAAQC,MAAR,QAAqB,aAArB;AACA,SAASC,GAAT,QAAoB,mBAApB;AACA,OAAO,eAAP;AACA,SAAQC,IAAR,QAAmB,gBAAnB;AACA,SAAQC,GAAR,QAAkB,gBAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB,C,CAEA;;AACA,MAAMC,oBAAoB,GAAE;AAC1BC,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAE;AADF,KADA;AAINC,IAAAA,KAAK,EAAE;AACLC,MAAAA,MAAM,EAAE;AADH;AAJD,GADkB;AAS1BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE,QADF;AAELL,MAAAA,IAAI,EAAE,OAFD;AAGLM,MAAAA,MAAM,EAAE,QAHH;AAILJ,MAAAA,MAAM,EAAE;AAJH,KADE;AAOTK,IAAAA,MAAM,EAAE;AACNC,MAAAA,QAAQ,EAAE,OADJ;AAENC,MAAAA,IAAI,EAAE;AAFA,KAPC;AAWTC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,UAAU,EAAE;AACVN,QAAAA,KAAK,EAAE,SADG;AAEVO,QAAAA,OAAO,EAAE;AAFC;AADJ,KAXD;AAkBTC,IAAAA,OAAO,EAAE;AACPC,MAAAA,GAAG,EAAE;AADE,KAlBA;AAqBTC,IAAAA,KAAK,EAAE;AACLJ,MAAAA,UAAU,EAAE;AACVN,QAAAA,KAAK,EAAE,iBADG;AAEVO,QAAAA,OAAO,EAAE;AAFC;AADP,KArBE;AA2BTN,IAAAA,MAAM,EAAE;AA3BC,GATe;AAsC1BU,EAAAA,GAAG,EAAE;AACHC,IAAAA,MAAM,EAAE;AACNN,MAAAA,UAAU,EAAE,QADN;AAENN,MAAAA,KAAK,EAAE;AAFD,KADL;AAMHE,IAAAA,MAAM,EAAEW,SANL;AAOHb,IAAAA,KAAK,EAAE,OAPJ;AAQHc,IAAAA,KAAK,EAAE;AACLR,MAAAA,UAAU,EAAE;AADP,KARJ;AAWHL,IAAAA,MAAM,EAAEY,SAXL;AAYHJ,IAAAA,GAAG,EAAE;AACHM,MAAAA,MAAM,EAAEF,SADL;AAEHG,MAAAA,UAAU,EAAE;AAFT,KAZF;AAgBHC,IAAAA,MAAM,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAe9B,GAAI;uBACR8B,KAAK,CAACzB,MAAN,CAAa0B,OAAb,CAAqBjB,MAArB,CAA4BkB,MAAO;oBACtCF,KAAK,CAACzB,MAAN,CAAa4B,SAAb,CAAuBC,KAAvB,CAA6BC,KAAM;;AAlBhD;AAtCqB,CAA5B,C,CA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA,MAAMC,KAAN,SAAoBrE,KAAK,CAACsE,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;;AADgB,SAyBlBC,QAzBkB,GAyBTC,KAAK,IAAG;AACf;AACA,YAAMC,KAAK,GAAG,KAAKC,KAAL,CAAWC,KAAzB;AACA,YAAMC,EAAE,GAAG,KAAKF,KAAL,CAAWG,QAAtB;AACA7C,MAAAA,IAAI,CAAC8C,0BAAL,CAAgCL,KAAhC,EAAuCG,EAAvC,EAA2CG,IAA3C,CAAgD1B,KAAK,IAAI;AAC3D;AACE,cAAM2B,GAAG,GAAG/C,GAAG,CAACgD,UAAJ,CAAe,OAAf,EAAwBC,GAAxB,CAA4BT,KAA5B,CAAZ;AACAO,QAAAA,GAAG,CAACG,GAAJ,GAAUJ,IAAV,CAAeG,GAAG,IAAI;AACpB,cAAI,CAACA,GAAG,CAACE,MAAT,EAAiB;AACfC,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACD,WAFD,MAEO;AACLN,YAAAA,GAAG,CAACO,MAAJ,CAAW;AACTC,cAAAA,UAAU,EAAE;AADH,aAAX,EAEGT,IAFH,CAEQ,MAAM;AACZM,cAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADY,CAGZ;AACA;AACD,aAPD;AAQD;AACF,SAbD,EAaGG,KAbH,CAaSC,GAAG,IAAI;AACd;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCI,GAAhC;AACD,SAhBD;AAiBD,OApBC;AAqBD,KAlDiB;;AAAA,SAoDlBC,SApDkB,GAoDRnB,KAAK,IAAG;AAChB;AACA,YAAMC,KAAK,GAAG,KAAKC,KAAL,CAAWC,KAAzB;AACA,YAAMC,EAAE,GAAG,KAAKF,KAAL,CAAWG,QAAtB;AACA,YAAMe,QAAQ,GAAC,KAAKlB,KAAL,CAAWmB,QAA1B;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AAEAtD,MAAAA,IAAI,CAAC8D,8BAAL,CAAoCrB,KAApC,EAA2CG,EAA3C,EAA+CG,IAA/C,CAAoD1B,KAAK,IAAI;AAC/D;AACE,cAAM2B,GAAG,GAAG/C,GAAG,CAACgD,UAAJ,CAAe,OAAf,EAAwBC,GAAxB,CAA4BT,KAA5B,CAAZ;AACEO,QAAAA,GAAG,CAACe,GAAJ,CAAQ;AACNH,UAAAA,QAAQ,EAAEA,QADJ;AACcnB,UAAAA,KAAK,EAAEA,KADrB;AAENe,UAAAA,UAAU,EAAE,IAFN;AAEYQ,UAAAA,UAAU,EAAE;AAFxB,SAAR;AAIA,YAAIC,IAAI,GAAGjE,IAAI,CAACkE,WAAhB;AAEAD,QAAAA,IAAI,CAACE,qBAAL,GAA6BpB,IAA7B,CAAkC,YAAW;AAC3C;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD,SAHD,EAGGG,KAHH,CAGS,UAASpC,KAAT,EAAgB;AACvB;AACAgC,UAAAA,OAAO,CAACC,GAAR,CAAYjC,KAAZ;AACD,SAND;AAOAgC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACD,OAjBD,EAiBGG,KAjBH,CAiBSC,GAAG,IAAI;AACd;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BI,GAA7B;AACD,OApBD;AAwBD,KAnFiB;;AAAA,SA0GlBU,QA1GkB,GA0GT5B,KAAK,IAAE;AAEd;AACA,YAAM6B,KAAK,GAAG,KAAK3B,KAAL,CAAW4B,KAAX,IAAoB,CAApB,GAAuB,CAAvB,GAAyB,CAAvC;AACA,WAAKC,QAAL,CAAc;AAAED,QAAAA,KAAK,EAAED;AAAT,OAAd;AACD,KA/GiB;;AAEhB,SAAK3B,KAAL,GAAY;AACVC,MAAAA,KAAK,EAAC,EADI;AAEVE,MAAAA,QAAQ,EAAC,EAFC;AAGVgB,MAAAA,QAAQ,EAAC,EAHC;AAIV7D,MAAAA,IAAI,EAAE,KAAKA,IAJD;AAKVC,MAAAA,GAAG,EAAE,KAAKA,GALA;AAMVuE,MAAAA,IAAI,EAAC,EANK;AAOVF,MAAAA,KAAK,EAAC,CAPI;AAQVG,MAAAA,KAAK,EAAC;AARI,KAAZ;AAcA,SAAKlC,QAAL,GAAc,KAAKA,QAAL,CAAcmC,IAAd,CAAmB,IAAnB,CAAd;AACA,SAAKf,SAAL,GAAe,KAAKA,SAAL,CAAee,IAAf,CAAoB,IAApB,CAAf;AACA,SAAKC,SAAL,GAAe,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAf;AACA,SAAKE,YAAL,GAAkB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAAlB;AACA,SAAKG,eAAL,GAAqB,KAAKA,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAArB;AACA,SAAKN,QAAL,GAAc,KAAKA,QAAL,CAAcM,IAAd,CAAmB,IAAnB,CAAd;AACD;;AA+DDE,EAAAA,YAAY,CAACP,KAAD,EAAO;AAGf,SAAKE,QAAL,CAAc7B,KAAK,KAAK;AACtBC,MAAAA,KAAK,EAAC0B;AADgB,KAAL,CAAnB;AAIH;;AACDM,EAAAA,SAAS,CAACN,KAAD,EAAO;AACZ,SAAKE,QAAL,CAAc7B,KAAK,KAAK;AACtBG,MAAAA,QAAQ,EAACwB;AADa,KAAL,CAAnB,EADY,CAId;AACD;;AACDQ,EAAAA,eAAe,CAACR,KAAD,EAAO;AAClB,SAAKE,QAAL,CAAc7B,KAAK,KAAK;AACtBmB,MAAAA,QAAQ,EAACQ;AADa,KAAL,CAAnB,EADkB,CAIpB;AACD;;AAYDS,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAEjF,SAAS,CAACP,OAAD,EAAUa,oBAAV,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGE,oBAAC,GAAD;AACE,MAAA,SAAS,EAAC,QADZ;AAEE,MAAA,GAAG,EAAC,MAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAII,oBAAC,GAAD;AAAK,MAAA,KAAK,MAAV;AAAW,MAAA,GAAG,EAAC,OAAf;AAAuB,MAAA,UAAU,EAAC,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,KAAK,MAAV;AAAW,MAAA,KAAK,EAAC,KAAjB;AAAuB,MAAA,MAAM,EAAC,KAA9B;AAAoC,MAAA,GAAG,EAAC,qCAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAsB,MAAA,WAAW,EAAE,KAAKuC,KAAL,CAAW4B,KAA9C;AAAqD,MAAA,QAAQ,EAAE,KAAKF,QAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,GAAD;AACE,MAAA,KAAK,EACH,oBAAC,GAAD;AAAK,QAAA,SAAS,EAAC,KAAf;AAAqB,QAAA,KAAK,EAAC,QAA3B;AAAoC,QAAA,GAAG,EAAC,QAAxC;AAAiD,QAAA,MAAM,EAAC,QAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CADF,CAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE,oBAAC,UAAD;AACA,MAAA,WAAW,EAAE,KAAKO,SADlB;AAEA,MAAA,cAAc,EAAE,KAAKC,YAFrB;AAGA,MAAA,aAAa,EAAE,KAAKrC,QAHpB;AAIA,MAAA,IAAI,EAAE,KAAKvC,IAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADA,EAgBA,oBAAC,GAAD;AACE,MAAA,KAAK,EACH,oBAAC,GAAD;AAAK,QAAA,SAAS,EAAC,KAAf;AAAqB,QAAA,KAAK,EAAC,QAA3B;AAAoC,QAAA,GAAG,EAAC,QAAxC;AAAiD,QAAA,MAAM,EAAC,QAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF,CAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE,oBAAC,WAAD;AACA,MAAA,WAAW,EAAE,KAAK2E,SADlB;AAEA,MAAA,cAAc,EAAE,KAAKC,YAFrB;AAGA,MAAA,aAAa,EAAE,KAAKjB,SAHpB;AAIA,MAAA,iBAAiB,EAAE,KAAKkB,eAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CAhBA,CAHA,CADF,CAJJ,CAHF,CADF;AAiDD;;AAvKiC;;AA0KpC,eAAe1C,KAAf","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PropTypes from \"prop-types\";\nimport {withStyles} from '@material-ui/core/styles'\nimport { storiesOf } from \"@storybook/react\";\nimport { CircleInformation, Currency } from \"grommet-icons\";\nimport { Box,Form,CheckBox,RangeInput,Select,FormField,\n  TextArea,Button,MaskedInput,RadioButtonGroup, Grommet,Grid,Stack, Tab, Tabs, Text, TextInput } from \"grommet\";\nimport { grommet } from \"grommet/themes\";\nimport { Attraction, Car, TreeOption } from \"grommet-icons\";\nimport TextField from '@material-ui/core/TextField';\nimport {Log_in_Box} from \"./Log_in_Box.js\"\nimport {Sign_up_Box} from \"./Sign_up_Box.js\"\nimport { deepMerge } from \"grommet/utils\";\nimport {tryBox} from \"./tryBox.js\"\nimport { css } from \"styled-components\";\nimport \"firebase/auth\"\nimport {auth} from \"../../firebase\";\nimport {fdb} from \"../../firebase\";\nimport { Redirect } from 'react-router';\n\n//import {Server} from \"./server.js\"\nconst customFormFieldTheme ={\n  global: {\n    font: {\n      size: \"16px\"\n    },\n    input: {\n      weight: 400\n    }\n  },\n  formField: {\n    label: {\n      color: \"dark-3\",\n      size: \"large\",\n      margin: \"xsmall\",\n      weight: 600\n    },\n    border: {\n      position: \"outer\",\n      side: \"all\"\n    },\n    disabled: {\n      background: {\n        color: \"light-3\",\n        opacity: true\n      }\n    },\n\n    content: {\n      pad: \"small\"\n    },\n    error: {\n      background: {\n        color: \"status-critical\",\n        opacity: \"weak\"\n      }\n    },\n    margin: 30\n  },\n  tab: {\n    active: {\n      background: \"dark-1\",\n      color: \"accent-1\"\n    },\n\n    border: undefined,\n    color: \"white\",\n    hover: {\n      background: \"dark-1\"\n    },\n    margin: undefined,\n    pad: {\n      bottom: undefined,\n      horizontal: \"small\"\n    },\n    extend: ({ theme }) => css`\n      border-radius: ${theme.global.control.border.radius};\n      box-shadow: ${theme.global.elevation.light.small};\n    `\n  }\n};\n// const RichTabTitle = ({ icon, label }) => (\n//   <Box direction=\"row\" align=\"center\" gap=\"xsmall\" margin=\"xsmall\">\n//     {icon}\n//     <Text size=\"small\">\n//       <strong>{label}</strong>\n//     </Text>\n//   </Box>\n// );\n\n\n\n\n\nclass Login extends React.Component {\n  constructor(props){\n    super(props)\n    this.state ={\n      Email:\"\",\n      Password:\"\",\n      Nickname:\"\",\n      auth: this.auth,\n      fdb: this.fdb,\n      name:\"\",\n      index:0,\n      tab_f:0\n\n\n\n    }\n\n    this.on_Login=this.on_Login.bind(this)\n    this.on_Signup=this.on_Signup.bind(this)\n    this.update_Pw=this.update_Pw.bind(this)\n    this.update_Email=this.update_Email.bind(this)\n    this.update_Nickname=this.update_Nickname.bind(this)\n    this.onActive=this.onActive.bind(this)\n  }\n\n\n  on_Login=event =>{\n    //console.log(this.state.Email)\n    const email = this.state.Email\n    const ps = this.state.Password\n    auth.signInWithEmailAndPassword(email, ps).then(error => {\n  // log-in successful.\n    const ref = fdb.collection('users').doc(email);\n    ref.get().then(doc => {\n      if (!doc.exists) {\n        console.log('No such document!');\n      } else {\n        ref.update({\n          LoginState: true\n        }).then(() => {\n          console.log('login successful');\n\n          // console.log('Data:', doc.data());\n          //todo redirect to post\n        });\n      }\n    }).catch(err => {\n      // An error happened.\n      console.log('Error logging in', err);\n    });\n  });\n  }\n\n  on_Signup=event =>{\n    //console.log(this.state.Email)\n    const email = this.state.Email\n    const ps = this.state.Password\n    const nickname=this.state.Nickname\n    console.log(\"in signuup\")\n\n    auth.createUserWithEmailAndPassword(email, ps).then(error => {\n  // log-in successful.\n    const ref = fdb.collection('users').doc(email);\n      ref.set({\n        nickname: nickname, email: email,\n        LoginState: true, photostate: false\n      });\n      var user = auth.currentUser;\n\n      user.sendEmailVerification().then(function() {\n        // Email sent.\n        console.log(\"varification\")\n      }).catch(function(error) {\n        // An error happened.\n        console.log(error)\n      });\n      console.log('signup successful');\n    }).catch(err => {\n      // An error happened.\n      console.log('Error sign up', err);\n    });\n\n\n\n  }\n\n  update_Email(value){\n\n\n      this.setState(state => ({\n        Email:value\n      }))\n\n  }\n  update_Pw(value){\n      this.setState(state => ({\n        Password:value\n      }))\n    //console.log(value)\n  }\n  update_Nickname(value){\n      this.setState(state => ({\n        Nickname:value\n      }))\n    //console.log(value)\n  }\n\n  onActive=event=>{\n\n    //console.log(nextIndex)\n    const value = this.state.index == 0? 1:0\n    this.setState({ index: value })\n  }\n\n\n\n\n  render() {\n    return (\n      <Grommet theme={deepMerge(grommet, customFormFieldTheme)}>\n\n\n        <Box\n          direction=\"column\"\n          pad=\"fill\"\n        >\n            <Box right pad=\"380px\" background=\"#d1bec3\">\n              <Box right width=\"90%\" height=\"80%\" pad=\"{{ left: 'large', right: 'large' }}\" >\n\n\n              <Tabs color=\"#d1bec3\" activeIndex={this.state.index} onActive={this.onActive}>\n              <Tab\n                title={\n                  <Box direction=\"row\" align=\"center\" gap=\"xsmall\" margin=\"xsmall\">\n                    <Text size=\"small\">\n                      <strong>LOG IN</strong>\n                    </Text>\n                  </Box>\n                }\n              >\n                <Log_in_Box\n                P_update_pw={this.update_Pw}\n                P_update_email={this.update_Email}\n                P_Submit_func={this.on_Login}\n                auth={this.auth}/>\n              </Tab>\n              <Tab\n                title={\n                  <Box direction=\"row\" align=\"center\" gap=\"xsmall\" margin=\"xsmall\">\n                    <Text size=\"small\">\n                      <strong>SIGN UP</strong>\n                    </Text>\n                  </Box>\n                }\n              >\n                <Sign_up_Box\n                P_update_pw={this.update_Pw}\n                P_update_email={this.update_Email}\n                P_Submit_func={this.on_Signup}\n                P_update_nickname={this.update_Nickname}/>\n              </Tab>\n              </Tabs>\n            </Box>\n          </Box>\n        </Box>\n      </Grommet >\n  );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}